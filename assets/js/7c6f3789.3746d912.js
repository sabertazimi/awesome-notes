"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[65842],{65199:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"ai/python/toolchain","title":"Toolchain","description":"Installation","source":"@site/content/ai/python/toolchain.md","sourceDirName":"ai/python","slug":"/ai/python/toolchain","permalink":"/notes/ai/python/toolchain","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/ai/python/toolchain.md","tags":[{"inline":true,"label":"AI","permalink":"/notes/tags/ai"},{"inline":true,"label":"Language","permalink":"/notes/tags/language"},{"inline":true,"label":"Python","permalink":"/notes/tags/python"},{"inline":true,"label":"Toolchain","permalink":"/notes/tags/toolchain"},{"inline":true,"label":"UV","permalink":"/notes/tags/uv"}],"version":"current","lastUpdatedBy":"sabertazimi","lastUpdatedAt":1769665700000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"tags":["AI","Language","Python","Toolchain","UV"]},"sidebar":"tutorialSidebar","previous":{"title":"Python","permalink":"/notes/ai/python/"},"next":{"title":"Data Structure","permalink":"/notes/ai/python/data-structure"}}');var r=i(35656),s=i(86145);const t={sidebar_position:1,tags:["AI","Language","Python","Toolchain","UV"]},a="Toolchain",c={},o=[{value:"Installation",id:"installation",level:2},{value:"Mirrors",id:"mirrors",level:2},{value:"Python",id:"python",level:2},{value:"Initialize",id:"initialize",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Lockfile",id:"lockfile",level:2},{value:"Virtual Environment",id:"virtual-environment",level:2},{value:"Scripts",id:"scripts",level:2},{value:"Execution",id:"execution",level:2},{value:"Project",id:"project",level:2},{value:"Workspace",id:"workspace",level:2},{value:"Monorepo",id:"monorepo",level:3},{value:"Package",id:"package",level:3},{value:"Command",id:"command",level:3},{value:"Caching",id:"caching",level:2},{value:"Dockerfile",id:"dockerfile",level:2},{value:"Linter",id:"linter",level:2},{value:"Library",id:"library",level:2},{value:"ASGI",id:"asgi",level:3},{value:"Display",id:"display",level:3},{value:"AI",id:"ai",level:3},{value:"Debugging",id:"debugging",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"toolchain",children:"Toolchain"})}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"scoop install main/uv\necho 'eval \"$(uv generate-shell-completion bash)\"' >> ~/.bashrc\necho 'eval \"$(uvx --generate-shell-completion bash)\"' >> ~/.bashrc\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'uv cache clean\nrm -r "$(uv python dir)"\nrm -r "$(uv tool dir)"\nrm ~/.local/bin/uv ~/.local/bin/uvx\n'})}),"\n",(0,r.jsx)(n.h2,{id:"mirrors",children:"Mirrors"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Python mirror\nexport UV_PYTHON_INSTALL_MIRROR="https://gh-proxy.com/github.com/indygreg/python-build-standalone/releases/download"\n# PyPI mirror\nexport UV_DEFAULT_INDEX="https://mirrors.aliyun.com/pypi/simple"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"python",children:"Python"}),"\n",(0,r.jsx)(n.p,{children:"Install Python:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"uv python install 3.14\nuv python list\nuvx python@3.14 -c \"print('hello world')\"\n"})}),"\n",(0,r.jsx)(n.h2,{id:"initialize",children:"Initialize"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"uv init hello-app\nuv init --package hello-package\nuv init --lib hello-lib\nuv init --script hello-script.py --python 3.14\n"})}),"\n",(0,r.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,r.jsx)(n.p,{children:"Manage dependencies:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"uv add 'requests==2.31.0' # \u589e\u52a0\u4f9d\u8d56\nuv add -r requirements.txt # Import from requirements files\nuv lock --upgrade-package requests # \u66f4\u65b0\u9879\u76ee\u4f9d\u8d56\nuv remove requests # \u5220\u9664\u9879\u76ee\u4f9d\u8d56\n\nuv sync\nuv tree --outdated\nuv tree --depth 2\nuv run main.py\n"})}),"\n",(0,r.jsxs)(n.admonition,{title:"Distribution and Import",type:"tip",children:[(0,r.jsxs)(n.p,{children:["Python \u4e2d\u5b58\u5728\u4e24\u4e2a\u4e0d\u540c\u7684",(0,r.jsx)(n.a,{href:"https://packaging.python.org/en/latest/discussions/distribution-package-vs-import-package",children:"\u5305\u540d"}),"\uff1a"]}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u6982\u5ff5"}),(0,r.jsx)(n.th,{children:"\u82f1\u6587\u672f\u8bed"}),(0,r.jsx)(n.th,{children:"\u793a\u4f8b"}),(0,r.jsx)(n.th,{children:"\u7528\u9014"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u5206\u53d1\u5305\u540d"}),(0,r.jsx)(n.td,{children:"Distribution Package"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"python-dotenv"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"uv add xxx"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u5bfc\u5165\u5305\u540d"}),(0,r.jsx)(n.td,{children:"Import Package"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"dotenv"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"from xxx import ..."})})]})]})]}),(0,r.jsxs)(n.p,{children:["\u5b89\u88c5\u5305\u540e, ",(0,r.jsx)(n.code,{children:"site-packages"})," \u76ee\u5f55\u4f1a\u5305\u542b\u4e24\u7c7b\u6587\u4ef6\u5939:"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"*.dist-info/"})," \u76ee\u5f55\u540d\u5bf9\u5e94 ",(0,r.jsx)(n.strong,{children:"PyPI \u5305\u540d"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u6e90\u7801\u76ee\u5f55\u540d\u5bf9\u5e94",(0,r.jsx)(n.strong,{children:"\u5bfc\u5165\u540d"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"top_level.txt"})," \u6587\u4ef6\u8bb0\u5f55\u4e86\u5bfc\u5165\u540d\u6620\u5c04"]}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770b\u5305\u5b89\u88c5\u4f4d\u7f6e\u548c\u7248\u672c\nuv pip show python-dotenv\n\n# \u67e5\u770b\u4f9d\u8d56\u6811\nuv tree\n"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://peps.python.org/pep-0427",children:"PEP 427"}),": Wheel \u683c\u5f0f\u89c4\u8303\uff08\u5b9a\u4e49 ",(0,r.jsx)(n.code,{children:".dist-info"}),"\uff09."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://peps.python.org/pep-0503",children:"PEP 503"}),": \u5305\u540d\u89c4\u8303\u5316."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".dist-info"})," ",(0,r.jsx)(n.a,{href:"https://packaging.python.org/en/latest/specifications/recording-installed-packages",children:"\u76ee\u5f55\u7ed3\u6784"}),"."]}),"\n"]})]}),"\n",(0,r.jsx)(n.h2,{id:"lockfile",children:"Lockfile"}),"\n",(0,r.jsx)(n.p,{children:"Create lockfile:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"uv lock\n"})}),"\n",(0,r.jsx)(n.h2,{id:"virtual-environment",children:"Virtual Environment"}),"\n",(0,r.jsx)(n.p,{children:"Manage virtual environments:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u521b\u5efa\u5e76\u6fc0\u6d3b\u865a\u62df\u73af\u5883\nuv venv\nsource .venv/bin/activate\n\n# \u9000\u51fa\u865a\u62df\u73af\u5883\ndeactivate\n\n# \u5f3a\u5236\u5b89\u88c5\u57fa\u7840\u5305\uff08\u5982 pip, setuptools, wheel\uff09\nuv venv --seed\n"})}),"\n",(0,r.jsx)(n.h2,{id:"scripts",children:"Scripts"}),"\n",(0,r.jsx)(n.p,{children:"Run standalone scripts:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"uv init --script example.py --python 3.13\nuv add --index \"https://mirrors.aliyun.com/pypi/simple\" --script example.py 'requests<3' 'rich'\nuv run example.py\n"})}),"\n",(0,r.jsx)(n.h2,{id:"execution",children:"Execution"}),"\n",(0,r.jsx)(n.p,{children:"Toolchain execution:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"uv tool install black\nuv tool run black ./myfile.py\n\nuvx pycowsay 'hello world!'\nuvx python@3.13.2 -c \"print('hello world')\"\n"})}),"\n",(0,r.jsx)(n.h2,{id:"project",children:"Project"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[project]\nname = "project"\nversion = "0.1.0"\nrequires-python = ">=3.12.0"\ndependencies = [ "torch>=2.6.0" ]\n\n[tool.uv.sources]\ntorch = [\n  { index = "pytorch-cpu", marker = "sys_platform != \'linux\'" },\n  { index = "pytorch-cu124", marker = "sys_platform == \'linux\'" },\n]\n\n[[tool.uv.index]]\nname = "pytorch-cpu"\nurl = "https://pypi.tuna.tsinghua.edu.cn/simple"\nexplicit = true\n\n[[tool.uv.index]]\nname = "pytorch-cu124"\nurl = "https://mirror.sjtu.edu.cn/pytorch-wheels/cu124"\nexplicit = true\n'})}),"\n",(0,r.jsx)(n.h2,{id:"workspace",children:"Workspace"}),"\n",(0,r.jsx)(n.h3,{id:"monorepo",children:"Monorepo"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[project]\nname = "albatross"\nversion = "0.1.0"\nrequires-python = ">=3.12"\ndependencies = [\n  "bird-feeder",\n  "tqdm>=4,<5",\n]\n\n[tool.uv.sources]\nbird-feeder = { workspace = true }\n\n[tool.uv.workspace]\nmembers = [ "packages/*" ]\nexclude = [ "packages/seeds" ]\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"albatross\n\u251c\u2500\u2500 packages\n\u2502   \u251c\u2500\u2500 bird-feeder\n\u2502   \u2502   \u251c\u2500\u2500 pyproject.toml\n\u2502   \u2502   \u2514\u2500\u2500 src\n\u2502   \u2502       \u2514\u2500\u2500 bird_feeder\n\u2502   \u2502           \u251c\u2500\u2500 __init__.py\n\u2502   \u2502           \u2514\u2500\u2500 foo.py\n\u2502   \u2514\u2500\u2500 seeds\n\u2502       \u251c\u2500\u2500 pyproject.toml\n\u2502       \u2514\u2500\u2500 src\n\u2502           \u2514\u2500\u2500 seeds\n\u2502               \u251c\u2500\u2500 __init__.py\n\u2502               \u2514\u2500\u2500 bar.py\n\u251c\u2500\u2500 pyproject.toml\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 uv.lock\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 albatross\n        \u2514\u2500\u2500 main.py\n"})}),"\n",(0,r.jsx)(n.h3,{id:"package",children:"Package"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Initialize package\nuv init --package packages/bash-agent\n\n# Add workspace package as dependency\nuv add --workspace bash-agent\n\n# Run package\nuv run bash-agent\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[project]\nname = "bash-agent"\nversion = "0.1.0"\ndescription = "Minimal Claude Code."\nreadme = "README.md"\nrequires-python = ">=3.13"\n\n[project.scripts]\nbash-agent = "bash_agent:main"\n\n[build-system]\nrequires = [ "uv_build>=0.9.27,<0.10.0" ]\nbuild-backend = "uv_build"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"command",children:"Command"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"uv add --package bash-agent anthropic python-dotenv\n"})}),"\n",(0,r.jsx)(n.h2,{id:"caching",children:"Caching"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"uv cache dir\nuv cache clean\nuv cache prune\n"})}),"\n",(0,r.jsx)(n.h2,{id:"dockerfile",children:"Dockerfile"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Dockerfile",children:'FROM python:3.12-slim-bookworm\nCOPY --from=ghcr.io/astral-sh/uv:latest /uv /uvx /bin/\nENV UV_SYSTEM_PYTHON=1\n\n# Copy the project into the image\nADD . /app\n\nWORKDIR /app\n\n# Install dependencies\nRUN uv sync --locked\n\n# Install requirements\nCOPY requirements.txt .\nRUN uv pip install -r requirements.txt\n\nCMD ["uv", "run", "my_app"]\n'})}),"\n",(0,r.jsx)(n.h2,{id:"linter",children:"Linter"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"uv add --dev pyright ruff\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[tool.pyright]\ntypeCheckingMode = "strict"\n\n[tool.ruff.lint]\nselect = [\n  "E", # pycodestyle\n  "F", # Pyflakes\n  "UP", # pyupgrade\n  "B", # flake8-bugbear\n  "SIM", # flake8-simplify\n  "I", # isort\n]\nignore = [ "E501" ] # \u5ffd\u7565\u884c\u957f\u5ea6\u9650\u5236\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"uvx ruff check\nuvx ruff format ./script.py\n"})}),"\n",(0,r.jsx)(n.h2,{id:"library",children:"Library"}),"\n",(0,r.jsx)(n.h3,{id:"asgi",children:"ASGI"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/fastapi/fastapi",children:"FastAPI"}),":\nHigh-performance web framework."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/Kludex/uvicorn",children:"Uvicorn"}),":\nASGI web server."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"display",children:"Display"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ipython/ipython",children:"IPython"}),":\nProductive interactive computing."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/Textualize/rich",children:"Rich"}),":\nRich text and beautiful formatting for terminal."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/tqdm/tqdm",children:"Progress"}),":\nFast, Extensible Progress Bar for CLI."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"ai",children:"AI"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/google/langextract",children:"Extract"}),":\nExtracting structured information from unstructured text using LLMs."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"debugging",children:"Debugging"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/cool-RR/PySnooper",children:"Snooper"}),":\nPoor man's debugger."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},86145:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var l=i(57140);const r={},s=l.createContext(r);function t(e){const n=l.useContext(s);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),l.createElement(s.Provider,{value:n},e.children)}}}]);