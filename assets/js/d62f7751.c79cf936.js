"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[21685],{89026:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>i,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"web/react/features","title":"Features","description":"Error Boundary","source":"@site/content/web/react/features.md","sourceDirName":"web/react","slug":"/web/react/features","permalink":"/notes/web/react/features","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/react/features.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"React","permalink":"/notes/tags/react"},{"inline":true,"label":"Error","permalink":"/notes/tags/error"},{"inline":true,"label":"Fragment","permalink":"/notes/tags/fragment"},{"inline":true,"label":"Portal","permalink":"/notes/tags/portal"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":6,"frontMatter":{"sidebar_position":6,"tags":["Web","React","Error","Fragment","Portal"]},"sidebar":"tutorialSidebar","previous":{"title":"Patterns","permalink":"/notes/web/react/patterns"},"next":{"title":"Context","permalink":"/notes/web/react/context"}}');var o=t(35656),a=t(86145);const s={sidebar_position:6,tags:["Web","React","Error","Fragment","Portal"]},l="Features",i={},c=[{value:"Error Boundary",id:"error-boundary",level:2},{value:"Fragment",id:"fragment",level:2},{value:"Portal",id:"portal",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"features",children:"Features"})}),"\n",(0,o.jsx)(e.h2,{id:"error-boundary",children:"Error Boundary"}),"\n",(0,o.jsx)(e.p,{children:"\u4ee5\u4e0b\u662f\u9519\u8bef\u8fb9\u754c\u4e0d\u8d77\u4f5c\u7528\u7684\u60c5\u51b5:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u4e8b\u4ef6\u5904\u7406\u5668\u5185\u4ee3\u7801."}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"setTimeout"})," \u6216 ",(0,o.jsx)(e.code,{children:"requestAnimationFrame"})," \u56de\u8c03\u4e2d\u7684\u5f02\u6b65\u4ee3\u7801."]}),"\n",(0,o.jsx)(e.li,{children:"\u670d\u52a1\u7aef\u6e32\u67d3\u4ee3\u7801."}),"\n",(0,o.jsx)(e.li,{children:"\u9519\u8bef\u8fb9\u754c\u4ee3\u7801\u672c\u8eab."}),"\n"]}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.a,{href:"https://github.com/bvaughn/react-error-boundary",children:"React Error Boundary"})," library:"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-tsx",children:"class ErrorBoundary extends React.Component<{ children: ReactElement }> {\n  state = {\n    hasError: false,\n    error: null,\n    info: null,\n  }\n\n  // key point\n  componentDidCatch(error, info) {\n    this.setState({\n      hasError: true,\n      error,\n      info,\n    })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div>\n          <h1>Oops, something went wrong :(</h1>\n          <p>\n            The error:\n            {this.state.error.toString()}\n          </p>\n          <p>\n            Where it occurred:\n            {this.state.info.componentStack}\n          </p>\n        </div>\n      )\n    }\n\n    return this.props.children\n  }\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"fragment",children:"Fragment"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Less node, less memory, faster performance."}),"\n",(0,o.jsx)(e.li,{children:"Avoid extra parent-child relationship for CSS flex and grid layout."}),"\n",(0,o.jsx)(e.li,{children:"DOM debug inspector is less cluttered."}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-tsx",children:"class Items extends React.Component {\n  render() {\n    return (\n      <>\n        <Fruit />\n        <Beverages />\n        <Drinks />\n      </>\n    )\n  }\n}\n\nclass Fruit extends React.Component {\n  render() {\n    return (\n      <>\n        <li>Apple</li>\n        <li>Orange</li>\n        <li>Blueberry</li>\n        <li>Cherry</li>\n      </>\n    )\n  }\n}\n\nclass Frameworks extends React.Component {\n  render() {\n    return (\n      <>\n        <p>JavaScript:</p>\n        <li>React</li>\n        ,\n        <li>Vuejs</li>\n        ,\n        <li>Angular</li>\n      </>\n    )\n  }\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"portal",children:"Portal"}),"\n",(0,o.jsxs)(e.p,{children:["Portal provide a first-class way to render children into a DOM node\nthat exists ",(0,o.jsx)(e.strong,{children:"outside"})," the DOM hierarchy of the parent component\n",(0,o.jsx)(e.code,{children:"ReactDOM.createPortal(child, container)"}),"."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-html",children:'<div id="root"></div>\n<div id="portal"></div>\n'})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-tsx",children:'const portalRoot = document.getElementById(\'portal\')\n\nclass Portal extends React.Component<{ children: ReactElement }> {\n  constructor() {\n    super()\n    this.el = document.createElement(\'div\')\n  }\n\n  componentDidMount = () => {\n    portalRoot.appendChild(this.el)\n  }\n\n  componentWillUnmount = () => {\n    portalRoot.removeChild(this.el)\n  }\n\n  render() {\n    const { children } = this.props\n    return ReactDOM.createPortal(children, this.el)\n  }\n}\n\ninterface Props {\n  on: boolean\n  toggle: Function\n  children: ReactElement\n}\n\nclass Modal extends React.Component<Props> {\n  render() {\n    const { children, toggle, on } = this.props\n\n    return (\n      <Portal>\n        {on\n          ? (\n              <div className="modal is-active">\n                <div className="modal-background" />\n                <div className="modal-content">\n                  <div className="box">\n                    <h2 className="subtitle">{children}</h2>\n                    <button\n                      type="button"\n                      onClick={toggle}\n                      className="closeButton button is-info"\n                    >\n                      Close\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )\n          : null}\n      </Portal>\n    )\n  }\n}\n\nclass App extends React.Component {\n  state = {\n    showModal: false,\n  }\n\n  toggleModal = () => {\n    this.setState({\n      showModal: !this.state.showModal,\n    })\n  }\n\n  render() {\n    const { showModal } = this.state\n    return (\n      <div className="box">\n        <h1 className="subtitle">Hello, I am the parent!</h1>\n        <button\n          type="button"\n          onClick={this.toggleModal}\n          className="button is-black"\n        >\n          Toggle Modal\n        </button>\n        <Modal on={showModal} toggle={this.toggleModal}>\n          {showModal ? <h1>Hello, I am the portal!</h1> : null}\n        </Modal>\n      </div>\n    )\n  }\n}\n\nReactDOM.createRoot(document.getElementById(\'root\')).render(<App />)\n'})})]})}function h(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},86145:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>l});var r=t(57140);const o={},a=r.createContext(o);function s(n){const e=r.useContext(a);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),r.createElement(a.Provider,{value:e},n.children)}}}]);