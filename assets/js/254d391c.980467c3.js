"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[22952],{54205:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"web/typescript/conditional","title":"Conditional","description":"- Basic conditional types","source":"@site/content/web/typescript/conditional.md","sourceDirName":"web/typescript","slug":"/web/typescript/conditional","permalink":"/notes/web/typescript/conditional","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/typescript/conditional.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"TypeScript","permalink":"/notes/tags/type-script"},{"inline":true,"label":"Conditional","permalink":"/notes/tags/conditional"},{"inline":true,"label":"Gymnastics","permalink":"/notes/tags/gymnastics"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":12,"frontMatter":{"sidebar_position":12,"tags":["Web","TypeScript","Conditional","Gymnastics"]},"sidebar":"tutorialSidebar","previous":{"title":"Generics","permalink":"/notes/web/typescript/generic"},"next":{"title":"Mapped","permalink":"/notes/web/typescript/mapped"}}');var s=t(35656),r=t(86145);const o={sidebar_position:12,tags:["Web","TypeScript","Conditional","Gymnastics"]},d="Conditional",a={},l=[{value:"Nested",id:"nested",level:2},{value:"Index",id:"index",level:2},{value:"Mapped",id:"mapped",level:2},{value:"Distributive",id:"distributive",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"conditional",children:"Conditional"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Basic conditional types\njust like ",(0,s.jsx)(n.code,{children:"if else"})," statement."]}),"\n",(0,s.jsxs)(n.li,{children:["Nested conditional types\njust like ",(0,s.jsx)(n.code,{children:"switch case"})," statement."]}),"\n",(0,s.jsxs)(n.li,{children:["Distributive conditional types\njust like ",(0,s.jsx)(n.code,{children:"map"})," statement (",(0,s.jsx)(n.code,{children:"loop"})," statement) on ",(0,s.jsx)(n.code,{children:"union"})," type."]}),"\n",(0,s.jsxs)(n.li,{children:["Conditional types make ",(0,s.jsx)(n.code,{children:"TypeScript"})," become real programming type system:\n",(0,s.jsx)(n.code,{children:"TypeScript"})," type system is ",(0,s.jsx)(n.a,{href:"https://github.com/microsoft/TypeScript/issues/14833",children:"Turing Complete"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface Animal {\n  live: () => void\n}\ninterface Dog extends Animal {\n  woof: () => void\n}\n\ntype Example1 = Dog extends Animal ? number : string\n// => type Example1 = number\n\ntype Example2 = RegExp extends Animal ? number : string\n// => type Example2 = string\n"})}),"\n",(0,s.jsx)(n.h2,{id:"nested",children:"Nested"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Conditional types can be nested."}),"\n",(0,s.jsx)(n.li,{children:"\u901a\u8fc7\u5d4c\u5957\u6761\u4ef6\u7c7b\u578b, \u53ef\u4ee5\u5c06\u7c7b\u578b\u7ea6\u675f\u6536\u62e2\u5230\u7cbe\u786e\u8303\u56f4."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type TypeName<T> = T extends string\n  ? 'string'\n  : T extends number\n    ? 'number'\n    : T extends boolean\n      ? 'boolean'\n      : T extends undefined\n        ? 'undefined'\n        : T extends Function\n          ? 'function'\n          : 'object'\n"})}),"\n",(0,s.jsx)(n.h2,{id:"index",children:"Index"}),"\n",(0,s.jsx)(n.p,{children:"Conditional types are able to access members of provided types:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface QueryOptions {\n  throwIfNotFound: boolean\n}\n\ntype QueryResult<Options extends QueryOptions>\n  = Options['throwIfNotFound'] extends true ? string : string | undefined\n\ndeclare function retrieve<Options extends QueryOptions>(\n  key: string,\n  options?: Options\n): Promise<QueryResult<Options>>\n\n// Returned type: string | undefined\nawait retrieve('1')\n\n// Returned type: string | undefined\nawait retrieve('2', { throwIfNotFound: Math.random() > 0.5 })\n\n// Returned type: string\nawait retrieve('3', { throwIfNotFound: true })\n"})}),"\n",(0,s.jsx)(n.h2,{id:"mapped",children:"Mapped"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type MakeAllMembersFunctions<T> = {\n  [K in keyof T]: T[K] extends (...args: any[]) => any ? T[K] : () => T[K]\n}\n\ntype MemberFunctions = MakeAllMembersFunctions<{\n  alreadyFunction: () => string\n  notYetFunction: number\n}>\n// Type:\n// {\n//   alreadyFunction: () => string,\n//   notYetFunction: () => number,\n// }\n"})}),"\n",(0,s.jsx)(n.h2,{id:"distributive",children:"Distributive"}),"\n",(0,s.jsx)(n.p,{children:"Type distributivity:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Conditional types in which checked type is ",(0,s.jsx)(n.code,{children:"naked type parameter"})," are called DCT."]}),"\n",(0,s.jsx)(n.li,{children:"DCT are automatically distributed over union types during instantiation."}),"\n",(0,s.jsx)(n.li,{children:"When conditional types act on a generic type,\nthey become distributive when given a union type."}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"( A | B | C ) extends T ? X : Y"})," \u76f8\u5f53\u4e8e\n",(0,s.jsx)(n.code,{children:"(A extends T ? X : Y) | (B extends T ? X : Y) | (B extends T ? X : Y)"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"\u6ca1\u6709\u88ab\u989d\u5916\u5305\u88c5\u7684\u8054\u5408\u7c7b\u578b\u53c2\u6570, \u5728\u6761\u4ef6\u7c7b\u578b\u8fdb\u884c\u5224\u5b9a\u65f6\u4f1a\u5c06\u8054\u5408\u7c7b\u578b\u5206\u53d1, \u5206\u522b\u8fdb\u884c\u5224\u65ad."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'// "string" | "function"\ntype T1 = TypeName<string | (() => void)>\n\n// "string" | "object"\ntype T2 = TypeName<string | string[]>\n\n// "object"\ntype T3 = TypeName<string[] | number[]>\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type Naked<T> = T extends boolean ? 'Y' : 'N'\ntype Wrapped<T> = [T] extends [boolean] ? 'Y' : 'N'\n\n/*\n * \u5148\u5206\u53d1\u5230 Naked<number> | Naked<boolean>\n * \u7ed3\u679c\u662f \"N\" | \"Y\"\n */\ntype Distributed = Naked<number | boolean>\n\n/*\n * \u4e0d\u4f1a\u5206\u53d1 \u76f4\u63a5\u662f [number | boolean] extends [boolean]\n * \u7ed3\u679c\u662f \"N\"\n */\ntype NotDistributed = Wrapped<number | boolean>\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},86145:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>d});var i=t(57140);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);