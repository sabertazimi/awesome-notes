"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[32903],{22211:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"web/node/yarn","title":"Yarn","description":"Berry","source":"@site/content/web/node/yarn.md","sourceDirName":"web/node","slug":"/web/node/yarn","permalink":"/notes/web/node/yarn","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/node/yarn.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"Node.js","permalink":"/notes/tags/node-js"},{"inline":true,"label":"Package Manager","permalink":"/notes/tags/package-manager"},{"inline":true,"label":"Yarn","permalink":"/notes/tags/yarn"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3,"tags":["Web","Node.js","Package Manager","Yarn"]},"sidebar":"tutorialSidebar","previous":{"title":"NPM","permalink":"/notes/web/node/npm"},"next":{"title":"PNPM","permalink":"/notes/web/node/pnpm"}}');var a=r(35656),t=r(86145);const i={sidebar_position:3,tags:["Web","Node.js","Package Manager","Yarn"]},l="Yarn",c={},o=[{value:"Berry",id:"berry",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Updates",id:"updates",level:2},{value:"Workspace",id:"workspace",level:2},{value:"Plugin",id:"plugin",level:2},{value:"Patch",id:"patch",level:2},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"yarn",children:"Yarn"})}),"\n",(0,a.jsx)(n.h2,{id:"berry",children:"Berry"}),"\n",(0,a.jsxs)(n.p,{children:["Yarn ",(0,a.jsx)(n.a,{href:"https://yarnpkg.com/getting-started/migration",children:"berry"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Modify `/etc/hosts`\nnpm i -g yarn\ncd project/\nyarn set version berry\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Setup basic configuration ",(0,a.jsx)(n.code,{children:".yarnrc.yml"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yml",children:"yarnPath: .yarn/releases/yarn-berry.cjs\nnodeLinker: node-modules\nnpmPublishAccess: public\nnpmPublishRegistry: 'https://registry.npmjs.org'\nnpmRegistryServer: 'https://registry.npmjs.org'\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Update ",(0,a.jsx)(n.code,{children:".gitignore"})," file:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:".yarn/*\n!.yarn/patches\n!.yarn/releases\n!.yarn/plugins\n!.yarn/sdks\n!.yarn/versions\n.pnp/\n.pnp.js\n"})}),"\n",(0,a.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'yarn config set nodeLinker node-modules --home\nyarn config set npmPublishAccess public --home\nyarn config set npmRegistryServer "https://registry.npmjs.org" --home\nyarn config set yarnPath .yarn/releases/yarn-berry.cjs --home\nyarn config set unsafeHttpWhitelist --json \'["localhost", "*.example.com", "example.com"]\'\n'})}),"\n",(0,a.jsx)(n.h2,{id:"updates",children:"Updates"}),"\n",(0,a.jsx)(n.p,{children:"One line to update all deps in monorepo:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"yarn up @types/node\nyarn up @types/react\nyarn dedupe --strategy highest\n"})}),"\n",(0,a.jsx)(n.h2,{id:"workspace",children:"Workspace"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"yarn workspace packageName build\n"})}),"\n",(0,a.jsx)(n.h2,{id:"plugin",children:"Plugin"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"yarn plugin list\n"})}),"\n",(0,a.jsx)(n.h2,{id:"patch",children:"Patch"}),"\n",(0,a.jsxs)(n.p,{children:["Modify package in ",(0,a.jsx)(n.code,{children:"node_modules"})," conveniently:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Run ",(0,a.jsx)(n.code,{children:"yarn patch <package>"})," will create copy of ",(0,a.jsx)(n.code,{children:"package"})," to ",(0,a.jsx)(n.code,{children:"tmp/xfs-xxxxxxxx/user/"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["After modify source code of ",(0,a.jsx)(n.code,{children:"package"}),",\nrun ",(0,a.jsx)(n.code,{children:"yarn patch-commit /tmp/xfs-xxxxxxxx/user --save"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/gatsbyjs/gatsby",children:"Gatsby"}),":\nyarn 1 with ",(0,a.jsx)(n.code,{children:".yarn/"})," directory."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/reduxjs/redux-toolkit",children:"Redux ToolKit"}),":\nyarn 2."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/babel/babel",children:"Babel"}),":\nyarn 3."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/storybookjs/storybook",children:"StoryBook"}),":\nyarn 3."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},86145:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>l});var s=r(57140);const a={},t=s.createContext(a);function i(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);