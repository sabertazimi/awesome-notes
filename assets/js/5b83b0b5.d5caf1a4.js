"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[81452],{3117:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"web/typescript/combination","title":"Combination","description":"Union","source":"@site/content/web/typescript/combination.md","sourceDirName":"web/typescript","slug":"/web/typescript/combination","permalink":"/notes/web/typescript/combination","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/typescript/combination.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"TypeScript","permalink":"/notes/tags/type-script"},{"inline":true,"label":"Combination","permalink":"/notes/tags/combination"},{"inline":true,"label":"Union","permalink":"/notes/tags/union"},{"inline":true,"label":"Intersection","permalink":"/notes/tags/intersection"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":10,"frontMatter":{"sidebar_position":10,"tags":["Web","TypeScript","Combination","Union","Intersection"]},"sidebar":"tutorialSidebar","previous":{"title":"Literal","permalink":"/notes/web/typescript/literal"},"next":{"title":"Generics","permalink":"/notes/web/typescript/generic"}}');var r=t(35656),s=t(86145);const a={sidebar_position:10,tags:["Web","TypeScript","Combination","Union","Intersection"]},o="Combination",c={},l=[{value:"Union",id:"union",level:2},{value:"Discriminated Union",id:"discriminated-union",level:2},{value:"Intersection",id:"intersection",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"combination",children:"Combination"})}),"\n",(0,r.jsx)(e.h2,{id:"union",children:"Union"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"function formatCommandLine(command: string[] | string) {\n  let line = ''\n\n  if (typeof command === 'string')\n    line = command.trim()\n  else\n    line = command.join(' ').trim()\n\n  // Do stuff with line: string\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"discriminated-union",children:"Discriminated Union"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"interface Square {\n  kind: 'square'\n  size: number\n}\n\ninterface Rectangle {\n  kind: 'rectangle'\n  width: number\n  height: number\n}\n\ninterface Circle {\n  kind: 'circle'\n  radius: number\n}\n\ntype Shape = Square | Rectangle | Circle\n\nfunction area(s: Shape) {\n  switch (s.kind) {\n    case 'square':\n      return s.size * s.size\n    case 'rectangle':\n      return s.width * s.height\n    case 'circle':\n      return Math.PI * s.radius ** 2\n    default: {\n      const _exhaustiveCheck: never = s\n      return _exhaustiveCheck\n    }\n  }\n}\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"IteratorResult"})," discriminated union:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"interface IteratorYieldResult<TYield> {\n  done?: false // boolean literal type\n  value: TYield\n}\n\ninterface IteratorReturnResult<TReturn> {\n  done: true // boolean literal type\n  value: TReturn\n}\n\ntype IteratorResult<T, TReturn = any>\n  = | IteratorYieldResult<T>\n    | IteratorReturnResult<TReturn>\n"})}),"\n",(0,r.jsx)(e.p,{children:"Rust-style discriminated union:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"type Option<T> = Some<T> | None\ninterface Some<T> {\n  kind: 'Some'\n  value: T\n}\ninterface None {\n  kind: 'None'\n}\n\ntype Result<TResult, TError> = Success<TResult> | Failure<TError>\ninterface Success<T> {\n  kind: 'Success'\n  value: T\n}\ninterface Failure<T> {\n  kind: 'Failure'\n  error: T\n}\n"})}),"\n",(0,r.jsxs)(e.p,{children:["Prefer ",(0,r.jsx)(e.code,{children:"Unions of Interfaces"})," to ",(0,r.jsx)(e.code,{children:"Interfaces of Unions"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// BAD design.\ninterface BadLayer {\n  layout: FillLayout | LineLayout | PointLayout\n  paint: FillPaint | LinePaint | PointPaint\n}\n\n// GOOD design.\ninterface FillLayer {\n  type: 'fill'\n  layout: FillLayout\n  paint: FillPaint\n}\n\ninterface LineLayer {\n  type: 'line'\n  layout: LineLayout\n  paint: LinePaint\n}\n\ninterface PointLayer {\n  type: 'point'\n  layout: PointLayout\n  paint: PointPaint\n}\n\ntype GoodLayer = FillLayer | LineLayer | PointLayer\n"})}),"\n",(0,r.jsx)(e.h2,{id:"intersection",children:"Intersection"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"intersection"})," type \u5177\u6709\u6240\u6709\u7c7b\u578b\u7684\u529f\u80fd:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"function extend<T, U>(first: T, second: U): T & U {\n  const result = {} as T & U\n  for (const id in first) {\n    ;(result as T)[id] = first[id]\n  }\n  for (const id in second) {\n    if (!Object.prototype.hasOwnProperty.call(result, id)) {\n      ;(result as U)[id] = second[id]\n    }\n  }\n\n  return result\n}\n\nconst x = extend({ a: 'hello' }, { b: 42 })\n\n// \u73b0\u5728 x \u62e5\u6709\u4e86 a \u5c5e\u6027\u4e0e b \u5c5e\u6027\nconst a = x.a\nconst b = x.b\n"})})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},86145:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>o});var i=t(57140);const r={},s=i.createContext(r);function a(n){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);