"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[85367],{96114:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"web/javascript/bom","title":"BOM","description":"Window","source":"@site/content/web/javascript/bom.md","sourceDirName":"web/javascript","slug":"/web/javascript/bom","permalink":"/notes/web/javascript/bom","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/javascript/bom.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"JavaScript","permalink":"/notes/tags/java-script"},{"inline":true,"label":"ECMAScript","permalink":"/notes/tags/ecma-script"},{"inline":true,"label":"DOM","permalink":"/notes/tags/dom"},{"inline":true,"label":"BOM","permalink":"/notes/tags/bom"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":31,"frontMatter":{"sidebar_position":31,"tags":["Web","JavaScript","ECMAScript","DOM","BOM"]},"sidebar":"tutorialSidebar","previous":{"title":"Engine","permalink":"/notes/web/javascript/engine"},"next":{"title":"DOM","permalink":"/notes/web/javascript/dom"}}');var r=t(35656),s=t(86145);const o={sidebar_position:31,tags:["Web","JavaScript","ECMAScript","DOM","BOM"]},l="BOM",c={},a=[{value:"Window",id:"window",level:2},{value:"Location",id:"location",level:2},{value:"Navigator",id:"navigator",level:2},{value:"Online",id:"online",level:3},{value:"Connection",id:"connection",level:3},{value:"Protocol",id:"protocol",level:3},{value:"Battery",id:"battery",level:3},{value:"Storage",id:"storage",level:3},{value:"Geolocation",id:"geolocation",level:3},{value:"User Agent",id:"user-agent",level:3},{value:"Screen",id:"screen",level:2},{value:"History",id:"history",level:2},{value:"Navigation",id:"navigation",level:3},{value:"State",id:"state",level:3}];function d(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"bom",children:"BOM"})}),"\n",(0,r.jsx)(e.h2,{id:"window",children:"Window"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const selfWindow = window.self\nconst topWindow = window.top\nconst parentWindow = window.parent\nconst grandParentWindow = window.parent.parent\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"if (confirm('Are you sure?'))\n  alert('I\\'m so glad you\\'re sure!')\nelse\n  alert('I\\'m sorry to hear you\\'re not sure.')\n\nconst result = prompt('What is your name? ', 'James')\nif (result !== null)\n  alert(`Welcome, ${result}`)\n\n// \u663e\u793a\u6253\u5370\u5bf9\u8bdd\u6846\nwindow.print()\n\n// \u663e\u793a\u67e5\u627e\u5bf9\u8bdd\u6846\nwindow.find()\n\n// \u663e\u5f0f\u6253\u5370\u673a\nwindow.print()\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u5f39\u7a97\u6709\u975e\u5e38\u591a\u7684\u5b89\u5168\u9650\u5236:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7981\u6b62\u9690\u85cf\u72b6\u6001\u680f\u4e0e\u5730\u5740\u680f."}),"\n",(0,r.jsx)(e.li,{children:"\u5f39\u7a97\u9ed8\u8ba4\u4e0d\u80fd\u79fb\u52a8\u6216\u7f29\u653e."}),"\n",(0,r.jsx)(e.li,{children:"\u53ea\u5141\u8bb8\u7528\u6237\u64cd\u4f5c\u4e0b (\u9f20\u6807/\u952e\u76d8) \u521b\u5efa\u5f39\u7a97."}),"\n",(0,r.jsx)(e.li,{children:"\u5c4f\u853d\u5f39\u7a97."}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const newWin = window.open(\n  'https://www.new.com/',\n  'newWindow',\n  'height=400,width=400,top=10,left=10,resizable=yes'\n)\nnewWin.resizeTo(500, 500)\nnewWin.moveTo(100, 100)\nalert(newWin.opener === window) // true\nnewWin.close()\nalert(newWin.closed) // true\n\nlet blocked = false\ntry {\n  const newWin = window.open('https://www.new.com/', '_blank')\n  if (newWin === null)\n    blocked = true\n} catch (ex) {\n  blocked = true\n}\nif (blocked)\n  alert('The popup was blocked!')\n"})}),"\n",(0,r.jsx)(e.h2,{id:"location",children:"Location"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{style:{textAlign:"left"},children:"\u5c5e\u6027"}),(0,r.jsx)(e.th,{style:{textAlign:"left"},children:"\u63cf\u8ff0"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"hash"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u4ece\u4e95\u53f7 (#) \u5f00\u59cb\u7684 URL (\u951a)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"host"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u4e3b\u673a\u540d\u548c\u5f53\u524d URL \u7684\u7aef\u53e3\u53f7"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"hostname"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u5f53\u524d URL \u7684\u4e3b\u673a\u540d"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"href"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u5b8c\u6574\u7684 URL"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"pathname"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u5f53\u524d URL \u7684\u8def\u5f84\u90e8\u5206"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"port"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u5f53\u524d URL \u7684\u7aef\u53e3\u53f7"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"protocol"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u5f53\u524d URL \u7684\u534f\u8bae"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"search"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u4ece\u95ee\u53f7 (?) \u5f00\u59cb\u7684 URL (\u67e5\u8be2\u90e8\u5206)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"username"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u57df\u540d\u524d\u6307\u5b9a\u7684\u7528\u6237\u540d"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"password"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u57df\u540d\u524d\u6307\u5b9a\u7684\u5bc6\u7801"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"origin"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8fd4\u56de URL \u7684\u6e90\u5730\u5740"})]})]})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"function getQueryStringArgs(location) {\n  // \u53d6\u5f97\u6ca1\u6709\u5f00\u5934\u95ee\u53f7\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\n  const qs = location.search.length > 0 ? location.search.substring(1) : ''\n  // \u4fdd\u5b58\u6570\u636e\u7684\u5bf9\u8c61\n  const args = {}\n\n  // \u628a\u6bcf\u4e2a\u53c2\u6570\u6dfb\u52a0\u5230 args \u5bf9\u8c61\n  for (const item of qs.split('&').map(kv => kv.split('='))) {\n    const name = decodeURIComponent(item[0])\n    const value = decodeURIComponent(item[1])\n\n    if (name.length)\n      args[name] = value\n  }\n\n  return args\n}\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"window.location.assign('https://www.new.com')\nwindow.location = 'https://www.new.com'\nwindow.location.href = 'https://www.new.com'\nwindow.location.replace('https://www.new.com') // No new history\nwindow.location.reload() // \u91cd\u65b0\u52a0\u8f7d, \u53ef\u80fd\u662f\u4ece\u7f13\u5b58\u52a0\u8f7d\nwindow.location.reload(true) // \u91cd\u65b0\u52a0\u8f7d, \u4ece\u670d\u52a1\u5668\u52a0\u8f7d\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"window.addEventListener(\n  'hashchange',\n  (event) => {\n    // event.oldURL\n    // event.nweURL\n    if (window.location.hash === '#someCoolFeature')\n      someCoolFeature()\n  },\n  false\n)\n"})}),"\n",(0,r.jsx)(e.h2,{id:"navigator",children:"Navigator"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"navigator"})," \u5bf9\u8c61\u5305\u542b\u4ee5\u4e0b\u63a5\u53e3\u5b9a\u4e49\u7684\u5c5e\u6027\u548c\u65b9\u6cd5:"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"NavigatorID."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorLanguage."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorOnLine."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorContentUtils."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorStorage."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorStorageUtils."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorConcurrentHardware."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorPlugins."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorUserMedia."}),"\n"]}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Property/Method"}),(0,r.jsx)(e.th,{})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"battery"}),(0,r.jsx)(e.td,{children:"BatteryManager (Battery Status API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"clipboard"}),(0,r.jsx)(e.td,{children:"Clipboard API"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"connection"}),(0,r.jsx)(e.td,{children:"NetworkInformation (Network Information API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"cookieEnabled"}),(0,r.jsx)(e.td,{children:"Boolean, \u662f\u5426\u542f\u7528\u4e86 cookie"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"credentials"}),(0,r.jsx)(e.td,{children:"CredentialsContainer (Credentials Management API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"deviceMemory"}),(0,r.jsx)(e.td,{children:"\u5355\u4f4d\u4e3a GB \u7684\u8bbe\u5907\u5185\u5b58\u5bb9\u91cf"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"doNotTrack"}),(0,r.jsxs)(e.td,{children:["\u7528\u6237\u7684",(0,r.jsx)(e.code,{children:"\u4e0d\u8ddf\u8e2a"})," (",(0,r.jsx)(e.code,{children:"do-not-track"}),") \u8bbe\u7f6e"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"geolocation"}),(0,r.jsx)(e.td,{children:"Geolocation (Geolocation API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"hardwareConcurrency"}),(0,r.jsx)(e.td,{children:"\u8bbe\u5907\u7684\u5904\u7406\u5668\u6838\u5fc3\u6570\u91cf"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"language"}),(0,r.jsx)(e.td,{children:"\u6d4f\u89c8\u5668\u7684\u4e3b\u8bed\u8a00"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"languages"}),(0,r.jsx)(e.td,{children:"\u6d4f\u89c8\u5668\u504f\u597d\u7684\u8bed\u8a00\u6570\u7ec4"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"locks"}),(0,r.jsx)(e.td,{children:"LockManager (Web Locks API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"mediaCapabilities"}),(0,r.jsx)(e.td,{children:"MediaCapabilities (Media Capabilities API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"mediaDevices"}),(0,r.jsx)(e.td,{children:"\u53ef\u7528\u7684\u5a92\u4f53\u8bbe\u5907"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"maxTouchPoints"}),(0,r.jsx)(e.td,{children:"\u8bbe\u5907\u89e6\u6478\u5c4f\u652f\u6301\u7684\u6700\u5927\u89e6\u70b9\u6570"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"onLine"}),(0,r.jsx)(e.td,{children:"Boolean, \u8868\u793a\u6d4f\u89c8\u5668\u662f\u5426\u8054\u7f51"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"pdfViewerEnabled"}),(0,r.jsx)(e.td,{children:"Boolean, \u662f\u5426\u542f\u7528\u4e86 PDF \u529f\u80fd"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"permissions"}),(0,r.jsx)(e.td,{children:"Permissions (Permissions API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"serviceWorker"}),(0,r.jsx)(e.td,{children:"ServiceWorkerContainer"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"storage"}),(0,r.jsx)(e.td,{children:"StorageManager (Storage API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"userAgent"}),(0,r.jsxs)(e.td,{children:["\u6d4f\u89c8\u5668\u7684\u7528\u6237\u4ee3\u7406\u5b57\u7b26\u4e32 (",(0,r.jsx)(e.strong,{children:"\u9ed8\u8ba4\u53ea\u8bfb"}),")"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"vendor"}),(0,r.jsx)(e.td,{children:"\u6d4f\u89c8\u5668\u7684\u5382\u5546\u540d\u79f0"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"webdriver"}),(0,r.jsx)(e.td,{children:"\u6d4f\u89c8\u5668\u5f53\u524d\u662f\u5426\u88ab\u81ea\u52a8\u5316\u7a0b\u5e8f\u63a7\u5236"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"xr"}),(0,r.jsx)(e.td,{children:"XRSystem (WebXR Device API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"registerProtocolHandler()"}),(0,r.jsx)(e.td,{children:"\u5c06\u4e00\u4e2a\u7f51\u7ad9\u6ce8\u518c\u4e3a\u7279\u5b9a\u534f\u8bae\u7684\u5904\u7406\u7a0b\u5e8f"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"sendBeacon()"}),(0,r.jsx)(e.td,{children:"\u5f02\u6b65\u4f20\u8f93\u4e00\u4e9b\u5c0f\u6570\u636e"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"share()"}),(0,r.jsx)(e.td,{children:"\u5f53\u524d\u5e73\u53f0\u7684\u539f\u751f\u5171\u4eab\u673a\u5236"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"vibrate()"}),(0,r.jsx)(e.td,{children:"\u89e6\u53d1\u8bbe\u5907\u632f\u52a8"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"online",children:"Online"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const connectionStateChange = () => console.log(navigator.onLine)\nwindow.addEventListener('online', connectionStateChange)\nwindow.addEventListener('offline', connectionStateChange)\n// \u8bbe\u5907\u8054\u7f51\u65f6:\n// true\n// \u8bbe\u5907\u65ad\u7f51\u65f6:\n// false\n"})}),"\n",(0,r.jsx)(e.h3,{id:"connection",children:"Connection"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const downlink = navigator.connection.downlink\nconst downlinkMax = navigator.connection.downlinkMax\nconst rtt = navigator.connection.rtt\nconst type = navigator.connection.type // wifi/bluetooth/cellular/ethernet/mixed/unknown/none.\nconst networkType = navigator.connection.effectiveType // 2G - 5G.\nconst saveData = navigator.connection.saveData // Boolean: Reduced data mode.\n\nnavigator.connection.addEventListener('change', changeHandler)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"protocol",children:"Protocol"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"navigator.registerProtocolHandler(\n  'mailto',\n  'http://www.somemailclient.com?cmd=%s',\n  'Some Mail Client'\n)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"battery",children:"Battery"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"navigator.getBattery().then((battery) => {\n  // \u6dfb\u52a0\u5145\u7535\u72b6\u6001\u53d8\u5316\u65f6\u7684\u5904\u7406\u7a0b\u5e8f\n  const chargingChangeHandler = () => console.log(battery.charging)\n  battery.addEventListener('chargingchange', chargingChangeHandler)\n  // \u6dfb\u52a0\u5145\u7535\u65f6\u95f4\u53d8\u5316\u65f6\u7684\u5904\u7406\u7a0b\u5e8f\n  const chargingTimeChangeHandler = () => console.log(battery.chargingTime)\n  battery.addEventListener('chargingtimechange', chargingTimeChangeHandler)\n  // \u6dfb\u52a0\u653e\u7535\u65f6\u95f4\u53d8\u5316\u65f6\u7684\u5904\u7406\u7a0b\u5e8f\n  const dischargingTimeChangeHandler = () =>\n    console.log(battery.dischargingTime)\n  battery.addEventListener(\n    'dischargingtimechange',\n    dischargingTimeChangeHandler\n  )\n  // \u6dfb\u52a0\u7535\u91cf\u767e\u5206\u6bd4\u53d8\u5316\u65f6\u7684\u5904\u7406\u7a0b\u5e8f\n  const levelChangeHandler = () => console.log(battery.level * 100)\n  battery.addEventListener('levelchange', levelChangeHandler)\n})\n"})}),"\n",(0,r.jsx)(e.h3,{id:"storage",children:"Storage"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"navigator.storage.estimate().then((estimate) => {\n  console.log(((estimate.usage / estimate.quota) * 100).toFixed(2))\n})\n"})}),"\n",(0,r.jsx)(e.h3,{id:"geolocation",children:"Geolocation"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"if (window.navigator.geolocation) {\n  // getCurrentPosition\u7b2c\u4e09\u4e2a\u53c2\u6570\u4e3a\u53ef\u9009\u53c2\u6570\n  navigator.geolocation.getCurrentPosition(locationSuccess, locationError, {\n    // \u6307\u793a\u6d4f\u89c8\u5668\u83b7\u53d6\u9ad8\u7cbe\u5ea6\u7684\u4f4d\u7f6e, \u9ed8\u8ba4\u4e3afalse\n    enableHighAccuracy: true,\n    // \u6307\u5b9a\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e\u7684\u8d85\u65f6\u65f6\u95f4, \u9ed8\u8ba4\u4e0d\u9650\u65f6, \u5355\u4f4d\u4e3a\u6beb\u79d2\n    timeout: 5000,\n    // \u6700\u957f\u6709\u6548\u671f, \u5728\u91cd\u590d\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e\u65f6, \u6b64\u53c2\u6570\u6307\u5b9a\u591a\u4e45\u518d\u6b21\u83b7\u53d6\u4f4d\u7f6e.\n    maximumAge: 3000,\n  })\n} else {\n  alert('Your browser does not support Geolocation!')\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"locationError \u4e3a\u83b7\u53d6\u4f4d\u7f6e\u4fe1\u606f\u5931\u8d25\u7684\u56de\u8c03\u51fd\u6570, \u53ef\u4ee5\u6839\u636e\u9519\u8bef\u7c7b\u578b\u63d0\u793a\u4fe1\u606f:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"function locationError(error) {\n  switch (error.code) {\n    case error.TIMEOUT:\n      showError('A timeout occurred! Please try again!')\n      break\n    case error.POSITION_UNAVAILABLE:\n      showError('We can\\'t detect your location. Sorry!')\n      break\n    case error.PERMISSION_DENIED:\n      showError('Please allow geolocation access for this to work.')\n      break\n    case error.UNKNOWN_ERROR:\n      showError('An unknown error occurred!')\n      break\n    default:\n      throw new Error('Unsupported error!')\n  }\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"locationSuccess \u4e3a\u83b7\u53d6\u4f4d\u7f6e\u4fe1\u606f\u6210\u529f\u7684\u56de\u8c03\u51fd\u6570,\n\u8fd4\u56de\u7684\u6570\u636e\u4e2d\u5305\u542b\u7ecf\u7eac\u5ea6\u7b49\u4fe1\u606f:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"position.timestamp"}),"."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"position.coords"}),":","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"latitude"}),": \u7ef4\u5ea6."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"longitude"}),": \u7ecf\u5ea6."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"accuracy"}),"."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"altitude"}),": \u6d77\u62d4\u9ad8\u5ea6."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"altitudeAccuracy"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u7ed3\u5408 Google Map API \u5373\u53ef\u5728\u5730\u56fe\u4e2d\u663e\u793a\u5f53\u524d\u7528\u6237\u7684\u4f4d\u7f6e\u4fe1\u606f:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"function locationSuccess(position) {\n  const coords = position.coords\n  const latlng = new google.maps.LatLng(\n    // \u7ef4\u5ea6\n    coords.latitude,\n    // \u7cbe\u5ea6\n    coords.longitude\n  )\n  const myOptions = {\n    // \u5730\u56fe\u653e\u5927\u500d\u6570\n    zoom: 12,\n    // \u5730\u56fe\u4e2d\u5fc3\u8bbe\u4e3a\u6307\u5b9a\u5750\u6807\u70b9\n    center: latlng,\n    // \u5730\u56fe\u7c7b\u578b\n    mapTypeId: google.maps.MapTypeId.ROADMAP,\n  }\n\n  // \u521b\u5efa\u5730\u56fe\u5e76\u8f93\u51fa\u5230\u9875\u9762\n  const myMap = new google.maps.Map(document.getElementById('map'), myOptions)\n\n  // \u521b\u5efa\u6807\u8bb0\n  const marker = new google.maps.Marker({\n    // \u6807\u6ce8\u6307\u5b9a\u7684\u7ecf\u7eac\u5ea6\u5750\u6807\u70b9\n    position: latlng,\n    // \u6307\u5b9a\u7528\u4e8e\u6807\u6ce8\u7684\u5730\u56fe\n    map: myMap,\n  })\n\n  // \u521b\u5efa\u6807\u6ce8\u7a97\u53e3\n  const infoWindow = new google.maps.InfoWindow({\n    content: `\u60a8\u5728\u8fd9\u91cc<br/>\u7eac\u5ea6: ${coords.latitude}<br/>\u7ecf\u5ea6: ${coords.longitude}`,\n  })\n\n  // \u6253\u5f00\u6807\u6ce8\u7a97\u53e3\n  infoWindow.open(myMap, marker)\n}\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"navigator.geolocation.watchPosition(\n  locationSuccess,\n  locationError,\n  positionOption\n)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"user-agent",children:"User Agent"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"navigator.userAgent"})," \u7279\u522b\u590d\u6742:"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5386\u53f2\u517c\u5bb9\u95ee\u9898: Netscape -> IE -> Firefox -> Safari -> Chrome -> Edge."}),"\n",(0,r.jsxs)(e.li,{children:["\u6bcf\u4e00\u4e2a\u65b0\u7684\u6d4f\u89c8\u5668\u5382\u5546\u5fc5\u987b\u4fdd\u8bc1\u65e7\u7f51\u7ad9\u7684\u68c0\u6d4b\u811a\u672c\u80fd\u6b63\u5e38\u8bc6\u522b\u81ea\u5bb6\u6d4f\u89c8\u5668,\n\u4ece\u800c\u6b63\u5e38\u6253\u5f00\u7f51\u9875, \u5bfc\u81f4 ",(0,r.jsx)(e.code,{children:"navigator.userAgent"})," \u4e0d\u65ad\u53d8\u957f."]}),"\n",(0,r.jsxs)(e.li,{children:["User-Agent detection ",(0,r.jsx)(e.a,{href:"https://github.com/faisalman/ua-parser-js",children:"parser"}),"."]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"console.log(navigator.userAgent)\n// 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko)\n// Chrome/101.0.4922.0 Safari/537.36 Edg/101.0.1198.0'\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"class BrowserDetector {\n  constructor() {\n    // \u6d4b\u8bd5\u6761\u4ef6\u7f16\u8bd1\n    // IE6~10 \u652f\u6301\n\n    this.isIE_Gte6Lte10 = /* @cc_on!@ */ false\n    // \u6d4b\u8bd5 documentMode\n    // IE7~11 \u652f\u6301\n    this.isIE_Gte7Lte11 = !!document.documentMode\n    // \u6d4b\u8bd5 StyleMedia \u6784\u9020\u51fd\u6570\n    // Edge 20 \u53ca\u4ee5\u4e0a\u7248\u672c\u652f\u6301\n    this.isEdge_Gte20 = !!window.StyleMedia\n    // \u6d4b\u8bd5 Firefox \u4e13\u6709\u6269\u5c55\u5b89\u88c5 API\n    // \u6240\u6709\u7248\u672c\u7684 Firefox \u90fd\u652f\u6301\n    this.isFirefox_Gte1 = typeof InstallTrigger !== 'undefined'\n    // \u6d4b\u8bd5 chrome \u5bf9\u8c61\u53ca\u5176 webstore \u5c5e\u6027\n    // Opera \u7684\u67d0\u4e9b\u7248\u672c\u6709 window.chrome, \u4f46\u6ca1\u6709 window.chrome.webstore\n    // \u6240\u6709\u7248\u672c\u7684 Chrome \u90fd\u652f\u6301\n    this.isChrome_Gte1 = !!window.chrome && !!window.chrome.webstore\n    // Safari \u65e9\u671f\u7248\u672c\u4f1a\u7ed9\u6784\u9020\u51fd\u6570\u7684\u6807\u7b7e\u7b26\u8ffd\u52a0 \"Constructor\"\u5b57\u6837, \u5982:\n    // window.Element.toString(); // [object ElementConstructor]\n    // Safari 3~9.1 \u652f\u6301\n    this.isSafari_Gte3Lte9_1 = /constructor/i.test(window.Element)\n    // \u63a8\u9001\u901a\u77e5 API \u66b4\u9732\u5728 window \u5bf9\u8c61\u4e0a\n    // \u4f7f\u7528 IIFE \u9ed8\u8ba4\u53c2\u6570\u503c\u4ee5\u907f\u514d\u5bf9 undefined \u8c03\u7528 toString()\n    // Safari 7.1 \u53ca\u4ee5\u4e0a\u7248\u672c\u652f\u6301\n    this.isSafari_Gte7_1 = (({ pushNotification = {} } = {}) =>\n      pushNotification.toString() === '[object SafariRemoteNotification]')(\n      window.safari\n    )\n    // \u6d4b\u8bd5 addons \u5c5e\u6027\n    // Opera 20 \u53ca\u4ee5\u4e0a\u7248\u672c\u652f\u6301\n    this.isOpera_Gte20 = !!window.opr && !!window.opr.addons\n  }\n\n  isIE() {\n    return this.isIE_Gte6Lte10 || this.isIE_Gte7Lte11\n  }\n\n  isEdge() {\n    return this.isEdge_Gte20 && !this.isIE()\n  }\n\n  isFirefox() {\n    return this.isFirefox_Gte1\n  }\n\n  isChrome() {\n    return this.isChrome_Gte1\n  }\n\n  isSafari() {\n    return this.isSafari_Gte3Lte9_1 || this.isSafari_Gte7_1\n  }\n\n  isOpera() {\n    return this.isOpera_Gte20\n  }\n}\n"})}),"\n",(0,r.jsxs)(e.admonition,{title:"Feature Detection",type:"caution",children:[(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u4e0d\u4f9d\u8d56 User-Agent \u63a8\u65ad\u6d4f\u89c8\u5668\u7248\u672c"}),", \u5bb9\u6613\u63a8\u65ad\u9519\u8bef,\n\u5efa\u8bae\u4f7f\u7528 ",(0,r.jsx)(e.a,{href:"https://developer.mozilla.org/docs/Learn_web_development/Extensions/Testing/Feature_detection",children:"feature detection"}),":"]}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// \u68c0\u6d4b\u6d4f\u89c8\u5668\u662f\u5426\u652f\u6301 Netscape \u5f0f\u7684\u63d2\u4ef6\nconst hasNSPlugins = !!(navigator.plugins && navigator.plugins.length)\n// \u68c0\u6d4b\u6d4f\u89c8\u5668\u662f\u5426\u5177\u6709 DOM Level 1 \u80fd\u529b\nconst hasDOM1 = !!(\n  document.getElementById\n  && document.createElement\n  && document.getElementsByTagName\n)\n\n// \u7279\u6027\u68c0\u6d4b\nif (document.getElementById) {\n  element = document.getElementById(id)\n}\n"})})]}),"\n",(0,r.jsxs)(e.p,{children:["Detect ",(0,r.jsx)(e.a,{href:"https://evilmartians.com/chronicles/how-to-detect-safari-and-ios-versions-with-ease",children:"Safari and iOS versions"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// Desktop Safari, all mobile WebKit browsers on iOS and webview iOS\nfunction isWebkit() {\n  return 'GestureEvent' in window\n}\n\n// All mobile webkit browsers and webview iOS\nfunction isMobileWebKit() {\n  return 'ongesturechange' in window\n}\n\n// Desktop Safari\nfunction isDesktopWebKit() {\n  return (\n    typeof window !== 'undefined'\n    && 'safari' in window\n    && 'pushNotification' in window.safari\n  )\n}\n\n// Use `CSS.supports` in Javascript or `@supports` in CSS to check if the feature is available.\nconst supportsManagedMediaSource = 'ManagedMediaSource' in window\n\n// true on iOS 17.0+ (Safari 17.0+)\nconst isAtLeastIOS17 = CSS.supports('contain-intrinsic-size', '100px')\n\n// Combine to isolate 17.0\nfunction isOnlyIOS170() {\n  return isAtLeastIOS17 && !supportsManagedMediaSource\n}\n\nif (isMobileWebKit()) {\n  if (isOnlyIOS170()) {\n    // Running iOS 17.0 exactly\n  } else if (isAtLeastIOS17) {\n    // Safe to use iOS 17+ features\n  } else {\n    // Fallback for older iOS versions\n  }\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"screen",children:"Screen"}),"\n",(0,r.jsx)(e.p,{children:"\u6d4f\u89c8\u5668\u7a97\u53e3\u5916\u9762\u7684\u5ba2\u6237\u7aef\u663e\u793a\u5668\u7684\u4fe1\u606f:"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Property"}),(0,r.jsx)(e.th,{})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"availHeight"}),(0,r.jsx)(e.td,{children:"\u5c4f\u5e55\u50cf\u7d20\u9ad8\u5ea6\u51cf\u53bb\u7cfb\u7edf\u7ec4\u4ef6\u9ad8\u5ea6 (\u53ea\u8bfb)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"availWidth"}),(0,r.jsx)(e.td,{children:"\u5c4f\u5e55\u50cf\u7d20\u5bbd\u5ea6\u51cf\u53bb\u7cfb\u7edf\u7ec4\u4ef6\u5bbd\u5ea6 (\u53ea\u8bfb)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"colorDepth"}),(0,r.jsx)(e.td,{children:"\u8868\u793a\u5c4f\u5e55\u989c\u8272\u7684\u4f4d\u6570: \u591a\u6570\u7cfb\u7edf\u662f 32 (\u53ea\u8bfb)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"height"}),(0,r.jsx)(e.td,{children:"\u5c4f\u5e55\u50cf\u7d20\u9ad8\u5ea6"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"width"}),(0,r.jsx)(e.td,{children:"\u5c4f\u5e55\u50cf\u7d20\u5bbd\u5ea6"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"pixelDepth"}),(0,r.jsx)(e.td,{children:"\u5c4f\u5e55\u7684\u4f4d\u6df1 (\u53ea\u8bfb)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"orientation"}),(0,r.jsx)(e.td,{children:"Screen Orientation API \u4e2d\u5c4f\u5e55\u7684\u671d\u5411"})]})]})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const screen = window.screen\n\nconsole.log(screen.colorDepth) // 24\nconsole.log(screen.pixelDepth) // 24\n\n// \u5782\u76f4\u770b\nconsole.log(screen.orientation.type) // portrait-primary\nconsole.log(screen.orientation.angle) // 0\n// \u5411\u5de6\u8f6c\nconsole.log(screen.orientation.type) // landscape-primary\nconsole.log(screen.orientation.angle) // 90\n// \u5411\u53f3\u8f6c\nconsole.log(screen.orientation.type) // landscape-secondary\nconsole.log(screen.orientation.angle) // 270\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u5168\u5c4f ",(0,r.jsx)(e.a,{href:"https://developer.mozilla.org/docs/Web/API/Fullscreen_API",children:"API"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"function toggleFullscreen() {\n  const elem = document.querySelector('video')\n\n  if (document.fullscreenElement) {\n    document\n      .exitFullscreen()\n      .then(() => console.log('Document Exited from Full screen mode'))\n      .catch(err => console.error(err))\n  } else {\n    elem\n      .requestFullscreen()\n      .then(() => {})\n      .catch((err) => {\n        alert(\n          `Error occurred while switch into fullscreen mode: ${err.message} (${err.name})`\n        )\n      })\n  }\n}\n\ndocument.onclick = function (event) {\n  if (document.fullscreenElement) {\n    document\n      .exitFullscreen()\n      .then(() => console.log('Document Exited from Full screen mode'))\n      .catch(err => console.error(err))\n  } else {\n    document.documentElement\n      .requestFullscreen({ navigationUI: 'show' })\n      .then(() => {})\n      .catch((err) => {\n        alert(\n          `Error occurred while switch into fullscreen mode: ${err.message} (${err.name})`\n        )\n      })\n  }\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"history",children:"History"}),"\n",(0,r.jsx)(e.h3,{id:"navigation",children:"Navigation"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const history = window.history\n\n// \u540e\u9000\u4e00\u9875\nhistory.go(-1)\n// \u524d\u8fdb\u4e00\u9875\nhistory.go(1)\n// \u524d\u8fdb\u4e24\u9875\nhistory.go(2)\n// \u5bfc\u822a\u5230\u6700\u8fd1\u7684 new.com \u9875\u9762\nhistory.go('new.com')\n// \u5bfc\u822a\u5230\u6700\u8fd1\u7684 example.net \u9875\u9762\nhistory.go('example.net')\n// \u540e\u9000\u4e00\u9875\nhistory.back()\n// \u524d\u8fdb\u4e00\u9875\nhistory.forward()\n\nif (history.length === 1)\n  console.log('\u8fd9\u662f\u7528\u6237\u7a97\u53e3\u4e2d\u7684\u7b2c\u4e00\u4e2a\u9875\u9762')\n\nif (history.scrollRestoration)\n  history.scrollRestoration = 'manual'\n"})}),"\n",(0,r.jsx)(e.h3,{id:"state",children:"State"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const history = window.history\n\nconst stateObject = { foo: 'bar' }\nhistory.pushState(stateObject, 'My title', 'baz.html')\n\nhistory.replaceState({ newFoo: 'newBar' }, 'New title') // No new history state.\n\nwindow.addEventListener('popstate', (event) => {\n  const state = event.state\n\n  if (state) {\n    // \u7b2c\u4e00\u4e2a\u9875\u9762\u52a0\u8f7d\u65f6\u72b6\u6001\u662f null\n    processState(state)\n  }\n})\n"})})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},86145:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>l});var i=t(57140);const r={},s=i.createContext(r);function o(n){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);