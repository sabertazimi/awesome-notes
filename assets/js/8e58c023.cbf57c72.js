"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[62413],{93802:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"language/rust/iterator","title":"Iterator","description":"Iterator Trait","source":"@site/content/language/rust/iterator.md","sourceDirName":"language/rust","slug":"/language/rust/iterator","permalink":"/notes/language/rust/iterator","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/language/rust/iterator.md","tags":[{"inline":true,"label":"Language","permalink":"/notes/tags/language"},{"inline":true,"label":"Rust","permalink":"/notes/tags/rust"},{"inline":true,"label":"Iterator","permalink":"/notes/tags/iterator"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":10,"frontMatter":{"sidebar_position":10,"tags":["Language","Rust","Iterator"]},"sidebar":"tutorialSidebar","previous":{"title":"Closure","permalink":"/notes/language/rust/closure"},"next":{"title":"Error","permalink":"/notes/language/rust/error"}}');var s=t(35656),a=t(86145);const i={sidebar_position:10,tags:["Language","Rust","Iterator"]},l="Iterator",o={},c=[{value:"Iterator Trait",id:"iterator-trait",level:2},{value:"Adapter Methods",id:"adapter-methods",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"iterator",children:"Iterator"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:'let arr = [1, 2, 3];\n\nfor v in arr.into_iter() {\n    println!("{}", v);\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:"fn main() {\n    let arr = [1, 2, 3];\n    let mut arr_iter = arr.into_iter();\n\n    assert_eq!(arr_iter.next(), Some(1));\n    assert_eq!(arr_iter.next(), Some(2));\n    assert_eq!(arr_iter.next(), Some(3));\n    assert_eq!(arr_iter.next(), None);\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"iterator-trait",children:"Iterator Trait"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:"pub trait Iterator {\n    type Item;\n\n    fn next(&mut self) -> Option<Self::Item>;\n}\n\nimpl<I: Iterator> IntoIterator for I {\n    type Item = I::Item;\n    type IntoIter = I;\n\n    #[inline]\n    fn into_iter(self) -> I {\n        self\n    }\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"iter"}),": \u4e0d\u53ef\u53d8\u501f\u7528."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"iter_mut"}),": \u53ef\u53d8\u501f\u7528."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"into_iter"}),": \u6539\u53d8\u6240\u6709\u6743."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:"fn iter(&self) -> Iter             // Iter implements Iterator<Item = &U>\nfn iter_mut(&mut self) -> IterMut  // IterMut implements Iterator<Item = &mut U>\nfn into_iter(self) -> IntoIter     // IntoIter implements Iterator<Item = U>\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:'fn main() {\n    let values = vec![1, 2, 3];\n\n    for v in values.into_iter() {\n        println!("{}", v)\n    }\n\n    // \u4e0b\u9762\u7684\u4ee3\u7801\u5c06\u62a5\u9519.\n    // println!("{:?}",values);\n\n    let values = vec![1, 2, 3];\n    let _values_iter = values.iter();\n\n    // \u4e0d\u4f1a\u62a5\u9519.\n    println!("{:?}", values);\n\n    let mut values = vec![1, 2, 3];\n    // \u5bf9 values \u4e2d\u7684\u5143\u7d20\u8fdb\u884c\u53ef\u53d8\u501f\u7528.\n    let mut values_iter_mut = values.iter_mut();\n\n    // \u53d6\u51fa\u7b2c\u4e00\u4e2a\u5143\u7d20, \u5e76\u4fee\u6539\u4e3a0.\n    if let Some(v) = values_iter_mut.next() {\n        *v = 0;\n    }\n\n    // \u8f93\u51fa [0, 2, 3].\n    println!("{:?}", values);\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Implement iterator:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:"struct Counter {\n    count: u32,\n}\n\nimpl Counter {\n    fn new() -> Counter {\n        Counter { count: 0 }\n    }\n}\n\nimpl Iterator for Counter {\n    type Item = u32;\n\n    fn next(&mut self) -> Option<Self::Item> {\n        if self.count < 5 {\n            self.count += 1;\n            Some(self.count)\n        } else {\n            None\n        }\n    }\n}\n\nfn main() {\n    let mut counter = Counter::new();\n    assert_eq!(counter.next(), Some(1));\n    assert_eq!(counter.next(), Some(2));\n    assert_eq!(counter.next(), Some(3));\n    assert_eq!(counter.next(), Some(4));\n    assert_eq!(counter.next(), Some(5));\n    assert_eq!(counter.next(), None);\n\n    let sum: u32 = Counter::new()\n        .zip(Counter::new().skip(1))\n        .map(|(a, b)| a * b)\n        .filter(|x| x % 3 == 0)\n        .sum();\n    assert_eq!(18, sum);\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"adapter-methods",children:"Adapter Methods"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u6d88\u8d39\u6027\u9002\u914d\u5668: \u83b7\u53d6\u8fed\u4ee3\u5668\u7684\u6240\u6709\u6743, \u5e76\u6d88\u8017\u8fed\u4ee3\u5668\u4e2d\u6240\u6709\u5143\u7d20.","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"collect::<T>()"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"fold."}),"\n",(0,s.jsx)(n.li,{children:"partition."}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"sum::<T>()"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u8fed\u4ee3\u6027\u9002\u914d\u5668: \u60f0\u6027\u65b9\u6cd5 (Lazy Iterator)","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"enumerate."}),"\n",(0,s.jsx)(n.li,{children:"filter."}),"\n",(0,s.jsx)(n.li,{children:"filter_map."}),"\n",(0,s.jsx)(n.li,{children:"map."}),"\n",(0,s.jsx)(n.li,{children:"take_while."}),"\n",(0,s.jsx)(n.li,{children:"zip."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Ordinary iterator methods:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Iterator::any."}),"\n",(0,s.jsx)(n.li,{children:"Iterator::find."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["More adapter methods see ",(0,s.jsx)(n.code,{children:"Iterator"})," trait\n",(0,s.jsx)(n.a,{href:"https://doc.rust-lang.org/std/iter/trait.Iterator.html",children:"documentation"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:'fn main() {\n    let v1 = vec![1, 2, 3];\n    let v1_iter = v1.iter();\n    let total: i32 = v1_iter.sum();\n    assert_eq!(total, 6);\n\n    // v1_iter \u662f\u501f\u7528\u4e86 v1, \u56e0\u6b64 v1 \u53ef\u4ee5\u7167\u5e38\u4f7f\u7528.\n    println!("{:?}",v1);\n\n    // \u4ee5\u4e0b\u4ee3\u7801\u4f1a\u62a5\u9519, \u56e0\u4e3a `sum` \u62ff\u5230\u4e86\u8fed\u4ee3\u5668 `v1_iter` \u7684\u6240\u6709\u6743.\n    // println!("{:?}",v1_iter);\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:"fn main() {\n    let v1: Vec<i32> = vec![1, 2, 3];\n    let v2: Vec<_> = v1.iter().map(|x| x + 1).collect();\n    assert_eq!(v2, vec![2, 3, 4]);\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:'use std::collections::HashMap;\n\nfn main() {\n    let names = ["name1", "name2"];\n    let ages = [18, 18];\n    let folks: HashMap<_, _> = names.into_iter().zip(ages.into_iter()).collect();\n    println!("{:?}",folks);\n}\n'})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},86145:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var r=t(57140);const s={},a=r.createContext(s);function i(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);