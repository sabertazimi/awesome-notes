"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[19983],{16656:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>u,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"language/rust/closure","title":"Closure","description":"Function Parameter Closure","source":"@site/content/language/rust/closure.md","sourceDirName":"language/rust","slug":"/language/rust/closure","permalink":"/notes/language/rust/closure","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/language/rust/closure.md","tags":[{"inline":true,"label":"Language","permalink":"/notes/tags/language"},{"inline":true,"label":"Rust","permalink":"/notes/tags/rust"},{"inline":true,"label":"Closure","permalink":"/notes/tags/closure"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":9,"frontMatter":{"sidebar_position":9,"tags":["Language","Rust","Closure"]},"sidebar":"tutorialSidebar","previous":{"title":"Lifetime","permalink":"/notes/language/rust/lifetime"},"next":{"title":"Iterator","permalink":"/notes/language/rust/iterator"}}');var s=t(35656),l=t(86145);const i={sidebar_position:9,tags:["Language","Rust","Closure"]},a="Closure",u={},o=[{value:"Function Parameter Closure",id:"function-parameter-closure",level:2},{value:"Function Return Closure",id:"function-return-closure",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"closure",children:"Closure"})}),"\n",(0,s.jsx)(e.h2,{id:"function-parameter-closure",children:"Function Parameter Closure"}),"\n",(0,s.jsx)(e.p,{children:"\u6539\u53d8\u6355\u83b7\u53d8\u91cf\u7684\u6240\u6709\u6743 (FnOnce):"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'fn fn_once<F>(func: F)\nwhere\n    F: FnOnce(usize) -> bool + Copy,\n{\n    println!("{}", func(3));\n    println!("{}", func(4));\n}\n\nfn main() {\n    let x = vec![1, 2, 3];\n    fn_once(|z|{z == x.len()})\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u53ef\u53d8\u501f\u7528\u6355\u83b7 (FnMut):"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut s = String::new();\n\n    let update_string =  |str| s.push_str(str);\n\n    exec(update_string);\n\n    println!("{:?}",s);\n}\n\nfn exec<\'a, F: FnMut(&\'a str)>(mut f: F)  {\n    f("hello")\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0d\u53ef\u53d8\u501f\u7528\u6355\u83b7 (Fn):"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s = "hello, ".to_string();\n\n    let update_string =  |str| println!("{},{}",s,str);\n\n    exec(update_string);\n\n    println!("{:?}",s);\n}\n\nfn exec<\'a, F: Fn(String) -> ()>(f: F)  {\n    f("world".to_string())\n}\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u6240\u6709\u95ed\u5305\u90fd\u81ea\u52a8\u5b9e\u73b0\u4e86 ",(0,s.jsx)(e.code,{children:"FnOnce"})," \u7279\u5f81, \u56e0\u6b64\u4efb\u4f55\u4e00\u4e2a\u95ed\u5305\u90fd\u81f3\u5c11\u53ef\u4ee5\u88ab\u8c03\u7528\u4e00\u6b21."]}),"\n",(0,s.jsxs)(e.li,{children:["\u6ca1\u6709\u79fb\u51fa\u6240\u6355\u83b7\u53d8\u91cf\u7684\u6240\u6709\u6743\u7684\u95ed\u5305\u81ea\u52a8\u5b9e\u73b0\u4e86 ",(0,s.jsx)(e.code,{children:"FnMut"})," \u7279\u5f81."]}),"\n",(0,s.jsxs)(e.li,{children:["\u4e0d\u9700\u8981\u5bf9\u6355\u83b7\u53d8\u91cf\u8fdb\u884c\u6539\u53d8\u7684\u95ed\u5305\u81ea\u52a8\u5b9e\u73b0\u4e86 ",(0,s.jsx)(e.code,{children:"Fn"})," \u7279\u5f81."]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"function-return-closure",children:"Function Return Closure"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:"fn factory() -> impl Fn(i32) -> i32 {\n    let num = 5;\n    |x| x + num\n}\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:"fn factory(x:i32) -> Box<dyn Fn(i32) -> i32> {\n    let num = 5;\n\n    if x > 1{\n        Box::new(move |x| x + num)\n    } else {\n        Box::new(move |x| x - num)\n    }\n}\n"})})]})}function d(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},86145:(n,e,t)=>{t.d(e,{R:()=>i,x:()=>a});var r=t(57140);const s={},l=r.createContext(s);function i(n){const e=r.useContext(l);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:i(n.components),r.createElement(l.Provider,{value:e},n.children)}}}]);