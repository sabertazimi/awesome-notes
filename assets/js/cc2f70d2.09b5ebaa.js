"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[62310],{40995:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"web/javascript/variable","title":"Variable","description":"Hoisting","source":"@site/content/web/javascript/variable.md","sourceDirName":"web/javascript","slug":"/web/javascript/variable","permalink":"/notes/web/javascript/variable","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/javascript/variable.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"JavaScript","permalink":"/notes/tags/java-script"},{"inline":true,"label":"ECMAScript","permalink":"/notes/tags/ecma-script"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":9,"frontMatter":{"sidebar_position":9,"tags":["Web","JavaScript","ECMAScript"]},"sidebar":"tutorialSidebar","previous":{"title":"Temporal","permalink":"/notes/web/javascript/temporal"},"next":{"title":"Operators","permalink":"/notes/web/javascript/operator"}}');var i=r(35656),s=r(86145);const l={sidebar_position:9,tags:["Web","JavaScript","ECMAScript"]},c="Variable",o={},d=[{value:"Hoisting",id:"hoisting",level:2},{value:"Let",id:"let",level:2},{value:"Const",id:"const",level:2},{value:"Type Detection",id:"type-detection",level:2},{value:"Null",id:"null",level:3},{value:"Property",id:"property",level:3},{value:"Object",id:"object",level:3},{value:"Type Conversion",id:"type-conversion",level:2},{value:"Context",id:"context",level:3},{value:"Algorithm",id:"algorithm",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"variable",children:"Variable"})}),"\n",(0,i.jsx)(n.h2,{id:"hoisting",children:"Hoisting"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u4e00\u65b9\u9762\u89c4\u5b9a, ",(0,i.jsx)(n.code,{children:"var"}),"/",(0,i.jsx)(n.code,{children:"function"})," \u58f0\u660e\u7684\u5168\u5c40\u53d8\u91cf,\n\u4f9d\u65e7\u662f\u5168\u5c40\u5bf9\u8c61\u7684\u5c5e\u6027, \u610f\u5473\u7740\u4f1a",(0,i.jsx)(n.code,{children:"Hoisting"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["\u53e6\u4e00\u65b9\u9762\u89c4\u5b9a, ",(0,i.jsx)(n.code,{children:"let"}),"/",(0,i.jsx)(n.code,{children:"const"}),"/",(0,i.jsx)(n.code,{children:"class"})," \u58f0\u660e\u7684\u5168\u5c40\u53d8\u91cf,\n\u4e0d\u5c5e\u4e8e\u5168\u5c40\u5bf9\u8c61\u7684\u5c5e\u6027, \u610f\u5473\u7740\u4e0d\u4f1a",(0,i.jsx)(n.code,{children:"Hoisting"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"var"})," \u53ea\u6709\u51fd\u6570\u4f5c\u7528\u57df, ",(0,i.jsx)(n.code,{children:"let"}),"/",(0,i.jsx)(n.code,{children:"const"})," \u62e5\u6709\u5757\u7ea7\u4f5c\u7528\u57df."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"var"})," \u8868\u8fbe\u5f0f\u548c ",(0,i.jsx)(n.code,{children:"function"})," \u58f0\u660e\u90fd\u5c06\u4f1a\u88ab\u63d0\u5347\u5230\u5f53\u524d\u4f5c\u7528\u57df (",(0,i.jsx)(n.strong,{children:"\u5168\u5c40\u4f5c\u7528\u57df/\u51fd\u6570\u4f5c\u7528\u57df"}),") \u9876\u90e8,\n\u5176\u4f59\u8868\u8fbe\u5f0f\u987a\u5e8f\u4e0d\u53d8."]}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{}),(0,i.jsx)(n.th,{children:"Hoisting"}),(0,i.jsx)(n.th,{children:"Scope"}),(0,i.jsx)(n.th,{children:"Creates Global Properties"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"var"})}),(0,i.jsx)(n.td,{children:"Declaration"}),(0,i.jsx)(n.td,{children:"Function"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"let"})}),(0,i.jsx)(n.td,{children:"Temporal dead zone"}),(0,i.jsx)(n.td,{children:"Block"}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"const"})}),(0,i.jsx)(n.td,{children:"Temporal dead zone"}),(0,i.jsx)(n.td,{children:"Block"}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"class"})}),(0,i.jsx)(n.td,{children:"Temporal dead zone"}),(0,i.jsx)(n.td,{children:"Block"}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"function"})}),(0,i.jsx)(n.td,{children:"Complete"}),(0,i.jsx)(n.td,{children:"Block"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"import"})}),(0,i.jsx)(n.td,{children:"Complete"}),(0,i.jsx)(n.td,{children:"Module-global"}),(0,i.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"// \u6211\u4eec\u77e5\u9053\u8fd9\u4e2a\u884c\u4e0d\u901a (\u5047\u8bbe\u6ca1\u6709\u672a\u5b9a\u4e49\u7684\u5168\u5c40\u53d8\u91cf)\nfunction example() {\n  console.log(notDefined) // => throws a ReferenceError\n}\n\n// \u5728\u5f15\u7528\u53d8\u91cf\u540e\u521b\u5efa\u53d8\u91cf\u58f0\u660e\u5c06\u4f1a\u56e0\u53d8\u91cf\u63d0\u5347\u800c\u8d77\u4f5c\u7528.\n// \u6ce8\u610f: \u771f\u6b63\u7684\u503c `true` \u4e0d\u4f1a\u88ab\u63d0\u5347.\nfunction example() {\n  console.log(declaredButNotAssigned) // => undefined\n  var declaredButNotAssigned = true\n}\n\n// \u89e3\u91ca\u5668\u5c06\u53d8\u91cf\u63d0\u5347\u5230\u51fd\u6570\u7684\u9876\u90e8\n// \u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u5c06\u4e0a\u8fb9\u7684\u4f8b\u5b50\u91cd\u5199\u4e3a:\nfunction example() {\n  let declaredButNotAssigned\n  console.log(declaredButNotAssigned) // => undefined\n  declaredButNotAssigned = true\n}\n\n// \u4f7f\u7528 const \u548c let\nfunction example() {\n  console.log(declaredButNotAssigned) // => throws a ReferenceError\n  console.log(typeof declaredButNotAssigned) // => throws a ReferenceError\n  const declaredButNotAssigned = true\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"function example() {\n  console.log(named) // => undefined\n\n  named() // => TypeError named is not a function\n\n  superPower() // => ReferenceError superPower is not defined\n\n  var named = function superPower() {\n    console.log('Flying')\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"let",children:"Let"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u5b9a\u4e49\u7684\u53d8\u91cf/\u51fd\u6570, \u5728\u5757\u7ea7\u4f5c\u7528\u57df\u5916 ReferenceError."}),"\n",(0,i.jsx)(n.li,{children:"\u4e0d\u5b58\u5728\u53d8\u91cf\u63d0\u5347, \u5bfc\u81f4\u6682\u65f6\u6027\u6b7b\u533a (Temporal Dead Zone)."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"let"})," variable in ",(0,i.jsx)(n.code,{children:"for-loop"})," closure,\nevery closure for each loop\nbinds the block-scoped variable."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"const a = 1\n\nb = 3 // temporal dead zone: throw reference error\n\nlet b = 2\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"let"})," \u53d8\u91cf\u62e5\u6709\u5757\u7ea7\u4f5c\u7528\u57df (\u6bcf\u4e2a ",(0,i.jsx)(n.code,{children:"setTimeout"})," \u5f15\u7528\u7684\u90fd\u662f\u4e0d\u540c\u7684\u53d8\u91cf\u5b9e\u4f8b):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"// for (var i = 0; i < 5; ++i) {\n//   setTimeout(() => console.log(i), 0);\n// }\n// Output 5, 5, 5, 5, 5.\n// \u6240\u6709\u7684 i \u90fd\u662f\u540c\u4e00\u4e2a\u53d8\u91cf, \u8f93\u51fa\u540c\u4e00\u4e2a\u6700\u7ec8\u503c.\n\nfor (let i = 0; i < 5; ++i)\n  setTimeout(() => console.log(i), 0)\n\n// Output: 0, 1, 2, 3, 4.\n// JavaScript \u5f15\u64ce\u4f1a\u4e3a\u6bcf\u4e2a\u8fed\u4ee3\u5faa\u73af\u58f0\u660e\u4e00\u4e2a\u65b0\u7684\u8fed\u4ee3\u53d8\u91cf.\n// \u6bcf\u4e2a setTimeout \u5f15\u7528\u7684\u90fd\u662f\u4e0d\u540c\u7684\u53d8\u91cf\u5b9e\u4f8b.\n"})}),"\n",(0,i.jsx)(n.h2,{id:"const",children:"Const"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"const \u4e00\u65e6\u58f0\u660e\u53d8\u91cf, \u5c31\u5fc5\u987b\u7acb\u5373\u521d\u59cb\u5316, \u4e0d\u80fd\u7559\u5230\u4ee5\u540e\u8d4b\u503c."}),"\n",(0,i.jsxs)(n.li,{children:["\u5f15\u7528\u4e00\u4e2a",(0,i.jsx)(n.code,{children:"Reference"}),"\u53d8\u91cf\u65f6, \u53ea\u8868\u793a\u6b64\u53d8\u91cf\u5730\u5740\u4e0d\u53ef\u53d8, \u4f46\u6240\u5f15\u7528\u53d8\u91cf\u7684\u503c/\u5c5e\u6027\u53ef\u53d8\n(",(0,i.jsx)(n.code,{children:"xxx *const"}),", \u5373",(0,i.jsx)(n.code,{children:"const"}),"\u6307\u9488, \u6307\u5411\u4e00\u4e2a\u53d8\u91cf)."]}),"\n",(0,i.jsx)(n.li,{children:"\u5757\u7ea7\u4f5c\u7528\u57df."}),"\n",(0,i.jsx)(n.li,{children:"\u4e0d\u5b58\u5728\u53d8\u91cf\u63d0\u5347, \u5bfc\u81f4\u6682\u65f6\u6027\u6b7b\u533a (Temporal Dead Zone)."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"const f = () => g()\nconst g = () => 123\n\n// We call f() after g() was declared:\nassert.equal(f(), 123)\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"funcDecl()\n\nconst MY_STR = 'abc'\nfunction funcDecl() {\n  assert.throws(() => MY_STR, ReferenceError)\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"type-detection",children:"Type Detection"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"function typeOf(o) {\n  const _toString = Object.prototype.toString\n  const _type = {\n    'undefined': 'undefined',\n    'number': 'number',\n    'boolean': 'boolean',\n    'string': 'string',\n    '[object Function]': 'function',\n    '[object GeneratorFunction]': 'function',\n    '[object Array]': 'array',\n    '[object Date]': 'date',\n    '[object RegExp]': 'regexp',\n    '[object Error]': 'error',\n    '[object JSON]': 'json',\n  }\n\n  return _type[typeof o] || _type[_toString.call(o)] || (o ? 'object' : 'null')\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"function type(item) {\n  const reTypeOf = /^\\[object\\s(.*?)\\]$/\n\n  return Object.prototype.toString\n    .call(item)\n    .replace(reTypeOf, '$1')\n    .toLowerCase()\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"null",children:"Null"}),"\n",(0,i.jsxs)(n.p,{children:["\u4e0d\u5e94\u4f7f\u7528 typeof \u68c0\u6d4b null, \u5e94\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"==="}),"/",(0,i.jsx)(n.code,{children:"!=="}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"/*\n * ECMAScript \u6807\u51c6\u7684\u91cd\u5927 bug\n */\nconst objectType = typeof null // => object\n"})}),"\n",(0,i.jsx)(n.h3,{id:"property",children:"Property"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u7531\u4e8e\u5c5e\u6027\u503c\u53ef\u80fd\u4e3a\u96f6\u503c\u503c\u8868\u8fbe\u5f0f, \u4e0d\u5e94\u4f7f\u7528\u96f6\u503c\u8868\u8fbe\u5f0f(",(0,i.jsx)(n.code,{children:"0"}),"/",(0,i.jsx)(n.code,{children:"NaN"}),"/",(0,i.jsx)(n.code,{children:"''"}),"/",(0,i.jsx)(n.code,{children:"null"}),"/",(0,i.jsx)(n.code,{children:"undefined"}),") \u68c0\u6d4b\u5c5e\u6027\u503c."]}),"\n",(0,i.jsxs)(n.li,{children:["\u5e94\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"for in"})," \u8fdb\u884c\u5c5e\u6027\u68c0\u6d4b."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"object",children:"Object"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"object instanceof Constructor"}),":\n\u5728\u539f\u578b\u94fe\u4e0a\u67e5\u627e",(0,i.jsx)(n.strong,{children:"\u6784\u9020\u5668\u7684\u539f\u578b\u5bf9\u8c61"})," (",(0,i.jsx)(n.code,{children:"Constructor.prototype"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"prop in object"}),": \u67e5\u627e\u539f\u578b\u94fe\u5c5e\u6027\u540d."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"/**\n * L \u8868\u793a\u5de6\u8868\u8fbe\u5f0f, R \u8868\u793a\u53f3\u8868\u8fbe\u5f0f: L \u4e3a\u53d8\u91cf, R \u4e3a\u7c7b\u578b.\n */\nfunction instanceOf(L, R) {\n  const prototype = R.prototype\n  let chain = L[[proto]]\n\n  while (true) {\n    if (chain === null)\n      return false\n\n    if (prototype === chain)\n      return true\n\n    chain = chain[[proto]]\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"type-conversion",children:"Type Conversion"}),"\n",(0,i.jsx)(n.h3,{id:"context",children:"Context"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5b57\u7b26\u4e32 -> \u6574\u6570: ",(0,i.jsx)(n.code,{children:"+string"}),"/",(0,i.jsx)(n.code,{children:"Number(string)"}),"/",(0,i.jsx)(n.code,{children:"parseInt(string, arg1)"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["any -> ",(0,i.jsx)(n.code,{children:"bool"}),": ",(0,i.jsx)(n.code,{children:"!!any"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["const -> ",(0,i.jsx)(n.code,{children:"object"}),": ",(0,i.jsx)(n.code,{children:"(const)"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"parseInt(str, base)"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u9047\u5230\u975e\u6570\u5b57\u5b57\u7b26\u7acb\u5373\u505c\u6b62\u8fd0\u884c, \u8fd4\u56de\u5f53\u524d\u8f6c\u5316\u503c."}),"\n",(0,i.jsx)(n.li,{children:"\u5c06 0 \u5f00\u5934\u5b57\u7b26\u4e32\u89e3\u6790\u4e3a\u516b\u8fdb\u5236\u6570, 0x \u5f00\u5934\u5b57\u7b26\u4e32\u89e3\u6790\u4e3a\u5341\u516d\u8fdb\u5236\u6570."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"boolean"}),"\u5728",(0,i.jsx)(n.code,{children:"\u6570\u503c\u8fd0\u7b97"}),"\u73af\u5883\u4e2d true => 1, false => 0."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"\u6570\u7ec4"}),"\u5728",(0,i.jsx)(n.code,{children:"\u6570\u503c\u8fd0\u7b97"}),"\u73af\u5883\u4e2d\u8f6c\u5316\u4e3a 0 (\u7a7a\u6570\u7ec4)/num (\u5355\u4e00\u5143\u7d20\u6570\u7ec4)/NaN (\u591a\u5143\u7d20\u6570\u7ec4/NaN \u6570\u7ec4)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"\u5bf9\u8c61"}),"\u5728",(0,i.jsx)(n.code,{children:"\u903b\u8f91\u8fd0\u7b97"}),"\u73af\u5883\u4e2d\u8f6c\u5316\u4e3a true , \u5305\u62ec false \u7684\u5c01\u88c5\u5bf9\u8c61."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"\u5bf9\u8c61"}),"\u5728",(0,i.jsx)(n.code,{children:"\u6570\u503c\u8fd0\u7b97"}),"\u73af\u5883\u4e2d\u5148\u5229\u7528 valueOf(object), \u518d\u5229\u7528 toString() \u8f6c\u5316\u4e3a\u6570\u5b57, \u82e5\u8f6c\u5316\u5931\u8d25, \u5219\u8fd4\u56de NaN."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"\u5bf9\u8c61"}),"\u4e0e",(0,i.jsx)(n.code,{children:"\u6570\u503c"}),"\u52a0\u53f7\u8fd0\u7b97: \u5148\u6570\u503c\u52a0, (",(0,i.jsx)(n.strong,{children:"\u5931\u8d25\u540e"}),")\u518d\u5b57\u7b26\u4e32\u52a0."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"// good\nconst totalScore = String(this.reviewScore)\n\n// good\nconst val = Number(inputValue)\n\n// good\nconst val = Number.parseInt(inputValue, 10)\n\n// good\nconst hasAge = Boolean(age)\n\n// best\nconst hasAge = !!age\n"})}),"\n",(0,i.jsx)(n.h3,{id:"algorithm",children:"Algorithm"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"function ToString(argument) {\n  if (argument === undefined) {\n    return 'undefined'\n  } else if (argument === null) {\n    return 'null'\n  } else if (argument === true) {\n    return 'true'\n  } else if (argument === false) {\n    return 'false'\n  } else if (TypeOf(argument) === 'number') {\n    return Number.toString(argument)\n  } else if (TypeOf(argument) === 'string') {\n    return argument\n  } else if (TypeOf(argument) === 'symbol') {\n    return Symbol.toString(argument)\n  } else if (TypeOf(argument) === 'bigint') {\n    return BigInt.toString(argument)\n  } else {\n    // argument is an object\n    const primValue = ToPrimitive(argument, 'string')\n    return ToString(primValue)\n  }\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"function ToPropertyKey(argument) {\n  const key = ToPrimitive(argument, 'string') // (A)\n\n  if (TypeOf(key) === 'symbol')\n    return key\n\n  return ToString(key)\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"function ToNumeric(value) {\n  const primValue = ToPrimitive(value, 'number')\n\n  if (TypeOf(primValue) === 'bigint')\n    return primValue\n\n  return ToNumber(primValue)\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"function ToNumber(argument) {\n  if (argument === undefined) {\n    return Number.NaN\n  } else if (argument === null) {\n    return +0\n  } else if (argument === true) {\n    return 1\n  } else if (argument === false) {\n    return +0\n  } else if (TypeOf(argument) === 'number') {\n    return argument\n  } else if (TypeOf(argument) === 'string') {\n    return parseTheString(argument) // not shown here\n  } else if (TypeOf(argument) === 'symbol') {\n    throw new TypeError('Failed!')\n  } else if (TypeOf(argument) === 'bigint') {\n    throw new TypeError('Failed!')\n  } else {\n    // argument is an object\n    const primValue = ToPrimitive(argument, 'number')\n    return ToNumber(primValue)\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ToPrimitive"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"[Symbol.toPrimitive]()"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"toString()"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"valueOf()"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"/**\n * @param input input string\n * @param hint Which type is preferred for the result string, number etc.\n */\nfunction ToPrimitive(\n  input: any,\n  hint: 'string' | 'number' | 'default' = 'default'\n) {\n  if (TypeOf(input) === 'object') {\n    const exoticToPrim = input[Symbol.toPrimitive] // (A)\n\n    if (exoticToPrim !== undefined) {\n      const result = exoticToPrim.call(input, hint)\n\n      if (TypeOf(result) !== 'object')\n        return result\n\n      throw new TypeError('[Symbol.toPrimitive]() failed!')\n    }\n\n    if (hint === 'default')\n      hint = 'number'\n\n    return OrdinaryToPrimitive(input, hint)\n  } else {\n    // input is already primitive\n    return input\n  }\n}\n\nfunction OrdinaryToPrimitive(O: object, hint: 'string' | 'number') {\n  const methodNames\n    = hint === 'string' ? ['toString', 'valueOf'] : ['valueOf', 'toString']\n\n  for (const name of methodNames) {\n    const method = O[name]\n\n    if (IsCallable(method)) {\n      const result = method.call(O)\n\n      if (TypeOf(result) !== 'object')\n        return result\n    }\n  }\n\n  throw new TypeError('Conversion failed!')\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},86145:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>c});var t=r(57140);const i={},s=t.createContext(i);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);