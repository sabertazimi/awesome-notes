"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[20320],{48094:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"web/performance/css","title":"Effective CSS","description":"Will Change","source":"@site/content/web/performance/css.md","sourceDirName":"web/performance","slug":"/web/performance/css","permalink":"/notes/web/performance/css","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/performance/css.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"Performance","permalink":"/notes/tags/performance"},{"inline":true,"label":"CSS","permalink":"/notes/tags/css"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3,"tags":["Web","Performance","CSS"]},"sidebar":"tutorialSidebar","previous":{"title":"Effective JavaScript","permalink":"/notes/web/performance/javascript"},"next":{"title":"Cache","permalink":"/notes/web/performance/cache"}}');var l=i(35656),r=i(86145);const t={sidebar_position:3,tags:["Web","Performance","CSS"]},c="Effective CSS",d={},o=[{value:"Will Change",id:"will-change",level:2},{value:"Contain",id:"contain",level:2},{value:"Content Visibility",id:"content-visibility",level:2},{value:"Selectors",id:"selectors",level:2},{value:"Triggers",id:"triggers",level:2},{value:"Loading",id:"loading",level:2},{value:"Animation",id:"animation",level:2},{value:"Frame",id:"frame",level:3},{value:"DevTools",id:"devtools",level:3},{value:"Imports",id:"imports",level:2},{value:"References",id:"references",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"effective-css",children:"Effective CSS"})}),"\n",(0,l.jsx)(n.h2,{id:"will-change",children:"Will Change"}),"\n",(0,l.jsx)(n.p,{children:"\u544a\u77e5\u6d4f\u89c8\u5668\u8be5\u5143\u7d20\u4f1a\u6709\u54ea\u4e9b\u53d8\u5316\u7684\u65b9\u6cd5,\n\u6d4f\u89c8\u5668\u53ef\u5728\u5143\u7d20\u5c5e\u6027\u771f\u6b63\u53d1\u751f\u53d8\u5316\u4e4b\u524d\u63d0\u524d\u505a\u597d\u5bf9\u5e94\u7684\u4f18\u5316\u51c6\u5907\u5de5\u4f5c:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-css",children:".will-change-parent:hover .will-change {\n  will-change: auto;\n  will-change: scroll-position;\n  will-change: contents;\n\n  /* <custom-ident> */\n  will-change: transform;\n  will-change: opacity;\n  will-change: left, top;\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"contain",children:"Contain"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"https://developer.chrome.com/blog/css-containment",children:"CSS containment"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"contain"})," \u5c5e\u6027\u5141\u8bb8\u5f00\u53d1\u8005\u58f0\u660e\u5f53\u524d\u5143\u7d20\u548c\u5b83\u7684\u5185\u5bb9\u5c3d\u53ef\u80fd\u7684\u72ec\u7acb\u4e8e DOM \u6811\u7684\u5176\u4ed6\u90e8\u5206.\n\u8fd9\u4f7f\u5f97\u6d4f\u89c8\u5668\u5728\u91cd\u65b0\u8ba1\u7b97\u5e03\u5c40/\u6837\u5f0f/\u7ed8\u56fe\u6216\u5b83\u4eec\u7684\u7ec4\u5408\u7684\u65f6\u5019, \u53ea\u4f1a\u5f71\u54cd\u5230\u6709\u9650\u7684 DOM \u533a\u57df, \u800c\u4e0d\u662f\u6574\u4e2a\u9875\u9762:\n",(0,l.jsx)(n.code,{children:"none | strict | content | [ size || layout || style || paint ]"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"size"})," containment:\n\u58f0\u660e\u8fd9\u4e2a\u5143\u7d20\u7684\u5c3a\u5bf8\u4f1a\u53d8\u5316, \u4e0d\u9700\u8981\u53bb\u68c0\u67e5\u5b83\u4f9d\u8d56\u5173\u7cfb\u4e2d\u7684\u5c3a\u5bf8\u53d8\u5316."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"layout"})," containment:\n\u58f0\u660e\u6ca1\u6709\u5916\u90e8\u5143\u7d20\u53ef\u4ee5\u5f71\u54cd\u5b83\u5185\u90e8\u7684\u5e03\u5c40, \u53cd\u4e4b\u4ea6\u7136."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"style"})," containment:\n\u58f0\u660e\u90a3\u4e9b\u540c\u65f6\u4f1a\u5f71\u54cd\u8fd9\u4e2a\u5143\u7d20\u548c\u5176\u5b50\u5b59\u5143\u7d20\u7684\u5c5e\u6027, \u90fd\u5728\u8fd9\u4e2a\u5143\u7d20\u7684\u5305\u542b\u8303\u56f4\u5185."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"paint"})," containment:\n\u58f0\u660e\u8fd9\u4e2a\u5143\u7d20\u7684\u5b50\u5b59\u8282\u70b9\u4e0d\u4f1a\u5728\u5b83\u8fb9\u7f18\u5916\u663e\u793a.\n\u5982\u679c\u4e00\u4e2a\u5143\u7d20\u5728\u89c6\u7a97\u5916\u6216\u56e0\u5176\u4ed6\u539f\u56e0\u5bfc\u81f4\u4e0d\u53ef\u89c1, \u5219\u540c\u6837\u4fdd\u8bc1\u5b83\u7684\u5b50\u5b59\u8282\u70b9\u4e0d\u4f1a\u88ab\u663e\u793a."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-css",children:".box {\n  /* \u65e0\u5e03\u5c40\u5305\u542b */\n  contain: none;\n\n  /* \u5e03\u5c40\u5305\u542b size/layout/style/paint */\n  contain: strict;\n\n  /* \u5e03\u5c40\u5305\u542b layout/style/paint */\n  contain: content;\n\n  /* \u5e03\u5c40\u5305\u542b size */\n  contain: size;\n\n  /* \u5e03\u5c40\u5305\u542b layout */\n  contain: layout;\n\n  /* \u5e03\u5c40\u5305\u542b style */\n  contain: style;\n\n  /* \u5e03\u5c40\u5305\u542b paint */\n  contain: paint;\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"content-visibility",children:"Content Visibility"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/CSS/content-visibility",children:(0,l.jsx)(n.code,{children:"content-visibility"})}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"visible"}),":\nelement contents are laid out and rendered as normal."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"hidden"}),":\nhide element while ",(0,l.jsx)(n.strong,{children:"preserving its rendering state"}),",\nif there are any changes that need to happen,\nthey only happen when the element is shown again\n(i.e. ",(0,l.jsx)(n.code,{children:"content-visibility: hidden"})," property is removed).\n",(0,l.jsx)(n.code,{children:"display: none"})," destroys element rendering state,\n",(0,l.jsx)(n.code,{children:"visibility: hidden"})," doesn't truly remove element."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"auto"}),":\nelement turns on ",(0,l.jsx)(n.code,{children:"layout"}),", ",(0,l.jsx)(n.code,{children:"style"})," and ",(0,l.jsx)(n.code,{children:"paint"})," containment,\n\u53ef\u7528\u4e8e\u5b9e\u73b0 ",(0,l.jsx)(n.strong,{children:"lazy loading"}),", ",(0,l.jsx)(n.strong,{children:"virtualized list"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-css",children:".content {\n  /* <length> values */\n  contain-intrinsic-size: 1000px;\n  contain-intrinsic-size: 10rem;\n\n  /* Keyword values */\n  content-visibility: visible;\n  content-visibility: hidden;\n  content-visibility: auto;\n}\n\n.p {\n  contain-intrinsic-size: 320px; /* \u9884\u8bbe\u9ad8\u5ea6, \u9632\u6b62\u6eda\u52a8\u6761\u9891\u7e41\u6296\u52a8 */\n  content-visibility: auto;\n}\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"https://infrequently.org/2020/12/resize-resilient-deferred-rendering",children:"Prevent jittery scrollbar"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"const observer = new ResizeObserver((entries) => {\n  for (const entry of entries) {\n    if (entry.target.getBoundingClientRect().height > 0) {\n      observer.unobserve(entry.target)\n      entry.target.classList.remove('content-visibility-auto')\n    }\n  }\n})\n\nfor (const element of document.querySelectorAll('.content-visibility-auto'))\n  observer.observe(element)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"selectors",children:"Selectors"}),"\n",(0,l.jsx)(n.p,{children:"\u51cf\u5c11\u9009\u62e9\u5668\u7684\u590d\u6742\u6027, \u4e0e\u6784\u9020\u6837\u5f0f\u672c\u8eab\u7684\u5176\u4ed6\u5de5\u4f5c\u76f8\u6bd4,\n\u9009\u62e9\u5668\u590d\u6742\u6027\u53ef\u4ee5\u5360\u7528\u8ba1\u7b97\u5143\u7d20\u6837\u5f0f\u6240\u9700\u65f6\u95f4\u7684 50%\u4ee5\u4e0a:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u907f\u514d\u4f7f\u7528\u7edf\u914d\u9009\u62e9\u5668:\n",(0,l.jsx)(n.code,{children:"*"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["\u907f\u514d\u4f7f\u7528\u540e\u4ee3\u9009\u62e9\u5668 (\u5f00\u9500\u8f83\u9ad8):\n",(0,l.jsx)(n.code,{children:".anchor .link"})," -> ",(0,l.jsx)(n.code,{children:".anchor-link"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["\u907f\u514d\u4f7f\u7528\u6807\u7b7e\u5b50\u4ee3\u9009\u62e9\u5668:\n",(0,l.jsx)(n.code,{children:".list > li"})," -> ",(0,l.jsx)(n.code,{children:".list > .item"})," (better) -> ",(0,l.jsx)(n.code,{children:".list-item"})," (best)."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"triggers",children:"Triggers"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["CSS triggers ",(0,l.jsx)(n.a,{href:"https://github.com/GoogleChromeLabs/css-triggers",children:"list"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["JavaScript triggers ",(0,l.jsx)(n.a,{href:"https://gist.github.com/paulirish/5d52fb081b3570c81e3a",children:"list"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Avoid to frequently change CSS property\nand call JavaScript API triggering layout stage (",(0,l.jsx)(n.code,{children:"reflow"}),"):"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Layout"})," stage triggers:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"display"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"position"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"float"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"top"}),"/",(0,l.jsx)(n.code,{children:"bottom"}),"/",(0,l.jsx)(n.code,{children:"left"}),"/",(0,l.jsx)(n.code,{children:"right"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"width"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"height"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"min-height"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"margin"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"padding"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"border"}),"/",(0,l.jsx)(n.code,{children:"border-width"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"overflow"}),"/",(0,l.jsx)(n.code,{children:"overflow-y"}),"."]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"font-family"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"font-size"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"font-weight"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"white-space"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"line-height"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"vertical-align"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"text-align"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"clear"}),"."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Paint"})," stage triggers:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"background"}),"/",(0,l.jsx)(n.code,{children:"background-image"}),"/",(0,l.jsx)(n.code,{children:"background-repeat"}),"/",(0,l.jsx)(n.code,{children:"background-position"}),"/",(0,l.jsx)(n.code,{children:"background-size"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"border-radius"}),"/",(0,l.jsx)(n.code,{children:"border-style"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"box-shadow"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"outline"}),"/",(0,l.jsx)(n.code,{children:"outline-width"}),"/",(0,l.jsx)(n.code,{children:"outline-style"}),"/",(0,l.jsx)(n.code,{children:"outline-color"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"color"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"text-decoration"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"visibility"}),"."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Composite"})," stage triggers:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"cursor"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"opacity"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"transform"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"z-index"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"loading",children:"Loading"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Avoid ",(0,l.jsx)(n.code,{children:"@import"}),":","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"In HTML."}),"\n",(0,l.jsx)(n.li,{children:"In CSS especially;"}),"\n",(0,l.jsxs)(n.li,{children:["Beware of oddities with the ",(0,l.jsx)(n.code,{children:"PreLoad Scanner"}),"."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Be wary of synchronous CSS and JavaScript order:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"JavaScript defined after CSS won't run until CSSOM is completed."}),"\n",(0,l.jsx)(n.li,{children:"If JavaScript doesn't depend on CSS: load it before CSS."}),"\n",(0,l.jsx)(n.li,{children:"If JavaScript does depend on CSS: load it after CSS."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Load CSS as the DOM needs it:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Unblocks ",(0,l.jsx)(n.code,{children:"Start Render"})," and allows progressive rendering."]}),"\n",(0,l.jsxs)(n.li,{children:["Avoid ",(0,l.jsx)(n.strong,{children:"flash of un-styled content"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Avoid ",(0,l.jsx)(n.strong,{children:"re-rendering and repaint"})," for initial page:\nput ",(0,l.jsx)(n.code,{children:"Critical CSS"})," in HTML footer will lead to\nentire DOM re-rendering and repaint."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Lazyload any CSS not needed for ",(0,l.jsx)(n.code,{children:"Start Render"}),":","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Only load ",(0,l.jsx)(n.code,{children:"Critical CSS"})," in ",(0,l.jsx)(n.code,{children:"<head>"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Splitting CSS into ",(0,l.jsx)(n.code,{children:"Media Queries"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-html",children:'\x3c!-- Doesn\'t block rendering --\x3e\n<link rel="preload" href="/path/to/split.css" as="style" />\n\n\x3c!-- Loading media query --\x3e\n<link rel="stylesheet" href="/path/to/split.css" media="print" onload="this.media = \'all\'" />\n'})}),"\n",(0,l.jsx)(n.h2,{id:"animation",children:"Animation"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"http://web.dev/articles/animations-guide",children:"High performance animations"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["CSS \u9ad8\u6027\u80fd\u52a8\u753b\u4e09\u8981\u7d20:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"absolute"})," position: \u8131\u79bb\u6587\u6863\u6d41, \u4e0d\u4f1a\u5bfc\u81f4\u5176\u4ed6\u5143\u7d20\u91cd\u6392\u6216\u91cd\u7ed8."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"opacity"}),": high performance trigger."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"transform"}),": high performance trigger."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Animation performance ",(0,l.jsx)(n.a,{href:"http://motion.dev/blog/web-animation-performance-tier-list",children:"tier list"}),":","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["All animation: ",(0,l.jsx)(n.code,{children:"keyframe"})," animation or ",(0,l.jsx)(n.code,{children:"transitions"})," is best."]}),"\n",(0,l.jsxs)(n.li,{children:["JS-based animation: ",(0,l.jsx)(n.code,{children:"requestAnimationFrame"})," is better than ",(0,l.jsx)(n.code,{children:"setTimeout"}),"/",(0,l.jsx)(n.code,{children:"setInterval"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Position animation: ",(0,l.jsx)(n.code,{children:"transform: translate(npx, npx)"})," is better than ",(0,l.jsx)(n.code,{children:"top"}),"/",(0,l.jsx)(n.code,{children:"right"}),"/",(0,l.jsx)(n.code,{children:"bottom"}),"/",(0,l.jsx)(n.code,{children:"left"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Scale animation: ",(0,l.jsx)(n.code,{children:"transform: scale(n)"})," better than ",(0,l.jsx)(n.code,{children:"width"}),"/",(0,l.jsx)(n.code,{children:"height"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Rotation animation: ",(0,l.jsx)(n.code,{children:"transform: rotate(deg)"})," is better."]}),"\n",(0,l.jsxs)(n.li,{children:["Opacity/visibility animation: ",(0,l.jsx)(n.code,{children:"opacity: 0...1"})," is better."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"frame",children:"Frame"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"window.requestAnimationFrame"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Reflow: ",(0,l.jsx)(n.code,{children:"JavaScript -> Style -> Layout -> Paint -> Composite"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Repaint: ",(0,l.jsx)(n.code,{children:"Paint -> Composite"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u544a\u8bc9\u6d4f\u89c8\u5668\u5e0c\u671b\u6267\u884c\u52a8\u753b\u5e76\u8bf7\u6c42\u6d4f\u89c8\u5668\u5728\u4e0b\u4e00\u6b21\u91cd\u7ed8\u4e4b\u524d\u8c03\u7528\u6307\u5b9a\u7684\u51fd\u6570\u6765\u66f4\u65b0\u52a8\u753b.\n\u8be5\u65b9\u6cd5\u4f7f\u7528\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570, \u8fd9\u4e2a\u56de\u8c03\u51fd\u6570\u4f1a\u5728\u6d4f\u89c8\u5668\u91cd\u7ed8\u4e4b\u524d\u8c03\u7528."}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\u82e5\u60f3\u8981\u5728\u4e0b\u6b21\u91cd\u7ed8\u65f6\u4ea7\u751f\u53e6\u4e00\u4e2a\u52a8\u753b\u753b\u9762, callback \u5fc5\u987b\u8c03\u7528 requestAnimationFrame."}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"let start = null\nconst element = document.getElementById('SomeElementYouWantToAnimate')\nelement.style.position = 'absolute'\n\nfunction step(timestamp) {\n  if (!start)\n    start = timestamp\n\n  const progress = timestamp - start\n  element.style.left = `${Math.min(progress / 10, 200)}px`\n\n  if (progress < 2000)\n    window.requestAnimationFrame(step)\n}\n\nwindow.requestAnimationFrame(step)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"devtools",children:"DevTools"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"https://calibreapp.com/blog/investigate-animation-performance-with-devtools",children:"DevTools"}),"\nfor animation performance:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Slower CPU simulation in ",(0,l.jsx)(n.code,{children:"performance"})," panel."]}),"\n",(0,l.jsxs)(n.li,{children:["Enable paint instrumentation in ",(0,l.jsx)(n.code,{children:"performance"})," panel."]}),"\n",(0,l.jsxs)(n.li,{children:["FPS meter in ",(0,l.jsx)(n.code,{children:"rendering"})," panel."]}),"\n",(0,l.jsxs)(n.li,{children:["Paint flashing in ",(0,l.jsx)(n.code,{children:"rendering"})," panel."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"layers"})," panel."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"imports",children:"Imports"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"link"})," is parallel, ",(0,l.jsx)(n.code,{children:"@import"})," isn't parallel."]}),"\n",(0,l.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["CSS optimization ",(0,l.jsx)(n.a,{href:"https://kinsta.com/blog/optimize-css",children:"guide"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},86145:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>c});var s=i(57140);const l={},r=s.createContext(l);function t(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);