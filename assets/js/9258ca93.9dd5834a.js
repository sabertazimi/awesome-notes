"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[99889],{13285:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"web/react/cra","title":"Create React App","description":"Workflow","source":"@site/content/web/react/cra.md","sourceDirName":"web/react","slug":"/web/react/cra","permalink":"/notes/web/react/cra","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/react/cra.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"React","permalink":"/notes/tags/react"},{"inline":true,"label":"Toolchain","permalink":"/notes/tags/toolchain"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":23,"frontMatter":{"sidebar_position":23,"tags":["Web","React","Toolchain"]},"sidebar":"tutorialSidebar","previous":{"title":"Toolchain","permalink":"/notes/web/react/toolchain"},"next":{"title":"Architecture","permalink":"/notes/web/react/architecture"}}');var r=s(35656),c=s(86145);const l={sidebar_position:23,tags:["Web","React","Toolchain"]},t="Create React App",a={},d=[{value:"Workflow",id:"workflow",level:2},{value:"React Scripts",id:"react-scripts",level:2},{value:"Initialization",id:"initialization",level:3},{value:"Commands",id:"commands",level:3},{value:"Start",id:"start",level:3},{value:"Configuration",id:"configuration",level:3},{value:"CSS",id:"css",level:2},{value:"Public Folder",id:"public-folder",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Code Splitting",id:"code-splitting",level:2},{value:"Service Worker",id:"service-worker",level:2},{value:"Deployment",id:"deployment",level:2},{value:"SPA",id:"spa",level:3},{value:"Customization",id:"customization",level:2},{value:"Monorepo",id:"monorepo",level:3},{value:"Scripts",id:"scripts",level:3},{value:"Templates",id:"templates",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"create-react-app",children:"Create React App"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx create-react-app app-name --scripts-version @sabertazimi/react-scripts --use-npm\nnpm init react-app app-name --scripts-version @sabertazimi/react-scripts --use-npm\n"})}),"\n",(0,r.jsx)(n.h2,{id:"workflow",children:"Workflow"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"createReactApp.js"}),":"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"init"}),"\n-> commander setup\n-> ",(0,r.jsx)(n.code,{children:"createApp()"}),"\n-> process CLI args\n-> ",(0,r.jsx)(n.code,{children:"run()"}),"\n-> process ",(0,r.jsx)(n.code,{children:"react-scripts@version"})," and ",(0,r.jsx)(n.code,{children:"cra-template-xxx@version"}),"\n-> install ",(0,r.jsx)(n.code,{children:"react"}),", ",(0,r.jsx)(n.code,{children:"react-dom"}),", ",(0,r.jsx)(n.code,{children:"react-scripts"})," and ",(0,r.jsx)(n.code,{children:"cra-template-xxx"}),"\n-> invoke ",(0,r.jsx)(n.code,{children:"react-scripts init"})," for further process."]}),"\n",(0,r.jsx)(n.h2,{id:"react-scripts",children:"React Scripts"}),"\n",(0,r.jsx)(n.h3,{id:"initialization",children:"Initialization"}),"\n",(0,r.jsxs)(n.p,{children:["Initialization in ",(0,r.jsx)(n.code,{children:"react-scripts/scripts/init.js"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u53ef\u4ee5\u7528\u4e8e\u6539\u53d8\u9ed8\u8ba4 registry:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"'use strict'\n\nconst registries = {\n  npm: 'https://registry.npmjs.org',\n  yarn: 'https://registry.yarnpkg.com',\n  aliyun: 'https://registry.npm.taobao.org',\n}\n\nmodule.exports = registries\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u81ea\u5b9a\u4e49\u5b89\u88c5\u9ed8\u8ba4\u4f9d\u8d56 (",(0,r.jsx)(n.code,{children:"react"}),", ",(0,r.jsx)(n.code,{children:"react-dom"}),", ",(0,r.jsx)(n.code,{children:"react-router"}),", ",(0,r.jsx)(n.code,{children:"redux"})," etc.)"]}),"\n",(0,r.jsxs)(n.li,{children:["\u989d\u5916\u5b89\u88c5\u6a21\u677f\u4f9d\u8d56 ",(0,r.jsx)(n.code,{children:"packages.dependencies"})," in ",(0,r.jsx)(n.code,{children:"cra-template/template.json"})]}),"\n",(0,r.jsxs)(n.li,{children:["Setup ",(0,r.jsx)(n.code,{children:"package.json"}),":\n",(0,r.jsx)(n.code,{children:"appPackage.eslintConfig"}),", ",(0,r.jsx)(n.code,{children:"appPackage.browserslist"}),".\n",(0,r.jsx)(n.code,{children:"appPackage.dependencies"}),", ",(0,r.jsx)(n.code,{children:"appPackage.scripts"}),"\nand merge rest config in ",(0,r.jsx)(n.code,{children:"packages"})," in ",(0,r.jsx)(n.code,{children:"cra-template/template.json"}),"\n(ignore `)."]}),"\n",(0,r.jsxs)(n.li,{children:["Copy template files from ",(0,r.jsx)(n.code,{children:"cra-template-xxx/template"})," directory."]}),"\n",(0,r.jsx)(n.li,{children:"Setup git repository."}),"\n",(0,r.jsxs)(n.li,{children:["Install deps and devDeps list from ",(0,r.jsx)(n.code,{children:"react-scripts"})," and ",(0,r.jsx)(n.code,{children:"cra-template-xxx"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Uninstall ",(0,r.jsx)(n.code,{children:"cra-template-xxx"})," package."]}),"\n",(0,r.jsx)(n.li,{children:"Setup first git commit."}),"\n",(0,r.jsx)(n.li,{children:"Print available scripts."}),"\n",(0,r.jsx)(n.li,{children:"Done."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"commands",children:"Commands"}),"\n",(0,r.jsxs)(n.p,{children:["Locating in ",(0,r.jsx)(n.code,{children:"react-scripts/scripts/"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"start.js"})," for ",(0,r.jsx)(n.code,{children:"react-scripts start"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"build.js"})," for ",(0,r.jsx)(n.code,{children:"react-scripts build"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"test.js"})," for ",(0,r.jsx)(n.code,{children:"react-scripts test"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"eject.js"})," for ",(0,r.jsx)(n.code,{children:"react-scripts eject"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"start",children:"Start"}),"\n",(0,r.jsxs)(n.p,{children:["When develop ",(0,r.jsx)(n.code,{children:"react-scripts"})," locally\nwith ",(0,r.jsx)(n.code,{children:"react-scripts start"}),",\nit will use ",(0,r.jsx)(n.code,{children:"templatePath"})," located in\n",(0,r.jsx)(n.code,{children:"react-scripts/config/paths.js"}),"\nto find local template."]}),"\n",(0,r.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Config in ",(0,r.jsx)(n.code,{children:"react-scripts/config/"})," directory:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"env.js"}),": static environment variables."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"getHttpsConfig.js"}),": get HTTPS(SSL) config."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"modules.js"}),": locale modules webpack alias with ",(0,r.jsx)(n.code,{children:"baseUrl"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"paths.js"}),": configurable paths variables (most for Webpack config)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"webpackDevServer.config.js"}),": Webpack Dev Server configuration."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"webpack.config.js"}),": Webpack configuration\n(paths, deps/devDeps, plugins, loader rules etc.)."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Add support for Ant Design UI.\nconst webpackConfig = {\n  test: /\\.(js|mjs|jsx|ts|tsx)$/,\n  include: paths.appSrc,\n  loader: require.resolve('babel-loader'),\n  options: {\n    customize: require.resolve('babel-preset-react-app/webpack-overrides'),\n    plugins: [\n      [\n        require.resolve('babel-plugin-import'),\n        {\n          libraryName: 'antd',\n          libraryDirectory: 'es',\n          style: 'css',\n        },\n      ],\n    ],\n    cacheDirectory: true,\n    cacheCompression: isEnvProduction,\n    compact: isEnvProduction,\n  },\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Add Webpack bundle analyzer plugin.\nconst { BundleAnalyzerPlugin } = require('webpack-bundle-analyzer')\n\nconst webpackConfig = {\n  plugins: [\n    isEnvDevelopment\n    && new BundleAnalyzerPlugin({\n      analyzerPort: 5000,\n    }),\n  ].filter(Boolean),\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"css",children:"CSS"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-css",children:"@import-normalize; /* bring in normalize.css styles */\n\n/* rest of app styles */\n"})}),"\n",(0,r.jsx)(n.h2,{id:"public-folder",children:"Public Folder"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"None of the files in public folder get post-processed or minified."}),"\n",(0,r.jsxs)(n.li,{children:["Missing files will not be called at compilation time,\nand will cause ",(0,r.jsx)(n.code,{children:"404"})," errors for your users."]}),"\n",(0,r.jsxs)(n.li,{children:["Result filenames won\u2019t include ",(0,r.jsx)(n.code,{children:"content hashes"}),"\nso you\u2019ll need to add query arguments or rename them every time they change."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<link rel="icon" href="%PUBLIC_URL%/favicon.ico" />\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'class Component {\n  render() {\n    // Note: this is an escape hatch and should be used sparingly!\n    // Normally recommend using `import` for getting asset URLs\n    // as described in \u201cAdding Images and Fonts\u201d section.\n    return <img src={`${process.env.PUBLIC_URL}/img/logo.png`} alt="Here" />\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Create custom environment variables beginning with ",(0,r.jsx)(n.code,{children:"REACT_APP_"}),".\nAny other variables except ",(0,r.jsx)(n.code,{children:"NODE_ENV"})," will be ignored."]}),"\n",(0,r.jsxs)(n.li,{children:["HTML access environment variables ",(0,r.jsx)(n.code,{children:"%REACT_APP_XXX%"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["JavaScript access environment variables via ",(0,r.jsx)(n.code,{children:"process.env.REACT_APP_XXX"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/motdotla/dotenv",children:(0,r.jsx)(n.code,{children:".env"})}),"\nfile define permanent environment variables:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"npm start"}),": ",(0,r.jsx)(n.code,{children:".env.development.local"}),">",(0,r.jsx)(n.code,{children:".env.local"}),">",(0,r.jsx)(n.code,{children:".env.development"}),">",(0,r.jsx)(n.code,{children:".env"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"npm run build"}),": ",(0,r.jsx)(n.code,{children:".env.production.local"}),">",(0,r.jsx)(n.code,{children:".env.local"}),">",(0,r.jsx)(n.code,{children:".env.production"}),">",(0,r.jsx)(n.code,{children:".env"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"npm test"}),": ",(0,r.jsx)(n.code,{children:".env.test.local"}),">",(0,r.jsx)(n.code,{children:".env.test"}),">",(0,r.jsx)(n.code,{children:".env"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Environment variables ",(0,r.jsx)(n.a,{href:"https://create-react-app.dev/docs/advanced-configuration",children:"list"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GENERATE_SOURCEMAP=false\nREACT_APP_NOT_SECRET_CODE=abcdef\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<link rel="icon" href="%PUBLIC_URL%/favicon.ico" />\n<title>%REACT_APP_WEBSITE_NAME%</title>\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"export default function App() {\n  return (\n    <div>\n      <small>\n        You are running this application in\n        {' '}\n        <b>{process.env.NODE_ENV}</b>\n        {' '}\n        mode.\n      </small>\n      <form>\n        <input\n          type=\"hidden\"\n          defaultValue={process.env.REACT_APP_NOT_SECRET_CODE}\n        />\n      </form>\n    </div>\n  )\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<div>\n  <small>You are running this application in <b>development</b> mode.</small>\n  <form>\n    <input type="hidden" value="abcdef" />\n  </form>\n</div>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"code-splitting",children:"Code Splitting"}),"\n",(0,r.jsxs)(n.p,{children:["Code splitting for ",(0,r.jsx)(n.a,{href:"https://create-react-app.dev/docs/production-build",children:"production build"}),"\nwith ",(0,r.jsx)(n.code,{children:"import('dep').then();"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import type { ReportHandler } from 'web-vitals'\n\nfunction reportWebVitals(onPerfEntry?: ReportHandler) {\n  if (onPerfEntry && typeof onPerfEntry === 'function') {\n    // Code splitting into separate chunk\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n"})}),"\n",(0,r.jsx)(n.h2,{id:"service-worker",children:"Service Worker"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/cra-template/pwa",children:"PWA Template"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"deployment",children:"Deployment"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://facebook.github.io/create-react-app/docs/deployment",children:"Official Documentation"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://medium.com/@svinkle/how-to-deploy-a-react-app-to-a-subdirectory-f694d46427c1",children:"Deploy Subdirectory"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Cache-Control: max-age=31536000"})," for ",(0,r.jsx)(n.code,{children:"build/static"})," assets,\n",(0,r.jsx)(n.code,{children:"Cache-Control: no-cache"})," for everything else.\n",(0,r.jsx)(n.code,{children:"build/static"})," file contents hash is embedded into the filename."]}),"\n",(0,r.jsxs)(n.li,{children:["Change ",(0,r.jsx)(n.code,{children:"homepage"})," in ",(0,r.jsx)(n.code,{children:"package.json"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"homepage": "."'}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"homepage": "https://example.com/relative/path/"'}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"path={'${process.env.PUBLIC_URL}/about'}"}),"\nin ",(0,r.jsx)(n.code,{children:"Routes.js"})," when using ",(0,r.jsx)(n.code,{children:"react-router-dom"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Or use ",(0,r.jsx)(n.code,{children:"basename"})," for ",(0,r.jsx)(n.code,{children:"react-router@^4"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'// renders <a href="/calendar/today">\nexport default function App() {\n  return (\n    <BrowserRouter basename="/calendar">\n      <Link to="/today" />\n    </BrowserRouter>\n  )\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"spa",children:"SPA"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Deployment services ",(0,r.jsx)(n.a,{href:"https://hiddedevries.nl/en/blog/2020-06-27-how-deployment-services-make-client-side-routing-work",children:"guide"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://vercel.com/support/articles/how-do-i-use-the-ignored-build-step-field-on-vercel",children:(0,r.jsx)(n.code,{children:"vercel.json"})}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "routes": [{ "src": "/[^.]+", "dest": "/", "status": 200 }]\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "routes": [\n    { "handle": "filesystem" },\n    { "src": "/.*", "dest": "/index.html" }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsonc",children:'/**\n * Ignored build step:\n * [ "$VERCEL_GIT_COMMIT_REF" == "gh-pages" ]\n */\n{\n  "$schema": "https://openapi.vercel.sh/vercel.json",\n  "git": {\n    "deploymentEnabled": {\n      "gh-pages": false\n    }\n  },\n  "buildCommand": "pnpm clone && pnpm build"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://docs.netlify.com/routing/redirects/rewrites-proxies/#history-pushstate-and-single-page-apps",children:"Netlify"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"/*    /index.html   200\n"})}),"\n",(0,r.jsx)(n.p,{children:"GitHub Pages:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# 404 fallback\nln -s index.html 404.html\n"})}),"\n",(0,r.jsx)(n.h2,{id:"customization",children:"Customization"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Custom ",(0,r.jsx)(n.code,{children:"packages/cra-template-*"}),": change HTML/CSS/JS boilerplate."]}),"\n",(0,r.jsxs)(n.li,{children:["Custom ",(0,r.jsx)(n.code,{children:"packages/react-scripts/config/"}),":\nchange paths, deps/devDeps, plugins, loader rules etc."]}),"\n",(0,r.jsxs)(n.li,{children:["Custom ",(0,r.jsx)(n.code,{children:"packages/react-scripts/scripts/"}),": change react-scripts CLI behaviors."]}),"\n",(0,r.jsxs)(n.li,{children:["Custom ",(0,r.jsx)(n.a,{href:"https://auth0.com/blog/how-to-configure-create-react-app",children:"react scripts"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"monorepo",children:"Monorepo"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"babel-preset-react-app"}),": babel preset configuration."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cra-template"}),"/",(0,r.jsx)(n.code,{children:"cra-template-typescript"}),": CRA default templates."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"eslint-config-react-app"}),": eslint configuration."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"react-app-polyfill"}),": polyfills for various browsers."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"react-dev-utils"}),":\nmost utility functions for paths, helpers, middleware, and webpack plugins."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"scripts",children:"Scripts"}),"\n",(0,r.jsxs)(n.p,{children:["In ",(0,r.jsx)(n.code,{children:"Create React App"}),"\n",(0,r.jsx)(n.a,{href:"https://github.com/facebook/create-react-app/blob/main/packages/create-react-app/createReactApp.js",children:"code"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const templatesVersionMinimum = '3.3.0'\n\n// Assume compatibility if we can't test the version.\nif (!semver.valid(packageVersion))\n  packageVersion = templatesVersionMinimum\n\n// Only support templates when used alongside new react-scripts versions.\nconst supportsTemplates = semver.gte(packageVersion, templatesVersionMinimum)\nif (supportsTemplates)\n  allDependencies.push(templateToInstall)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Due to version checking for template feature,\ncustom react scripts should\npublish with version ",(0,r.jsx)(n.code,{children:"^3.3.0"})," or ",(0,r.jsx)(n.code,{children:"^4.x.x"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"templates",children:"Templates"}),"\n",(0,r.jsxs)(n.p,{children:["HTML/CSS/JSX boilerplate in ",(0,r.jsx)(n.code,{children:"react-scripts/template/"})," directory,\nnow Templates are always named in the format cra-template-[template-name]\nin ",(0,r.jsx)(n.code,{children:"packages/cra-template"})," and ",(0,r.jsx)(n.code,{children:"packages/cra-template-typescript"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx create-react-app my-app --template [template-name]\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Dependencies in ",(0,r.jsx)(n.code,{children:"template.json"}),"\nwill bump to latest minor version automatically."]}),"\n",(0,r.jsxs)(n.p,{children:["In ",(0,r.jsx)(n.code,{children:"react-scripts/scripts/utils/verifyTypeScriptSetup.js"}),",\nif template ",(0,r.jsx)(n.code,{children:"src"})," don't exist ",(0,r.jsx)(n.code,{children:"react-app-env.d.ts"})," file,\nit will create automatically with ",(0,r.jsx)(n.code,{children:"reference"})," to ",(0,r.jsx)(n.code,{children:"react-scripts"})," types:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'// Reference `react-scripts` types\nif (!fs.existsSync(paths.appTypeDeclarations)) {\n  fs.writeFileSync(\n    paths.appTypeDeclarations,\n    `/// <reference types="react-scripts" />${os.EOL}`,\n  )\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},86145:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var i=s(57140);const r={},c=i.createContext(r);function l(e){const n=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(c.Provider,{value:n},e.children)}}}]);