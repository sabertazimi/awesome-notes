"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[44345],{68112:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>g,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"programming/design/patterns/proxy","title":"Proxy","description":"\u901a\u8fc7\u4e00\u4e2a\u4ee3\u7406\u5bf9\u8c61:","source":"@site/content/programming/design/patterns/proxy.md","sourceDirName":"programming/design/patterns","slug":"/programming/design/patterns/proxy","permalink":"/notes/programming/design/patterns/proxy","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/programming/design/patterns/proxy.md","tags":[{"inline":true,"label":"Programming","permalink":"/notes/tags/programming"},{"inline":true,"label":"Design","permalink":"/notes/tags/design"},{"inline":true,"label":"Design Pattern","permalink":"/notes/tags/design-pattern"},{"inline":true,"label":"Structural Pattern","permalink":"/notes/tags/structural-pattern"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":12,"frontMatter":{"sidebar_position":12,"tags":["Programming","Design","Design Pattern","Structural Pattern"]},"sidebar":"tutorialSidebar","previous":{"title":"Flyweight","permalink":"/notes/programming/design/patterns/flyweight"},"next":{"title":"Chain of Responsibility","permalink":"/notes/programming/design/patterns/chain-of-responsibility"}}');var s=r(35656),i=r(86145);const o={sidebar_position:12,tags:["Programming","Design","Design Pattern","Structural Pattern"]},a="Proxy",l={},c=[];function d(n){const e={admonition:"admonition",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"proxy",children:"Proxy"})}),"\n",(0,s.jsx)(e.p,{children:"\u901a\u8fc7\u4e00\u4e2a\u4ee3\u7406\u5bf9\u8c61:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4e34\u65f6\u5b58\u50a8\u539f\u5bf9\u8c61\u65b9\u6cd5\u8c03\u7528\u4ea7\u751f\u7684\u4e00\u7cfb\u5217\u7ed3\u679c (\u65b0\u5efa\u5bf9\u8c61),\n\u51cf\u5c11\u91cd\u590d\u5bf9\u8c61\u7684\u4ea7\u751f."}),"\n",(0,s.jsx)(e.li,{children:"\u4ee3\u7406\u5bf9\u8c61\u53ef\u4ee5\u4e3a\u4e2d\u95f4\u8fc7\u7a0b\u900f\u660e\u5730\u589e\u52a0\u989d\u5916\u903b\u8f91: \u9884\u52a0\u8f7d/\u7f13\u5b58/\u5408\u5e76/\u9a8c\u8bc1/\u8f6c\u6362\u7b49."}),"\n",(0,s.jsx)(e.li,{children:"\u6602\u8d35\u7684\u5bf9\u8c61\u521b\u5efa\u6216\u4efb\u52a1\u6267\u884c\u53ef\u4ee5\u5ef6\u8fdf\u5230\u4ee3\u7406\u5bf9\u8c61\u4e2d\u6267\u884c."}),"\n",(0,s.jsx)(e.li,{children:"\u4ee3\u7406\u7c7b\u578b: \u8fdc\u7a0b/\u4fdd\u62a4/\u865a\u62df/\u7f13\u5b58\u4ee3\u7406."}),"\n",(0,s.jsx)(e.li,{children:"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219."}),"\n"]}),"\n",(0,s.jsx)(e.admonition,{title:"Proxy Use Case",type:"tip",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8fdc\u7a0b\u4ee3\u7406:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4ee3\u7406\u8f6f\u4ef6."}),"\n",(0,s.jsx)(e.li,{children:"\u9632\u706b\u5899\u4ee3\u7406."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u4fdd\u62a4\u4ee3\u7406:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8de8\u57df\u5904\u7406."}),"\n",(0,s.jsx)(e.li,{children:"\u8def\u7531\u4fdd\u62a4\u4ee3\u7406."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u865a\u62df\u4ee3\u7406:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u56fe\u7247\u9884\u52a0\u8f7d."}),"\n",(0,s.jsxs)(e.li,{children:["\u667a\u80fd\u5f15\u7528\u4ee3\u7406: C++ smart pointer, Rust ",(0,s.jsx)(e.code,{children:"RefCell"}),", Linux file descriptor."]}),"\n",(0,s.jsx)(e.li,{children:"\u5199\u65f6\u62f7\u8d1d\u4ee3\u7406: \u5185\u5b58\u9875, DLL."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u7f13\u5b58\u4ee3\u7406:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7f13\u5b58\u51fd\u6570."}),"\n",(0,s.jsx)(e.li,{children:"\u7f13\u5b58\u670d\u52a1\u5668: React Query (cache data)."}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsxs)(e.p,{children:["\u4ee3\u7406\u6a21\u5f0f\u5f3a\u8c03\u4e00\u79cd\u5173\u7cfb (Proxy \u4e0e\u5b83\u7684\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb), \u8fd9\u79cd\u5173\u7cfb\u53ef\u4ee5\u9759\u6001\u5730\u8868\u8fbe.\n\u88c5\u9970\u8005\u6a21\u5f0f\u7528\u4e8e\u4e00\u5f00\u59cb\u4e0d\u80fd\u786e\u5b9a\u5bf9\u8c61\u7684\u5168\u90e8\u529f\u80fd.\n\u4ee3\u7406\u6a21\u5f0f\u901a\u5e38\u53ea\u6709\u4e00\u5c42",(0,s.jsx)(e.code,{children:"\u4ee3\u7406-\u672c\u4f53"}),"\u7684\u5f15\u7528,\n\u88c5\u9970\u8005\u6a21\u5f0f\u7ecf\u5e38\u4f1a\u5f62\u6210\u4e00\u6761\u957f\u957f\u7684\u88c5\u9970\u94fe."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"class Percentage {\n  constructor(percent) {\n    this.percent = percent\n  }\n\n  toString() {\n    return `${this.percent}&`\n  }\n\n  valueOf() {\n    return this.percent / 100\n  }\n}\n\nconst fivePercent = new Percentage(5)\nconsole.log(fivePercent.toString())\nconsole.log(`5% of 50 is ${50 * fivePercent}`)\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"function GeoCoder() {\n  this.getLatLng = function (address) {\n    if (address === 'Amsterdam')\n      return '52.3700\xb0 N, 4.8900\xb0 E'\n    else if (address === 'London')\n      return '51.5171\xb0 N, 0.1062\xb0 W'\n    else if (address === 'Paris')\n      return '48.8742\xb0 N, 2.3470\xb0 E'\n    else if (address === 'Berlin')\n      return '52.5233\xb0 N, 13.4127\xb0 E'\n    else return ''\n  }\n}\n\nfunction GeoProxy() {\n  const geocoder = new GeoCoder()\n  const geocache = {}\n\n  return {\n    getLatLng(address) {\n      if (!geocache[address])\n        geocache[address] = geocoder.getLatLng(address)\n\n      log.add(`${address}: ${geocache[address]}`)\n      return geocache[address]\n    },\n    getCount() {\n      let count = 0\n\n      for (const code in geocache) count++\n\n      return count\n    },\n  }\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["Proxy in ",(0,s.jsx)(e.code,{children:"Vue"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const original = { name: 'jeff' }\n\nconst reactive = new Proxy(original, {\n  get(target, key) {\n    console.log('Tracking: ', key)\n    return target[key]\n  },\n  set(target, key, value) {\n    console.log('updating UI...')\n    return Reflect.set(target, key, value)\n  },\n})\n\nconsole.log(reactive.name) // 'Tracking: name'\nreactive.name = 'bob' // 'updating UI...'\n"})})]})}function g(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},86145:(n,e,r)=>{r.d(e,{R:()=>o,x:()=>a});var t=r(57140);const s={},i=t.createContext(s);function o(n){const e=t.useContext(i);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);