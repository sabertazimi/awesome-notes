"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[80402],{95425:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>u,frontMatter:()=>c,metadata:()=>a,toc:()=>i});const a=JSON.parse('{"id":"web/react/hooks/callback","title":"Callback","description":"- Returns a memoized callback.","source":"@site/content/web/react/hooks/callback.md","sourceDirName":"web/react/hooks","slug":"/web/react/hooks/callback","permalink":"/notes/web/react/hooks/callback","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/react/hooks/callback.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"React","permalink":"/notes/tags/react"},{"inline":true,"label":"Hook","permalink":"/notes/tags/hook"},{"inline":true,"label":"Callback","permalink":"/notes/tags/callback"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4,"tags":["Web","React","Hook","Callback"]},"sidebar":"tutorialSidebar","previous":{"title":"Memo","permalink":"/notes/web/react/hooks/memo"},"next":{"title":"Ref","permalink":"/notes/web/react/hooks/ref"}}');var l=t(35656),s=t(86145);const c={sidebar_position:4,tags:["Web","React","Hook","Callback"]},r="Callback",o={},i=[{value:"Dispatcher",id:"dispatcher",level:2},{value:"useCallback",id:"usecallback",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"callback",children:"Callback"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Returns a memoized callback."}),"\n",(0,l.jsxs)(n.li,{children:["\u5bf9\u4e8b\u4ef6\u53e5\u67c4\u8fdb\u884c\u7f13\u5b58, ",(0,l.jsx)(n.code,{children:"useState"})," \u7684\u7b2c\u4e8c\u4e2a\u8fd4\u56de\u503c\u662f ",(0,l.jsx)(n.code,{children:"dispatch"}),",\n\u4f46\u662f\u6bcf\u6b21\u90fd\u662f\u8fd4\u56de\u65b0\u7684\u51fd\u6570, \u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"useCallback"}),", \u53ef\u4ee5\u8ba9\u5b83\u4f7f\u7528\u4e0a\u6b21\u7684\u51fd\u6570.\n\u5728\u865a\u62df DOM \u66f4\u65b0\u8fc7\u7a0b\u4e2d, \u5982\u679c\u4e8b\u4ef6\u53e5\u67c4\u76f8\u540c, \u90a3\u4e48\u5c31\u4e0d\u7528\u6bcf\u6b21\u90fd\u8fdb\u884c\n",(0,l.jsx)(n.code,{children:"removeEventListener"})," \u4e0e ",(0,l.jsx)(n.code,{children:"addEventListener"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"useCallback(fn, deps)"})," is equivalent to ",(0,l.jsx)(n.code,{children:"useMemo(() => fn, deps)"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"dispatcher",children:"Dispatcher"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"function mountCallback<T>(callback: T, deps: Array<mixed> | void | null): T {\n  const hook = mountWorkInProgressHook()\n  const nextDeps = deps === undefined ? null : deps\n  hook.memoizedState = [callback, nextDeps]\n  return callback\n}\n\nfunction updateCallback<T>(callback: T, deps: Array<mixed> | void | null): T {\n  const hook = updateWorkInProgressHook()\n  const nextDeps = deps === undefined ? null : deps\n  const prevState = hook.memoizedState\n\n  if (prevState !== null) {\n    if (nextDeps !== null) {\n      const prevDeps: Array<mixed> | null = prevState[1]\n\n      if (areHookInputsEqual(nextDeps, prevDeps))\n        return prevState[0]\n    }\n  }\n\n  hook.memoizedState = [callback, nextDeps]\n  return callback\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"usecallback",children:"useCallback"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"export default function Parent() {\n  const [query, setQuery] = useState('react')\n\n  // \u2705 Preserves identity until query changes\n  const fetchData = useCallback(() => {\n    const url = `https://hn.algolia.com/api/v1/search?query=${query}`\n    // ... Fetch data and return it ...\n  }, [query]) // \u2705 Callback deps are OK\n\n  return <Child fetchData={fetchData} />\n}\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"export default function Child({ fetchData }) {\n  const [data, setData] = useState(null)\n\n  useEffect(() => {\n    fetchData().then(setData)\n  }, [fetchData]) // \u2705 Effect deps are OK\n\n  // ...\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},86145:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>r});var a=t(57140);const l={},s=a.createContext(l);function c(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);