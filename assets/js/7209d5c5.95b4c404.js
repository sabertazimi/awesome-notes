"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[56496],{95807:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>r,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"web/vue/virtual-dom","title":"Virtual DOM","description":"VNode Type:","source":"@site/content/web/vue/virtual-dom.md","sourceDirName":"web/vue","slug":"/web/vue/virtual-dom","permalink":"/notes/web/vue/virtual-dom","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/vue/virtual-dom.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"Vue","permalink":"/notes/tags/vue"},{"inline":true,"label":"Internals","permalink":"/notes/tags/internals"},{"inline":true,"label":"Virtual DOM","permalink":"/notes/tags/virtual-dom"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":26,"frontMatter":{"tags":["Web","Vue","Internals","Virtual DOM"],"sidebar_position":26},"sidebar":"tutorialSidebar","previous":{"title":"Lifecycle","permalink":"/notes/web/vue/lifecycle"},"next":{"title":"Template Compiler","permalink":"/notes/web/vue/template-compiler"}}');var i=t(35656),s=t(86145);const l={tags:["Web","Vue","Internals","Virtual DOM"],sidebar_position:26},a="Virtual DOM",r={},d=[];function c(n){const e={code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"virtual-dom",children:"Virtual DOM"})}),"\n",(0,i.jsx)(e.p,{children:"VNode Type:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"HTML native tag."}),"\n",(0,i.jsx)(e.li,{children:"Plain text."}),"\n",(0,i.jsxs)(e.li,{children:["Component:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Functional component."}),"\n",(0,i.jsxs)(e.li,{children:["Stateful component:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Normal stateful component."}),"\n",(0,i.jsx)(e.li,{children:"Need keep-alive stateful component."}),"\n",(0,i.jsx)(e.li,{children:"Already keep-alive stateful component."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"Fragment."}),"\n",(0,i.jsx)(e.li,{children:"Portal."}),"\n",(0,i.jsx)(e.li,{children:"Suspense."}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"export default class VNode {\n  tag: string | void\n  data: VNodeData | void\n  children: Array<VNode> | null\n  text: string | void\n  elm: Node | void\n  ns: string | void\n  context: Component | void // rendered in this component's scope\n  key: string | number | void\n  componentOptions: VNodeComponentOptions | void\n  componentInstance: Component | void // component instance\n  parent: VNode | void // component placeholder node\n\n  // strictly internal\n  raw: boolean // contains raw HTML? (server only)\n  isStatic: boolean // hoisted static node\n  isRootInsert: boolean // necessary for enter transition check\n  isComment: boolean // empty comment placeholder?\n  isCloned: boolean // is a cloned node?\n  isOnce: boolean // is a v-once node?\n  asyncFactory: Function | void // async component factory function\n  asyncMeta: object | void\n  ssrContext: object | void\n  fnContext: Component | void // real context vm for functional nodes\n  fnOptions: ComponentOptions | null // for SSR caching\n  fnScopeId: string | null // functional scope id support\n\n  constructor(\n    tag?: string,\n    data?: VNodeData,\n    children?: Array<VNode> | null,\n    text?: string,\n    elm?: Node,\n    context?: Component,\n    componentOptions?: VNodeComponentOptions,\n    asyncFactory?: Function\n  ) {\n    this.tag = tag\n    this.data = data\n    this.children = children\n    this.text = text\n    this.elm = elm\n    this.ns = undefined\n    this.context = context\n    this.fnContext = undefined\n    this.fnOptions = undefined\n    this.fnScopeId = undefined\n    this.key = data && data.key\n    this.componentOptions = componentOptions\n    this.componentInstance = undefined\n    this.parent = undefined\n    this.raw = false\n    this.isStatic = false\n    this.isRootInsert = true\n    this.isComment = false\n    this.isCloned = false\n    this.isOnce = false\n    this.asyncFactory = asyncFactory\n    this.asyncMeta = undefined\n    this.isAsyncPlaceholder = false\n  }\n}\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"const VNodeFlags = {\n  ELEMENT_HTML: 1,\n  ELEMENT_SVG: 1 << 1,\n  COMPONENT_STATEFUL_NORMAL: 1 << 2,\n  COMPONENT_STATEFUL_SHOULD_KEEP_ALIVE: 1 << 3,\n  COMPONENT_STATEFUL_KEPT_ALIVE: 1 << 4,\n  COMPONENT_FUNCTIONAL: 1 << 5,\n  TEXT: 1 << 6,\n  FRAGMENT: 1 << 7,\n  PORTAL: 1 << 8,\n}\n\nVNodeFlags.ELEMENT\n  = VNodeFlags.ELEMENT_HTML | VNodeFlags.ELEMENT_SVG\n\nVNodeFlags.COMPONENT_STATEFUL\n  = VNodeFlags.COMPONENT_STATEFUL_NORMAL\n    | VNodeFlags.COMPONENT_STATEFUL_SHOULD_KEEP_ALIVE\n    | VNodeFlags.COMPONENT_STATEFUL_KEPT_ALIVE\n\nVNodeFlags.COMPONENT\n  = VNodeFlags.COMPONENT_STATEFUL | VNodeFlags.COMPONENT_FUNCTIONAL\n\nconst ChildrenFlags = {\n  // \u672a\u77e5\u7684 children \u7c7b\u578b\u3002\n  UNKNOWN_CHILDREN: 0,\n  // \u6ca1\u6709 children\u3002\n  NO_CHILDREN: 1,\n  // children \u662f\u5355\u4e2a VNode\u3002\n  SINGLE_VNODE: 1 << 1,\n  // children \u662f\u591a\u4e2a\u62e5\u6709 key \u7684 VNode\u3002\n  KEYED_VNODES: 1 << 2,\n  // children \u662f\u591a\u4e2a\u6ca1\u6709 key \u7684 VNode\u3002\n  NONE_KEYED_VNODES: 1 << 3,\n}\n\nChildrenFlags.MULTIPLE_VNODES\n  = ChildrenFlags.KEYED_VNODES | ChildrenFlags.NONE_KEYED_VNODES\n\nexport interface VNode {\n  _isVNode: true\n  // Refer to real DOM.\n  el: Element | null\n  flags: VNodeFlags\n  tag: string | FunctionalComponent | ComponentClass | null\n  data: VNodeData | null\n  children: VNodeChildren\n  childFlags: ChildrenFlags\n}\n"})})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(c,{...n})}):c(n)}},86145:(n,e,t)=>{t.d(e,{R:()=>l,x:()=>a});var o=t(57140);const i={},s=o.createContext(i);function l(n){const e=o.useContext(s);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:l(n.components),o.createElement(s.Provider,{value:e},n.children)}}}]);