"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[38809],{97539:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"web/react/toolchain","title":"Toolchain","description":"Micro Frontends","source":"@site/content/web/react/toolchain.md","sourceDirName":"web/react","slug":"/web/react/toolchain","permalink":"/notes/web/react/toolchain","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/react/toolchain.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"React","permalink":"/notes/tags/react"},{"inline":true,"label":"Toolchain","permalink":"/notes/tags/toolchain"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":22,"frontMatter":{"sidebar_position":22,"tags":["Web","React","Toolchain"]},"sidebar":"tutorialSidebar","previous":{"title":"Internationalization","permalink":"/notes/web/react/i18n"},"next":{"title":"Create React App","permalink":"/notes/web/react/cra"}}');var c=i(35656),l=i(86145);const r={sidebar_position:22,tags:["Web","React","Toolchain"]},o="Toolchain",d={},t=[{value:"Micro Frontends",id:"micro-frontends",level:2},{value:"EntryPoint",id:"entrypoint",level:3},{value:"Styles",id:"styles",level:3},{value:"Scripts",id:"scripts",level:3},{value:"Communication",id:"communication",level:3},{value:"Low-Code",id:"low-code",level:2},{value:"Components",id:"components",level:3},{value:"Editor",id:"editor",level:3},{value:"Renderer",id:"renderer",level:3},{value:"Generator",id:"generator",level:3},{value:"React Compiler",id:"react-compiler",level:2},{value:"References",id:"references",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"toolchain",children:"Toolchain"})}),"\n",(0,c.jsx)(n.h2,{id:"micro-frontends",children:"Micro Frontends"}),"\n",(0,c.jsxs)(n.p,{children:["\u901a\u8fc7 ",(0,c.jsx)(n.code,{children:"single-spa"})," \u5305\u88c5\u7684\u4e3b\u5e94\u7528\u662f\u4e00\u4e2a\u57fa\u5ea7,\n\u5b83\u63d0\u4f9b\u76f8\u5e94\u7684\u534f\u8bae,\n\u5b50\u5e94\u7528\u6309\u7167\u534f\u8bae\u8fdb\u884c\u5305\u88c5\u5c31\u53ef\u4ee5\u63a5\u5165\u4e3b\u5e94\u7528.\n\u4e3b\u5e94\u7528\u5c31\u50cf\u63d2\u5ea7,\n\u5b50\u5e94\u7528\u5c31\u50cf\u4e0d\u540c\u7684\u7535\u5668,\n\u53ea\u8981\u9075\u5faa\u67d0\u79cd\u534f\u8bae\u5c31\u53ef\u4ee5\u8f7b\u677e\u5b9e\u73b0\u53ef\u63d2\u62d4\u64cd\u4f5c."]}),"\n",(0,c.jsx)(n.admonition,{title:"Single SPA Lifecycle",type:"tip",children:(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Register."}),"\n",(0,c.jsx)(n.li,{children:"Load."}),"\n",(0,c.jsx)(n.li,{children:"Bootstrap."}),"\n",(0,c.jsx)(n.li,{children:"Mount."}),"\n",(0,c.jsx)(n.li,{children:"Unmount."}),"\n",(0,c.jsx)(n.li,{children:"Unload."}),"\n"]})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"single-spa"})," \u5b50\u9879\u76ee\u7684\u7684\u6302\u8f7d\u3001\u66f4\u65b0\u3001\u5378\u8f7d\u7b49\u64cd\u4f5c,\n\u5e76\u4e0d\u662f ",(0,c.jsx)(n.code,{children:"single-spa"})," \u539f\u751f\u63d0\u4f9b\u7684,\n\u7528\u6237\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u6765\u81ea\u884c\u5b9e\u73b0\u5b50\u5e94\u7528\u7684\u6302\u8f7d, \u5378\u8f7d\u53ca\u66f4\u65b0\u7b49\u903b\u8f91.\n",(0,c.jsx)(n.code,{children:"single-spa"})," \u901a\u8fc7 ",(0,c.jsx)(n.code,{children:"reroute"})," \u548c\u8def\u7531\u63a7\u5236\u6765\u8c03\u7528\u5b50\u5e94\u7528.\n\u5728 ",(0,c.jsx)(n.code,{children:"single-spa"})," \u7684\u5f00\u53d1\u8fc7\u7a0b\u4e2d,\n\u9700\u8981\u81ea\u5df1\u624b\u52a8\u53bb\u5199\u8c03\u7528\u5b50\u5e94\u7528\u7684\u65b9\u6cd5."]}),"\n",(0,c.jsx)(n.h3,{id:"entrypoint",children:"EntryPoint"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["HTML Entry (",(0,c.jsx)(n.code,{children:"import-html-entry"})," from ",(0,c.jsx)(n.code,{children:"qiankun"}),")."]}),"\n",(0,c.jsx)(n.li,{children:"JavaScript Entry."}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"styles",children:"Styles"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Shadow DOM container."}),"\n",(0,c.jsx)(n.li,{children:"CSS module."}),"\n",(0,c.jsx)(n.li,{children:"CSS scoped namespace."}),"\n",(0,c.jsx)(n.li,{children:"CSS selector renaming."}),"\n",(0,c.jsx)(n.li,{children:"CSS in JS."}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"scripts",children:"Scripts"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Snapshot sandbox: \u7c7b\u4f3c\u4e2d\u65ad\u6062\u590d\u673a\u5236, \u5907\u4efd\u5feb\u7167 -> \u5b50\u5e94\u7528\u6302\u8f7d/\u8fd0\u884c/\u5378\u8f7d -> \u6062\u590d\u5feb\u7167."}),"\n",(0,c.jsxs)(n.li,{children:["Proxy sandbox: ",(0,c.jsx)(n.code,{children:"window"})," proxy (",(0,c.jsx)(n.code,{children:"fakeWindow"})," for every sub-app)."]}),"\n",(0,c.jsx)(n.li,{children:"Runtime sandbox."}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"communication",children:"Communication"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Pub-Sub Pattern."}),"\n",(0,c.jsx)(n.li,{children:"Callback registration."}),"\n",(0,c.jsx)(n.li,{children:"Global store."}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"low-code",children:"Low-Code"}),"\n",(0,c.jsx)(n.h3,{id:"components",children:"Components"}),"\n",(0,c.jsxs)(n.p,{children:["\u5229\u7528\u9759\u6001\u89e3\u6790 (",(0,c.jsx)(n.code,{children:"react-docgen-typescript"}),") \u4e0e\u52a8\u6001\u89e3\u6790 (",(0,c.jsx)(n.code,{children:"parse-prop-types"}),")\n\u4ece\u539f\u59cb\u7ec4\u4ef6\u751f\u6210\u5c5e\u6027\u6587\u4ef6, \u5339\u914d\u4f4e\u4ee3\u7801\u7269\u6599\u534f\u8bae\n",(0,c.jsx)(n.a,{href:"https://github.com/alibaba/lowcode-engine/blob/main/packages/types/src/assets.ts",children:(0,c.jsx)(n.code,{children:"assets.json"})}),",\n\u4ece\u800c\u5c06\u539f\u59cb\u7ec4\u4ef6\u8f6c\u5316\u4e3a\u4f4e\u4ee3\u7801\u7ec4\u4ef6."]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"Low-Code Components",src:i(54064).A+"",title:"Low-Code Components",width:"1899",height:"776"})}),"\n",(0,c.jsx)(n.h3,{id:"editor",children:"Editor"}),"\n",(0,c.jsx)(n.p,{children:"\u4f4e\u4ee3\u7801\u7f16\u8f91\u5668\u76ee\u6807:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Layout :\u4f4e\u4ee3\u7801\u7ec4\u4ef6\u5e03\u5c40\u8bbe\u7f6e."}),"\n",(0,c.jsx)(n.li,{children:"Configure: \u4f4e\u4ee3\u7801\u7ec4\u4ef6\u5c5e\u6027\u8bbe\u7f6e."}),"\n",(0,c.jsx)(n.li,{children:"Interactive: \u4f4e\u4ee3\u7801\u7ec4\u4ef6\u903b\u8f91\u8bbe\u7f6e."}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"\u4f4e\u4ee3\u7801\u7f16\u8f91\u5668\u529f\u80fd:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u5bb9\u5668\u8282\u70b9\u529f\u80fd."}),"\n",(0,c.jsx)(n.li,{children:"\u8282\u70b9\u8bbe\u7f6e\u529f\u80fd."}),"\n",(0,c.jsx)(n.li,{children:"\u8282\u70b9\u589e\u5220\u529f\u80fd."}),"\n",(0,c.jsxs)(n.li,{children:["\u8282\u70b9\u79fb\u52a8\u529f\u80fd:\n\u901a\u8fc7 ",(0,c.jsx)(n.code,{children:"__reactInternalInstance$"})," \u627e\u5230\u7ec4\u4ef6\u5bf9\u5e94\u7684 ",(0,c.jsx)(n.code,{children:"fiberNode"}),",\n\u901a\u8fc7 ",(0,c.jsx)(n.code,{children:"fiberNode"})," \u4e0a\u7684 ",(0,c.jsx)(n.code,{children:"stateNode"})," \u83b7\u53d6 DOM \u5b9e\u4f8b,\n\u8c03\u7528 ",(0,c.jsx)(n.code,{children:"getBoundingClientRect"})," \u5f97\u5230\u5177\u4f53\u4f4d\u7f6e\u4fe1\u606f,\n\u5b9e\u73b0\u62d6\u62fd\u5b9a\u4f4d\u529f\u80fd."]}),"\n",(0,c.jsxs)(n.li,{children:["\u8282\u70b9\u5728\u753b\u5e03\u4e0a\u7684\u8f85\u52a9\u529f\u80fd: e.g. ",(0,c.jsx)(n.code,{children:"hover"}),"/",(0,c.jsx)(n.code,{children:"select"}),"/",(0,c.jsx)(n.code,{children:"resize"}),"/",(0,c.jsx)(n.code,{children:"drag"}),"/",(0,c.jsx)(n.code,{children:"drop"}),"."]}),"\n",(0,c.jsx)(n.li,{children:"\u8bbe\u8ba1\u6001\u548c\u6e32\u67d3\u6001\u7684\u5750\u6807\u7cfb\u8f6c\u6362: e.g. \u6eda\u52a8\u76d1\u542c."}),"\n",(0,c.jsx)(n.li,{children:"\u5feb\u6377\u952e\u529f\u80fd."}),"\n",(0,c.jsx)(n.li,{children:"\u5386\u53f2\u529f\u80fd: \u64a4\u9500\u548c\u91cd\u505a."}),"\n",(0,c.jsx)(n.li,{children:"\u7ed3\u6784\u5316\u7684\u63d2\u4ef6\u6269\u5c55\u529f\u80fd."}),"\n",(0,c.jsx)(n.li,{children:"\u539f\u5730\u7f16\u8f91\u529f\u80fd."}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"Low-Code Editor",src:i(62187).A+"",title:"Low-Code Editor",width:"1483",height:"868"})}),"\n",(0,c.jsxs)(n.p,{children:["\u7ecf\u8fc7 ",(0,c.jsx)(n.code,{children:"Editor"})," \u8bbe\u7f6e\u540e, \u751f\u6210\u7b26\u5408\u4e1a\u52a1\u9700\u6c42\u7684\n",(0,c.jsx)(n.a,{href:"https://github.com/alibaba/lowcode-engine/blob/main/packages/types/src/schema.ts",children:(0,c.jsx)(n.code,{children:"schema.json"})}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u9879\u76ee\u6a21\u578b (",(0,c.jsx)(n.code,{children:"Project"}),")."]}),"\n",(0,c.jsxs)(n.li,{children:["\u6587\u6863\u6a21\u578b (",(0,c.jsx)(n.code,{children:"DocumentModel"}),")."]}),"\n",(0,c.jsxs)(n.li,{children:["\u8282\u70b9\u6a21\u578b (",(0,c.jsx)(n.code,{children:"Node"}),"):","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"ReactElement"})," \u53d8\u79cd."]}),"\n",(0,c.jsxs)(n.li,{children:["\u7ba1\u7406 ",(0,c.jsx)(n.code,{children:"Props"}),"/",(0,c.jsx)(n.code,{children:"Node"})," tree."]}),"\n",(0,c.jsxs)(n.li,{children:["\u64cd\u4f5c ",(0,c.jsx)(n.code,{children:"schema.json"})," \u7684\u6700\u4f4e\u7c92\u5ea6."]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\u5c5e\u6027\u6a21\u578b (",(0,c.jsx)(n.code,{children:"Prop"}),"):","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"ReactProp"})," \u53d8\u79cd."]}),"\n",(0,c.jsxs)(n.li,{children:["\u6bcf\u4e00\u4e2a ",(0,c.jsx)(n.code,{children:"Prop"})," \u5bf9\u5e94 ",(0,c.jsx)(n.code,{children:"schema.json"})," ",(0,c.jsx)(n.code,{children:"props"})," \u7684\u4e00\u4e2a\u5b57\u6bb5."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["\u4e00\u4e2a ",(0,c.jsx)(n.code,{children:"Project"})," \u5305\u542b\u82e5\u5e72\u4e2a ",(0,c.jsx)(n.code,{children:"DocumentModel"})," \u5b9e\u4f8b,\n\u6bcf\u4e2a ",(0,c.jsx)(n.code,{children:"DocumentModel"})," \u5305\u542b\u4e00\u7ec4 ",(0,c.jsx)(n.code,{children:"Node"})," \u6784\u6210\u4e00\u9897\u6811,\n\u6bcf\u4e2a ",(0,c.jsx)(n.code,{children:"Node"})," \u901a\u8fc7 ",(0,c.jsx)(n.code,{children:"Props"})," \u5b9e\u4f8b\u7ba1\u7406\u6240\u6709 ",(0,c.jsx)(n.code,{children:"Prop"}),":"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"Low-Code Schema",src:i(145).A+"",title:"Low-Code Schema",width:"1197",height:"951"})}),"\n",(0,c.jsx)(n.h3,{id:"renderer",children:"Renderer"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"\u4f4e\u4ee3\u7801\u6e32\u67d3"}),": \u5c06 ",(0,c.jsx)(n.code,{children:"schema.json"})," \u901a\u8fc7 ",(0,c.jsx)(n.code,{children:"Renderer"})," \u6e32\u67d3\u751f\u6210\u4e1a\u52a1\u9875\u9762."]}),"\n",(0,c.jsx)(n.h3,{id:"generator",children:"Generator"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"\u4f4e\u4ee3\u7801\u51fa\u7801"}),": \u5c06 ",(0,c.jsx)(n.code,{children:"schema.json"})," \u901a\u8fc7 ",(0,c.jsx)(n.code,{children:"Generator"})," \u8f6c\u5316\u751f\u6210\u4e1a\u52a1\u4ee3\u7801."]}),"\n",(0,c.jsx)(n.h2,{id:"react-compiler",children:"React Compiler"}),"\n",(0,c.jsxs)(n.p,{children:["React compiler use ",(0,c.jsx)(n.code,{children:"useMemoCache"})," hook to\nmemoize variables, handlers and elements automatically."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"export default function Hello() {\n  const name = 'Jack'\n\n  return (\n    <div>\n      <p>\n        Hi:\n        {name}\n      </p>\n      <strong>Static Content</strong>\n    </div>\n  )\n}\n"})}),"\n",(0,c.jsx)(n.p,{children:"Compiles to:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"import { unstable_useMemoCache as useMemoCache } from 'react'\n\nexport default function Hello() {\n  const $ = useMemoCache(1)\n  let t0\n\n  if ($[0] === Symbol.for('react.memo_cache_sentinel')) {\n    t0 = __jsx(\n      'div',\n      null,\n      __jsx('p', null, 'Hi:', 'Jack'),\n      __jsx('strong', null, 'Static Content')\n    )\n    $[0] = t0\n  } else {\n    t0 = $[0]\n  }\n\n  return t0\n}\n"})}),"\n",(0,c.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Low-Code engine ",(0,c.jsx)(n.a,{href:"https://developer.aliyun.com/ebook/7507",children:"technical white paper"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},54064:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/low-code-components-2ea2e83ffbfe3b830dee3b95b898afbb.png"},62187:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/low-code-editor-e3ec18131f40132e6dec1a5015263322.png"},145:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/low-code-schema-ae217dd664c075ede7a08ac2f07645be.png"},86145:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var s=i(57140);const c={},l=s.createContext(c);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);