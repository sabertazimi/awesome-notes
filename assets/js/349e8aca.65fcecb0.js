"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[25189],{59646:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"web/react/redux/toolchain","title":"Toolchain","description":"React","source":"@site/content/web/react/redux/toolchain.md","sourceDirName":"web/react/redux","slug":"/web/react/redux/toolchain","permalink":"/notes/web/react/redux/toolchain","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/react/redux/toolchain.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"React","permalink":"/notes/tags/react"},{"inline":true,"label":"Redux","permalink":"/notes/tags/redux"},{"inline":true,"label":"State Management","permalink":"/notes/tags/state-management"},{"inline":true,"label":"Toolchain","permalink":"/notes/tags/toolchain"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5,"tags":["Web","React","Redux","State Management","Toolchain"]},"sidebar":"tutorialSidebar","previous":{"title":"Query","permalink":"/notes/web/react/redux/query"},"next":{"title":"Performance","permalink":"/notes/web/react/redux/performance"}}');var s=n(35656),i=n(86145);const a={sidebar_position:5,tags:["Web","React","Redux","State Management","Toolchain"]},o="Toolchain",c={},l=[{value:"React",id:"react",level:2},{value:"Types",id:"types",level:3},{value:"Hooks",id:"hooks",level:3},{value:"APIs",id:"apis",level:3},{value:"SSR",id:"ssr",level:2},{value:"Library",id:"library",level:2},{value:"Immutable",id:"immutable",level:3},{value:"Middleware",id:"middleware",level:3},{value:"State",id:"state",level:3},{value:"Debugging",id:"debugging",level:3}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"toolchain",children:"Toolchain"})}),"\n",(0,s.jsx)(r.h2,{id:"react",children:"React"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"useSelector"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"useDispatch"}),":\r\ndispatch function reference will be stable\r\nas long as same store instance is being passed to the ",(0,s.jsx)(r.code,{children:"<Provider>"}),"."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"types",children:"Types"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:"import type { TypedUseSelectorHook } from 'react-redux'\r\nimport type store from './store'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\ntype AppDispatch = typeof store.dispatch\r\ntype RootState = ReturnType<typeof store.getState>\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector\n"})}),"\n",(0,s.jsx)(r.h3,{id:"hooks",children:"Hooks"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:"import { shallowEqual, useSelector } from 'react-redux'\r\n\r\nexport default function useShallowEqualSelector(selector) {\r\n  return useSelector(selector, shallowEqual)\r\n}\n"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:"import { useMemo } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nexport default function useActions(actions) {\r\n  const dispatch = useDispatch()\r\n\r\n  return useMemo(() => {\r\n    if (Array.isArray(actions))\r\n      return actions.map(a => bindActionCreators(a, dispatch))\r\n\r\n    return bindActionCreators(actions, dispatch)\r\n  }, [actions, dispatch])\r\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"apis",children:"APIs"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.a,{href:"https://react-redux.js.org/api/batch",children:(0,s.jsx)(r.code,{children:"batch"})}),":"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:"import { batch } from 'react-redux'\r\n\r\nfunction myThunk() {\r\n  return (dispatch, getState) => {\r\n    // Only result in one combined re-render, not two.\r\n    batch(() => {\r\n      dispatch(increment())\r\n      dispatch(increment())\r\n    })\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(r.h2,{id:"ssr",children:"SSR"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Client side:\r\na new Redux store will be created with state provided from server."}),"\n",(0,s.jsx)(r.li,{children:"Server side:\r\nprovide the initial state of app."}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"client.jsx"}),":"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"import { hydrateRoot } from 'react-dom'\r\nimport { Provider } from 'react-redux'\r\nimport { createStore } from 'redux'\r\nimport App from './containers/App'\r\nimport counterApp from './reducers'\r\n\r\nconst preloadedState = window.__PRELOADED_STATE__\r\n\r\ndelete window.__PRELOADED_STATE__\r\n\r\nconst store = createStore(counterApp, preloadedState)\r\n\r\nhydrateRoot(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n)\n"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"server.js"}),":"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"import path from 'node:path'\r\nimport Express from 'express'\r\nimport qs from 'qs'\r\nimport { renderToString } from 'react-dom/server'\r\nimport { Provider } from 'react-redux'\r\nimport { createStore } from 'redux'\r\nimport App from './containers/App'\r\nimport counterApp from './reducers'\r\n\r\nconst app = Express()\r\nconst port = 3000\r\n\r\napp.use('/static', Express.static('static'))\r\n\r\napp.use(handleRender)\r\n\r\nfunction handleRender(req, res) {\r\n  // `parseInt` to prevent XSS attack\r\n  const params = qs.parse(req.query)\r\n  const counter = Number.parseInt(params.counter, 10) || 0\r\n\r\n  const preloadedState = { counter }\r\n  const store = createStore(counterApp, preloadedState)\r\n\r\n  const html = renderToString(\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  )\r\n\r\n  const finalState = store.getState()\r\n  res.send(renderFullPage(html, finalState))\r\n}\r\n\r\nfunction renderFullPage(html, preloadedState) {\r\n  // https://redux.js.org/usage/server-rendering#security-considerations\r\n  // `replace(/</g, '\\\\u003c')` to prevent XSS attack\r\n  return `\r\n    <!doctype html>\r\n    <html>\r\n      <head>\r\n        <title>Redux Universal Example</title>\r\n      </head>\r\n      <body>\r\n        <div id=\"root\">${html}</div>\r\n        <script>\r\n          // WARNING: security issues around embedding JSON in HTML:\r\n          // https://redux.js.org/usage/server-rendering#security-considerations\r\n          window.__PRELOADED_STATE__ = ${JSON.stringify(preloadedState).replace(\r\n            /</g,\r\n            '\\\\u003c'\r\n          )}\r\n        <\/script>\r\n        <script src=\"/static/bundle.js\"><\/script>\r\n      </body>\r\n    </html>\r\n    `\r\n}\r\n\r\napp.listen(port)\n"})}),"\n",(0,s.jsx)(r.h2,{id:"library",children:"Library"}),"\n",(0,s.jsx)(r.h3,{id:"immutable",children:"Immutable"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://github.com/immerjs/immer",children:"Immer"}),":\r\nCreate next immutable state by mutating current one."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://github.com/immutable-js/immutable-js",children:"Immutable.js"}),":\r\nImmutable persistent data collections."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"middleware",children:"Middleware"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://github.com/reduxjs/redux-thunk",children:"Thunk"}),":\r\nAsync actions."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://github.com/yelouafi/redux-saga",children:"Saga"}),":\r\nSide effects."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"state",children:"State"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://github.com/reduxjs/reselect",children:"Reselect"}),":\r\nMemorize state transformation."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"debugging",children:"Debugging"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://github.com/reduxjs/redux-devtools",children:"Devtools"}),":\r\nHot reloading and action replay."]}),"\n"]})]})}function p(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},86145:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>o});var t=n(57140);const s={},i=t.createContext(s);function a(e){const r=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:r},e.children)}}}]);