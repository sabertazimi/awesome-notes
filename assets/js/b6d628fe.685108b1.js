"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[66176],{21797:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>i});const s=JSON.parse('{"id":"web/javascript/destructuring","title":"Destructuring","description":"- \u5efa\u8bae\u53ea\u8981\u6709\u53ef\u80fd, \u5c31\u4e0d\u8981\u5728\u6a21\u5f0f\u4e2d\u653e\u7f6e\u5706\u62ec\u53f7.","source":"@site/content/web/javascript/destructuring.md","sourceDirName":"web/javascript","slug":"/web/javascript/destructuring","permalink":"/notes/web/javascript/destructuring","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/javascript/destructuring.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"JavaScript","permalink":"/notes/tags/java-script"},{"inline":true,"label":"ECMAScript","permalink":"/notes/tags/ecma-script"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":11,"frontMatter":{"sidebar_position":11,"tags":["Web","JavaScript","ECMAScript"]},"sidebar":"tutorialSidebar","previous":{"title":"Operators","permalink":"/notes/web/javascript/operator"},"next":{"title":"Control Flow","permalink":"/notes/web/javascript/control-flow"}}');var r=l(35656),o=l(86145);const t={sidebar_position:11,tags:["Web","JavaScript","ECMAScript"]},a="Destructuring",c={},i=[{value:"Default Value",id:"default-value",level:2},{value:"Object",id:"object",level:2},{value:"JSON",id:"json",level:3},{value:"Import",id:"import",level:3},{value:"Number and Boolean",id:"number-and-boolean",level:3},{value:"Iterator",id:"iterator",level:2},{value:"Map and List",id:"map-and-list",level:3},{value:"String",id:"string",level:3},{value:"Parameters",id:"parameters",level:2},{value:"Return Value",id:"return-value",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"destructuring",children:"Destructuring"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u5efa\u8bae\u53ea\u8981\u6709\u53ef\u80fd, \u5c31\u4e0d\u8981\u5728\u6a21\u5f0f\u4e2d\u653e\u7f6e\u5706\u62ec\u53f7"}),"."]}),"\n",(0,r.jsx)(e.li,{children:"\u8d4b\u503c\u8bed\u53e5\u7684\u975e\u6a21\u5f0f\u90e8\u5206, \u53ef\u4ee5\u4f7f\u7528\u5706\u62ec\u53f7."}),"\n",(0,r.jsxs)(e.li,{children:["Every time access value via ",(0,r.jsx)(e.code,{children:"."}),":\nstop and think whether use destructuring instead."]}),"\n",(0,r.jsx)(e.li,{children:"Destructure as early as possible."}),"\n",(0,r.jsx)(e.li,{children:"Remember to include default values, especially in nested destructuring."}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"default-value",children:"Default Value"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"ES6 \u5185\u90e8\u4f7f\u7528\u4e25\u683c\u76f8\u7b49\u8fd0\u7b97\u7b26 (===), \u5224\u65ad\u4e00\u4e2a\u4f4d\u7f6e\u662f\u5426\u6709\u503c. \u82e5\u6b64\u4f4d\u7f6e\u65e0\u503c, \u5219\u4f7f\u7528\u9ed8\u8ba4\u503c."}),"\n",(0,r.jsx)(e.li,{children:"\u5982\u679c\u4e00\u4e2a\u6570\u7ec4\u6210\u5458\u4e0d\u4e25\u683c\u7b49\u4e8e undefined, \u9ed8\u8ba4\u503c\u4e0d\u4f1a\u751f\u6548."}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const [x = 1] = [undefined]\nconsole.log(x) // 1\n\nconst [x = 1] = [null]\nconsole.log(x) // null\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"let [x = 1, y = x] = [] // x=1; y=1\nlet [x = 1, y = x] = [2] // x=2; y=2\nlet [x = 1, y = x] = [1, 2] // x=1; y=2\nlet [x = y, y = 1] = [] // ReferenceError\n"})}),"\n",(0,r.jsx)(e.h2,{id:"object",children:"Object"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u89e3\u6784\u8d4b\u503c\u7684\u89c4\u5219: \u53ea\u8981\u7b49\u53f7\u53f3\u8fb9\u7684\u503c\u4e0d\u662f\u5bf9\u8c61, \u5c31\u5148\u5c06\u5176",(0,r.jsx)(e.strong,{children:"\u8f6c\u4e3a\u5bf9\u8c61"}),"."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"undefined"}),"/",(0,r.jsx)(e.code,{children:"null"})," \u65e0\u6cd5\u8f6c\u5316\u4e3a\u5bf9\u8c61:"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const { prop: x } = undefined // TypeError\nconst { prop: y } = null // TypeError\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const { bar, foo } = { foo: 'aaa', bar: 'bbb' }\nconsole.log(foo) // \"aaa\"\nconsole.log(bar) // \"bbb\"\n\nconst { baz } = { foo: 'aaa', bar: 'bbb' }\nconsole.log(baz) // undefined\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u771f\u6b63\u88ab\u8d4b\u503c\u7684\u662f\u540e\u8005, \u800c\u4e0d\u662f\u524d\u8005:"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const { foo: baz } = { foo: 'aaa', bar: 'bbb' }\nconsole.log(baz) // \"aaa\"\n\nconst { first: f, last: l } = { first: 'hello', last: 'world' }\nconsole.log(f) // 'hello'\nconsole.log(l) // 'world'\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Left-hand side of a normal assignment:"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const obj = {}\n;[first, ...obj.prop] = ['a', 'b', 'c']\n// first = 'a'; obj.prop = ['b', 'c']\n\nconst arr = []\n;({ bar: arr[0] } = { bar: true })\nconsole.log(arr) // [true]\n"})}),"\n",(0,r.jsx)(e.h3,{id:"json",children:"JSON"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const jsonData = {\n  id: 42,\n  status: 'OK',\n  data: [867, 5309],\n}\n\nconst { id, status, data: number } = jsonData\n\nconsole.log(id, status, number)\n// 42, \"OK\", [867, 5309]\n"})}),"\n",(0,r.jsx)(e.h3,{id:"import",children:"Import"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const { SourceMapConsumer, SourceNode } = require('source-map')\n"})}),"\n",(0,r.jsx)(e.h3,{id:"number-and-boolean",children:"Number and Boolean"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"number"}),"/",(0,r.jsx)(e.code,{children:"boolean"})," \u4f1a\u81ea\u52a8\u6784\u9020\u539f\u59cb\u503c\u5305\u88c5\u5bf9\u8c61:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"let { toString: s } = 123\nconst truthy = s === Number.prototype.toString // true\n\nlet { toString: s } = true\nconst truthy = s === Boolean.prototype.toString // true\n"})}),"\n",(0,r.jsx)(e.h2,{id:"iterator",children:"Iterator"}),"\n",(0,r.jsx)(e.p,{children:"\u7b49\u53f7\u53f3\u8fb9\u5fc5\u987b\u4e3a\u6570\u7ec4\u7b49\u5b9e\u73b0\u4e86 Iterator \u63a5\u53e3\u7684\u5bf9\u8c61, \u5426\u5219\u62a5\u9519:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Array."}),"\n",(0,r.jsx)(e.li,{children:"Set."}),"\n",(0,r.jsx)(e.li,{children:"Generator function."}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const [foo, [[bar], baz]] = [1, [[2], 3]]\nconsole.log(foo) // 1\nconsole.log(bar) // 2\nconsole.log(baz) // 3\n\nconst [, , third] = ['foo', 'bar', 'baz']\nconsole.log(third) // \"baz\"\n\nconst [x, , y] = [1, 2, 3]\nconsole.log(x) // 1\nconsole.log(y) // 3\n\nconst [head, ...tail] = [1, 2, 3, 4]\nconsole.log(head) // 1\nconsole.log(tail) // [2, 3, 4]\n\nconst [x, y, ...z] = ['a']\nconsole.log(x) // \"a\"\nconsole.log(y) // undefined\nconsole.log(z) // []\n\n// Generator \u51fd\u6570\nfunction* fibs() {\n  let a = 0\n  let b = 1\n\n  while (true) {\n    yield a\n    ;[a, b] = [b, a + b]\n  }\n}\n\nconst [first, second, third, fourth, fifth, sixth] = fibs()\nconsole.log(sixth) // 5\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Left-hand side of a normal assignment:"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"let x = 1\nlet y = 2\n;[x, y] = [y, x]\n"})}),"\n",(0,r.jsx)(e.h3,{id:"map-and-list",children:"Map and List"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"for index in Iterable<T>"}),": key."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"for [key, value] of Iterable<T>"}),": entry."]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const map = new Map()\nmap.set('first', 'hello')\nmap.set('second', 'world')\n\nfor (const [key, value] of map)\n  console.log(`${key} is ${value}`)\n\n// first is hello\n// second is world\n\n// \u83b7\u53d6\u952e\u540d\nfor (const [key] of map) {\n  // ...\n}\n\n// \u83b7\u53d6\u952e\u503c\nfor (const [, value] of map) {\n  // ...\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"string",children:"String"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:'const [a, b, c, d, e] = \'hello\'\nconsole.log(a) // "h"\nconsole.log(b) // "e"\nconsole.log(c) // "l"\nconsole.log(d) // "l"\nconsole.log(e) // "o"\n\nconst { length: len } = \'hello\'\nconsole.log(len) // 5\n'})}),"\n",(0,r.jsx)(e.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u53ef\u7528\u4e8e\u5de5\u5382 (",(0,r.jsx)(e.code,{children:"factory"}),") / \u8bbe\u7f6e (",(0,r.jsx)(e.code,{children:"options"}),") \u6a21\u5f0f\u4f20\u53c2\u4e00\u822c\u4e3a ",(0,r.jsx)(e.code,{children:"options"})," \u5bf9\u8c61,"]}),"\n",(0,r.jsx)(e.li,{children:"\u5177\u6709\u56fa\u5b9a\u7684\u5c5e\u6027\u540d."}),"\n",(0,r.jsx)(e.li,{children:"\u4e00\u6b21\u6027\u5b9a\u4e49\u591a\u4e2a\u53c2\u6570."}),"\n",(0,r.jsx)(e.li,{children:"\u4e00\u6b21\u6027\u5b9a\u4e49\u591a\u4e2a\u53c2\u6570\u7684\u9ed8\u8ba4\u503c."}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// \u53c2\u6570\u662f\u4e00\u7ec4\u6709\u6b21\u5e8f\u7684\u503c\nfunction f1([x, y, z]) {}\nf1([1, 2, 3])\n\n// \u53c2\u6570\u662f\u4e00\u7ec4\u65e0\u6b21\u5e8f\u7684\u503c\nfunction f2({ x, y, z }) {}\nf2({ z: 3, y: 2, x: 1 })\n\n// \u53ef\u7701\u7565 const foo = config.foo || 'default foo';\njQuery.ajax = function (\n  url,\n  {\n    async = true,\n    beforeSend = function () {},\n    cache = true,\n    complete = function () {},\n    crossDomain = false,\n    global = true,\n    // ... more config\n  }\n) {\n  // ... do stuff\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"return-value",children:"Return Value"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd4\u56de\u591a\u4e2a\u503c:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// \u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\nfunction example1() {\n  return [1, 2, 3]\n}\n\nconst [a, b, c] = example1()\n\n// \u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\nfunction example2() {\n  return {\n    foo: 1,\n    bar: 2,\n  }\n}\n\nconst { foo, bar } = example2()\n"})})]})}function u(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},86145:(n,e,l)=>{l.d(e,{R:()=>t,x:()=>a});var s=l(57140);const r={},o=s.createContext(r);function t(n){const e=s.useContext(o);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:t(n.components),s.createElement(o.Provider,{value:e},n.children)}}}]);