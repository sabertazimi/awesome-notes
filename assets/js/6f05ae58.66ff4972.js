"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[88735],{48312:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>u,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"language/rust/system","title":"System","description":"Process","source":"@site/content/language/rust/system.md","sourceDirName":"language/rust","slug":"/language/rust/system","permalink":"/notes/language/rust/system","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/language/rust/system.md","tags":[{"inline":true,"label":"Language","permalink":"/notes/tags/language"},{"inline":true,"label":"Rust","permalink":"/notes/tags/rust"},{"inline":true,"label":"System","permalink":"/notes/tags/system"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":24,"frontMatter":{"sidebar_position":24,"tags":["Language","Rust","System"]},"sidebar":"tutorialSidebar","previous":{"title":"I/O","permalink":"/notes/language/rust/io"},"next":{"title":"Testing","permalink":"/notes/language/rust/testing"}}');var r=t(35656),i=t(86145);const o={sidebar_position:24,tags:["Language","Rust","System"]},a="System",u={},c=[{value:"Process",id:"process",level:2},{value:"Command Line",id:"command-line",level:2}];function l(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"system",children:"System"})}),"\n",(0,r.jsx)(e.h2,{id:"process",children:"Process"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'use std::process::Command;\n\nfn main() {\n    let output = Command::new("rustc")\n        .arg("--version")\n        .output().unwrap_or_else(|e| {\n            panic!("failed to execute process: {}", e)\n    });\n\n    if output.status.success() {\n        let s = String::from_utf8_lossy(&output.stdout);\n        print!("rustc succeeded and stdout was:\\n{}", s);\n    } else {\n        let s = String::from_utf8_lossy(&output.stderr);\n        print!("rustc failed and stderr was:\\n{}", s);\n    }\n}\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'use std::error::Error;\nuse std::io::prelude::*;\nuse std::process::{Command, Stdio};\n\nstatic PROGRAM: &\'static str =\n"the quick brown fox jumped over the lazy dog\\n";\n\nfn main() {\n    let process = match Command::new("wc")\n                                .stdin(Stdio::piped())\n                                .stdout(Stdio::piped())\n                                .spawn() {\n        Err(why) => panic!("couldn\'t spawn wc: {}", why.description()),\n        Ok(process) => process,\n    };\n\n    match process.stdin.unwrap().write_all(PROGRAM.as_bytes()) {\n        Err(why) => panic!("couldn\'t write to wc stdin: {}",\n                           why.description()),\n        Ok(_) => println!("sent program to wc"),\n    }\n\n    let mut s = String::new();\n    match process.stdout.unwrap().read_to_string(&mut s) {\n        Err(why) => panic!("couldn\'t read wc stdout: {}",\n                           why.description()),\n        Ok(_) => print!("wc responded with:\\n{}", s),\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"command-line",children:"Command Line"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'\nuse std::env;\nuse std::error::Error;\nuse std::fs;\nuse std::process;\n\npub struct Config {\n    pub query: String,\n    pub filename: String,\n    pub case_sensitive: bool,\n}\n\nimpl Config {\n    pub fn new(args: &[String]) -> Result<Config, &\'static str> {\n        if args.len() < 3 {\n            return Err("not enough arguments");\n        }\n\n        let query = args[1].clone();\n        let filename = args[2].clone();\n\n        let case_sensitive = env::var("CASE_INSENSITIVE").is_err();\n\n        Ok(Config {\n            query,\n            filename,\n            case_sensitive,\n        })\n    }\n}\n\npub fn run(config: Config) -> Result<(), Box<dyn Error>> {\n    let contents = fs::read_to_string(config.filename)?;\n\n    let results = if config.case_sensitive {\n        search(&config.query, &contents)\n    } else {\n        search_case_insensitive(&config.query, &contents)\n    };\n\n    for line in results {\n        println!("{}", line);\n    }\n\n    Ok(())\n}\n\npub fn search<\'a>(query: &str, contents: &\'a str) -> Vec<&\'a str> {\n    let mut results = Vec::new();\n\n    for line in contents.lines() {\n        if line.contains(query) {\n            results.push(line);\n        }\n    }\n\n    results\n}\n\npub fn search_case_insensitive<\'a>(\n    query: &str,\n    contents: &\'a str,\n) -> Vec<&\'a str> {\n    let query = query.to_lowercase();\n    let mut results = Vec::new();\n\n    for line in contents.lines() {\n        if line.to_lowercase().contains(&query) {\n            results.push(line);\n        }\n    }\n\n    results\n}\n\nfn main() {\n    let args: Vec<String> = env::args().collect();\n\n    let config = Config::new(&args).unwrap_or_else(|err| {\n        eprintln!("Problem parsing arguments: {}", err);\n        process::exit(1);\n    });\n\n    if let Err(e) = run(config) {\n        eprintln!("Application error: {}", e);\n\n        process::exit(1);\n    }\n}\n'})})]})}function d(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(l,{...n})}):l(n)}},86145:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>a});var s=t(57140);const r={},i=s.createContext(r);function o(n){const e=s.useContext(i);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);