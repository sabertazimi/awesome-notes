"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[47986],{64259:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"web/css/transition","title":"Transition","description":"Property","source":"@site/content/web/css/transition.md","sourceDirName":"web/css","slug":"/web/css/transition","permalink":"/notes/web/css/transition","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/css/transition.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"CSS","permalink":"/notes/tags/css"},{"inline":true,"label":"Animation","permalink":"/notes/tags/animation"},{"inline":true,"label":"Transition","permalink":"/notes/tags/transition"},{"inline":true,"label":"Internals","permalink":"/notes/tags/internals"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":41,"frontMatter":{"sidebar_position":41,"tags":["Web","CSS","Animation","Transition","Internals"]},"sidebar":"tutorialSidebar","previous":{"title":"Transform","permalink":"/notes/web/css/transform"},"next":{"title":"Animation","permalink":"/notes/web/css/animation"}}');var t=i(35656),r=i(86145);const a={sidebar_position:41,tags:["Web","CSS","Animation","Transition","Internals"]},c="Transition",o={},l=[{value:"Property",id:"property",level:2},{value:"Timing Function",id:"timing-function",level:2},{value:"Direction",id:"direction",level:2},{value:"Class Controls",id:"class-controls",level:2},{value:"<code>@starting-style</code>",id:"starting-style",level:2},{value:"Specificity",id:"specificity",level:3},{value:"APIs",id:"apis",level:2},{value:"Internals",id:"internals",level:2},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"transition",children:"Transition"})}),"\n",(0,t.jsx)(n.h2,{id:"property",children:"Property"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"transition-property"}),": ",(0,t.jsx)(n.code,{children:"all"})," (initial value)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"transition-duration"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"transition-timing-function"}),": ",(0,t.jsx)(n.code,{children:"<easing-function>"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"transition-delay"}),": \u652f\u6301\u8d1f\u503c."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:".element {\n  transition: all 0s ease 0s;\n  transition: transform 0.5s ease-in-out 0.2s;\n}\n\n@media only screen and (prefers-reduced-motion: reduce) {\n  .element {\n    transition: none;\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.admonition,{title:"Transition Background Images",type:"tip",children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"transition"})," \u65e0\u6cd5\u5bf9 CSS \u80cc\u666f\u56fe\u50cf (\u5982\u6e10\u53d8\u6548\u679c) \u8d77\u6548:"]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u53ef\u4ee5\u901a\u8fc7 ",(0,t.jsx)(n.code,{children:"opacity"}),"/",(0,t.jsx)(n.code,{children:"background-position"})," ",(0,t.jsx)(n.a,{href:"https://codepen.io/chriscoyier/pen/eRbLWP",children:"\u95f4\u63a5\u5b9e\u73b0"}),"\u6e10\u53d8\u56fe\u50cf\u7684\u8fc7\u6e21\u52a8\u753b."]}),"\n",(0,t.jsxs)(n.li,{children:["\u53ef\u4ee5\u901a\u8fc7 CSS Houdini ",(0,t.jsx)(n.code,{children:"@property"})," ",(0,t.jsx)(n.a,{href:"https://juejin.cn/post/6951201528543707150",children:"\u5feb\u901f\u5b9e\u73b0"}),"\u6e10\u53d8\u56fe\u50cf\u7684\u8fc7\u6e21\u52a8\u753b."]}),"\n"]})]}),"\n",(0,t.jsx)(n.h2,{id:"timing-function",children:"Timing Function"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/CSS/easing-function",children:(0,t.jsx)(n.code,{children:"<easing-function>"})}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"liner"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<cubic-bezier-timing-function>"}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ease"}),": ",(0,t.jsx)(n.code,{children:"cubic-bezier(0.25, 0.1, 0.25, 1.0)"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ease-in"}),": ",(0,t.jsx)(n.code,{children:"cubic-bezier(0.42, 0, 1.0, 1.0)"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ease-out"}),": ",(0,t.jsx)(n.code,{children:"cubic-bezier(0, 0, 0.58, 1.0)"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ease-in-out"}),": ",(0,t.jsx)(n.code,{children:"cubic-bezier(0.42, 0, 0.58, 1.0)"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cubic-bezier(<number [0,1]>, <number>, <number [0,1]>, <number>)"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<step-timing-function>"}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"step-start"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"step-end"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"steps(<integer>[, jump-start | jump-end | jump-none | jump-both | start | end]?)"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["\u53ef\u7528\nanimated ",(0,t.jsx)(n.code,{children:"background-position"})," + ",(0,t.jsx)(n.code,{children:"<step-timing-function>"})," + image sprites\n",(0,t.jsx)(n.a,{href:"https://demo.cssworld.cn/new/5/4-6.php",children:"\u6a21\u62df GIFs"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:":root {\n  --ease-in-quad: cubic-bezier(0.55, 0.085, 0.68, 0.53);\n  --ease-in-cubic: cubic-bezier(0.55, 0.055, 0.675, 0.19);\n  --ease-in-quart: cubic-bezier(0.895, 0.03, 0.685, 0.22);\n  --ease-in-quint: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n  --ease-in-expo: cubic-bezier(0.95, 0.05, 0.795, 0.035);\n  --ease-in-circ: cubic-bezier(0.6, 0.04, 0.98, 0.335);\n  --ease-out-quad: cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  --ease-out-cubic: cubic-bezier(0.215, 0.61, 0.355, 1);\n  --ease-out-quart: cubic-bezier(0.165, 0.84, 0.44, 1);\n  --ease-out-quint: cubic-bezier(0.23, 1, 0.32, 1);\n  --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);\n  --ease-out-circ: cubic-bezier(0.075, 0.82, 0.165, 1);\n  --ease-in-out-quad: cubic-bezier(0.455, 0.03, 0.515, 0.955);\n  --ease-in-out-cubic: cubic-bezier(0.645, 0.045, 0.355, 1);\n  --ease-in-out-quart: cubic-bezier(0.77, 0, 0.175, 1);\n  --ease-in-out-quint: cubic-bezier(0.86, 0, 0.07, 1);\n  --ease-in-out-expo: cubic-bezier(l, 0, 0, 1);\n  --ease-in-out-circ: cubic-bezier(0.785, 0.135, 0.15, 0.86);\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://css-tricks.com/clever-uses-step-easing",children:(0,t.jsx)(n.img,{alt:"Step Timing Function",src:i(12707).A+"",width:"778",height:"802"})})}),"\n",(0,t.jsx)(n.h2,{id:"direction",children:"Direction"}),"\n",(0,t.jsx)(n.p,{children:'By specifying the transition on the element itself,\ndefine the transition to occur in both directions\n(hover on "enter" and hover off "exit").'}),"\n",(0,t.jsxs)(n.p,{children:["Change ",(0,t.jsx)(n.code,{children:"transition"})," when ",(0,t.jsx)(n.code,{children:":hover"})," etc state bring magic effect:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:".menu-nav {\n  visibility: hidden;\n  transform: translateX(-100%);\n  transition: all 0.4s ease-in-out; /* Exit transition */\n}\n\n.menu-link {\n  opacity: 0;\n  transition: opacity 0.4s ease-in-out; /* Exit transition */\n}\n\n.menu-toggle:checked ~ .menu-nav {\n  visibility: visible;\n  transform: translateX(0);\n}\n\n.menu-toggle:checked ~ .menu-nav .menu-link {\n  opacity: 1;\n\n  /* Magic effect for delaying enter transition */\n  transition: opacity 0.4s ease-in-out 0.4s;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"class-controls",children:"Class Controls"}),"\n",(0,t.jsxs)(n.p,{children:["With ",(0,t.jsx)(n.code,{children:"transition: opacity 0.5s"})," set,\nfirst add ",(0,t.jsx)(n.code,{children:".opacity-0"})," class,\nthen replace it with ",(0,t.jsx)(n.code,{children:".opacity-1"})," class.\nTransition animation get trigger\nas css style of element changed (class changed):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:"@media only screen and (prefers-reduced-motion: reduce) {\n  .element {\n    transition: none;\n  }\n}\n\n.element {\n  transition: opacity 0.5s;\n}\n\n/* before-enter -> enter -> before-leave -> leave */\n.enter,\n.before-leave {\n  opacity: 1;\n}\n\n.leave,\n.before-enter {\n  opacity: 0;\n}\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"div.classList.add('before-enter')\n\nsetTimeout(() => {\n  div.classList.remove('before-enter')\n  div.classList.add('enter')\n}, 20)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"starting-style",children:(0,t.jsx)(n.code,{children:"@starting-style"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://www.joshwcomeau.com/css/starting-style",children:(0,t.jsx)(n.code,{children:"@starting-style"})}),"\nfor defining starting styles of elements:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:"/* Staggered fade-in */\nli {\n  transition: opacity 0.3s ease;\n  transition-delay: calc((sibling-index() - 1) * 100ms);\n\n  @starting-style {\n    opacity: 0;\n  }\n}\n"})}),"\n",(0,t.jsx)(n.admonition,{title:"Enter Animations",type:"tip",children:(0,t.jsxs)(n.p,{children:["Previously, enter animations required CSS keyframes.\nWith ",(0,t.jsx)(n.code,{children:"@starting-style"}),", elements transition from starting styles to computed styles upon creation."]})}),"\n",(0,t.jsx)(n.h3,{id:"specificity",children:"Specificity"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Unlike keyframe animations"}),", ",(0,t.jsx)(n.code,{children:"@starting-style"})," declarations are ",(0,t.jsx)(n.strong,{children:"not promoted"})," to high-priority layer.\nStandard specificity rules apply, which can cause enter animation to fail:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:"/* This won't work - #title overrides h1's starting-style */\nh1 {\n  transition: opacity 500ms;\n\n  @starting-style {\n    opacity: 0;\n  }\n}\n\n#title {\n  opacity: 1; /* More specific, so no transition occurs */\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Similarly, inline styles (set via JavaScript) have higher specificity than class-based starting styles:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:".particle {\n  transition: transform 500ms;\n\n  @starting-style {\n    transform: translate(0, 0); /* Won't apply! */\n  }\n}\n\n/* particle.style.transform = 'translate(42px, -55px)'; wins */\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.strong,{children:"custom properties"})," to avoid specificity conflicts elegantly:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:".particle {\n  transform: translate(var(--x), var(--y));\n  transition: transform 500ms;\n\n  @starting-style {\n    transform: translate(0, 0);\n  }\n}\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"particle.style.setProperty('--x', '42px')\nparticle.style.setProperty('--y', '-55px')\n"})}),"\n",(0,t.jsx)(n.admonition,{title:"Interrupt Handling",type:"tip",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"@starting-style"})," handles animation interrupts better than keyframes.\nWhen user quickly opens/closes a dialog, it gracefully fades from interrupted state,\nwhile keyframes may cause flickering."]})}),"\n",(0,t.jsx)(n.h2,{id:"apis",children:"APIs"}),"\n",(0,t.jsxs)(n.p,{children:["CSS view transitions ",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/View_Transitions_API",children:"API"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"/**\n * ::view-transition\n * \u2514\u2500 ::view-transition-group(root)\n *    \u2514\u2500 ::view-transition-image-pair(root)\n *       \u251c\u2500 ::view-transition-old(root)\n *       \u2514\u2500 ::view-transition-new(root)\n * Old page view animates from opacity 1 to 0,\n * while the new view animates from opacity 0 to 1,\n * which is what creates the default cross-fade.\n */\nfunction updateView(event) {\n  // Handle the difference in whether the event is fired on the <a> or the <img>.\n  const targetIdentifier = event.target.firstChild || event.target\n\n  const displayNewImage = () => {\n    const mainSrc = `${targetIdentifier.src.split('_th.jpg')[0]}.jpg`\n    galleryImg.src = mainSrc\n    galleryCaption.textContent = targetIdentifier.alt\n  }\n\n  // Fallback for browsers that don't support View Transitions:\n  if (!document.startViewTransition) {\n    displayNewImage()\n    return\n  }\n\n  // With View Transitions:\n  const transition = document.startViewTransition(() => displayNewImage())\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"internals",children:"Internals"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"transition"})," take effect only when\nbrowser detecting different styles between ",(0,t.jsx)(n.code,{children:"style"})," stage."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"// transition not working\npanel.style.transform = 'scale(0)'\npanel.style.transition = 'transform .5s'\n// previous `transform` is empty\npanel.style.transform = 'scale(1)'\n\n// transition working\npanel.style.transform = 'scale(0)'\npanel.style.transition = 'transform .5s'\n// previous `transform` is `scale(0)`\nrequestAnimationFrame(() => {\n  panel.style.transform = 'scale(1)'\n})\n\n// transition working\npanel.style.transform = 'scale(0)'\n// `getComputedStyle(element).property` trigger a new `style` stage\nconst computedTransform = getComputedStyle(panel).transform\npanel.style.transition = 'transform .5s'\n// previous `transform` is `scale(0)`\npanel.style.transform = 'scale(1)'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Transition 101 ",(0,t.jsx)(n.a,{href:"https://zellwk.com/blog/css-transitions",children:"guide"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},12707:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/step-timing-function-08df977f586b804e7fb8a22062f534f6.png"},86145:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>c});var s=i(57140);const t={},r=s.createContext(t);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);