"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[28923],{68549:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>b,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"programming/design/patterns/observer","title":"Observer","description":"- \u88ab\u89c2\u5bdf\u8005 (Subject) \u7ef4\u62a4\u4e00\u7ec4\u89c2\u5bdf\u8005\u5217\u8868,","source":"@site/content/programming/design/patterns/observer.md","sourceDirName":"programming/design/patterns","slug":"/programming/design/patterns/observer","permalink":"/notes/programming/design/patterns/observer","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/programming/design/patterns/observer.md","tags":[{"inline":true,"label":"Programming","permalink":"/notes/tags/programming"},{"inline":true,"label":"Design","permalink":"/notes/tags/design"},{"inline":true,"label":"Design Pattern","permalink":"/notes/tags/design-pattern"},{"inline":true,"label":"Behavioral Pattern","permalink":"/notes/tags/behavioral-pattern"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":17,"frontMatter":{"sidebar_position":17,"tags":["Programming","Design","Design Pattern","Behavioral Pattern"]},"sidebar":"tutorialSidebar","previous":{"title":"Mediator","permalink":"/notes/programming/design/patterns/mediator"},"next":{"title":"Pub-Sub","permalink":"/notes/programming/design/patterns/pub-sub"}}');var s=r(35656),i=r(86145);const o={sidebar_position:17,tags:["Programming","Design","Design Pattern","Behavioral Pattern"]},a="Observer",d={},l=[];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",header:"header",li:"li",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"observer",children:"Observer"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u88ab\u89c2\u5bdf\u8005 (",(0,s.jsx)(n.code,{children:"Subject"}),") \u7ef4\u62a4\u4e00\u7ec4\u89c2\u5bdf\u8005\u5217\u8868,\n\u6bcf\u5f53\u88ab\u89c2\u5bdf\u8005\u72b6\u6001\u6539\u53d8\u65f6,\n\u8c03\u7528 ",(0,s.jsx)(n.code,{children:"notify"})," \u51fd\u6570,\n\u6b64\u51fd\u6570\u904d\u5386\u8c03\u7528\u89c2\u5bdf\u8005 (",(0,s.jsx)(n.code,{children:"Observer"}),") \u7684 ",(0,s.jsx)(n.code,{children:"update"})," \u51fd\u6570 (\u81ea\u5b9a\u4e49\u903b\u8f91)."]}),"\n",(0,s.jsxs)(n.li,{children:["Decouple ",(0,s.jsx)(n.code,{children:"Subject"})," and ",(0,s.jsx)(n.code,{children:"Observer"}),":\neach depends on ",(0,s.jsx)(n.code,{children:"Abstraction"})," not ",(0,s.jsx)(n.code,{children:"Implementation"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"\u6446\u8131\u6301\u7eed\u8f6e\u8be2\u6a21\u5f0f, \u5728\u5408\u9002\u65f6\u673a\u53d1\u5e03\u6d88\u606f."}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Observer Use Case",type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Decouple."}),"\n",(0,s.jsx)(n.li,{children:"\u8de8\u5c42\u7ea7\u901a\u4fe1."}),"\n",(0,s.jsx)(n.li,{children:"Message channel."}),"\n",(0,s.jsx)(n.li,{children:"\u5f02\u6b65\u7f16\u7a0b."}),"\n",(0,s.jsx)(n.li,{children:"Event handling."}),"\n"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"class ObserverList {\n  constructor() {\n    this.observerList = []\n  }\n\n  add(obj) {\n    return this.observerList.push(obj)\n  }\n\n  count() {\n    return this.observerList.length\n  }\n\n  get(index) {\n    if (index > -1 && index < this.observerList.length)\n      return this.observerList[index]\n  }\n\n  indexOf(obj, startIndex) {\n    let i = startIndex\n\n    while (i < this.observerList.length) {\n      if (this.observerList[i] === obj)\n        return i\n\n      i++\n    }\n\n    return -1\n  }\n\n  removeAt(index) {\n    this.observerList.splice(index, 1)\n  }\n}\n\nclass Subject {\n  constructor() {\n    this.observers = new ObserverList()\n  }\n\n  addObserver(observer) {\n    this.observers.add(observer)\n  }\n\n  removeObserver(observer) {\n    this.observers.removeAt(this.observers.indexOf(observer, 0))\n  }\n\n  notify(context) {\n    const observerCount = this.observers.count()\n\n    for (let i = 0; i < observerCount; i++)\n      this.observers.get(i).update(context)\n  }\n}\n\nclass Observer {\n  update(context) {}\n}\n"})})]})}function b(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},86145:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var t=r(57140);const s={},i=t.createContext(s);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);