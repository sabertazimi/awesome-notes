"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[61568],{85186:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"web/react/hooks/lifecycle","title":"Lifecycle","description":"ComponentDidMount","source":"@site/content/web/react/hooks/lifecycle.md","sourceDirName":"web/react/hooks","slug":"/web/react/hooks/lifecycle","permalink":"/notes/web/react/hooks/lifecycle","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/react/hooks/lifecycle.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"React","permalink":"/notes/tags/react"},{"inline":true,"label":"Hook","permalink":"/notes/tags/hook"},{"inline":true,"label":"Lifecycle","permalink":"/notes/tags/lifecycle"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":20,"frontMatter":{"sidebar_position":20,"tags":["Web","React","Hook","Lifecycle"]},"sidebar":"tutorialSidebar","previous":{"title":"Utility","permalink":"/notes/web/react/hooks/utility"},"next":{"title":"Event","permalink":"/notes/web/react/hooks/event"}}');var c=t(35656),s=t(86145);const r={sidebar_position:20,tags:["Web","React","Hook","Lifecycle"]},i="Lifecycle",u={},a=[{value:"ComponentDidMount",id:"componentdidmount",level:2},{value:"ComponentWillUnmount",id:"componentwillunmount",level:2},{value:"ComponentDidUpdate",id:"componentdidupdate",level:2},{value:"Force Update",id:"force-update",level:2},{value:"Mounted",id:"mounted",level:2},{value:"Previous",id:"previous",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"lifecycle",children:"Lifecycle"})}),"\n",(0,c.jsx)(n.h2,{id:"componentdidmount",children:"ComponentDidMount"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:"function useMount(fn) {\n  useEffect(() => fn(), [])\n}\n"})}),"\n",(0,c.jsx)(n.h2,{id:"componentwillunmount",children:"ComponentWillUnmount"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:"function useUnmount(fn) {\n  useEffect(() => fn, [])\n}\n"})}),"\n",(0,c.jsx)(n.h2,{id:"componentdidupdate",children:"ComponentDidUpdate"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:"function useUpdate(effectCallback) {\n  const mounting = useRef(true)\n\n  useEffect(() => {\n    // First get called for componentDidMount lifecycle,\n    // so skip it.\n    if (mounting.current)\n      mounting.current = false\n    else\n      return effectCallback()\n  })\n}\n\nfunction useUpdateDeps(effectCallback, deps) {\n  const mounting = useRef(true)\n\n  React.useEffect(() => {\n    return () => {\n      mounting.current = true\n    }\n  }, [])\n\n  React.useEffect(() => {\n    // Do not execute effectCallback for the first time.\n    if (mounting.current)\n      mounting.current = false\n    else\n      return effectCallback()\n  }, deps)\n}\n"})}),"\n",(0,c.jsx)(n.h2,{id:"force-update",children:"Force Update"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:"const useUpdate = () => useState(0)[1]\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:"import { useState } from 'react'\n\ninterface VoidFunction {\n  (): void\n}\n\ninterface VoidFunctionCreator {\n  (): VoidFunction\n}\n\nconst max = 9007199254740990 // Number.MAX_SAFE_INTEGER - 1;\n\nconst useForceUpdate: VoidFunctionCreator = (): VoidFunction => {\n  const [, setState] = useState(0)\n  const forceUpdate: VoidFunction = (): void => {\n    setState((state: number) => (state + 1) % max)\n  }\n  return forceUpdate\n}\n\nexport default useForceUpdate\n"})}),"\n",(0,c.jsx)(n.h2,{id:"mounted",children:"Mounted"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:"function useIsMounted() {\n  const [isMount, setIsMount] = useState(false)\n\n  useEffect(() => {\n    if (!isMount) {\n      setIsMount(true)\n    }\n\n    return () => setIsMount(false)\n  }, [])\n\n  return isMount\n}\n"})}),"\n",(0,c.jsx)(n.h2,{id:"previous",children:"Previous"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"export default function Counter() {\n  const [count, setCount] = useState(0)\n  const prevCount = usePrevious(count)\n  return (\n    <h1>\n      Now:\n      {' '}\n      {count}\n      , before:\n      {' '}\n      {prevCount}\n    </h1>\n  )\n}\n\nfunction usePrevious(value) {\n  const ref = useRef()\n  useEffect(() => {\n    ref.current = value\n  })\n  return ref.current\n}\n"})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(l,{...e})}):l(e)}},86145:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>i});var o=t(57140);const c={},s=o.createContext(c);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);