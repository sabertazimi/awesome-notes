"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[48070],{2044:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"programming/design/patterns/factory-method","title":"Factory Method","description":"Creating objects without specify exact object class:","source":"@site/content/programming/design/patterns/factory-method.md","sourceDirName":"programming/design/patterns","slug":"/programming/design/patterns/factory-method","permalink":"/notes/programming/design/patterns/factory-method","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/programming/design/patterns/factory-method.md","tags":[{"inline":true,"label":"Programming","permalink":"/notes/tags/programming"},{"inline":true,"label":"Design","permalink":"/notes/tags/design"},{"inline":true,"label":"Design Pattern","permalink":"/notes/tags/design-pattern"},{"inline":true,"label":"Creation Pattern","permalink":"/notes/tags/creation-pattern"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"tags":["Programming","Design","Design Pattern","Creation Pattern"]},"sidebar":"tutorialSidebar","previous":{"title":"Patterns","permalink":"/notes/programming/design/patterns/"},"next":{"title":"Abstract Factory","permalink":"/notes/programming/design/patterns/abstract-factory"}}');var a=t(35656),s=t(86145);const o={sidebar_position:1,tags:["Programming","Design","Design Pattern","Creation Pattern"]},i="Factory Method",c={},l=[{value:"Static",id:"static",level:2},{value:"Dynamic",id:"dynamic",level:2},{value:"Asynchronous",id:"asynchronous",level:2}];function h(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"factory-method",children:"Factory Method"})}),"\n",(0,a.jsx)(e.p,{children:"Creating objects without specify exact object class:\nnot calling a constructor directly."}),"\n",(0,a.jsx)(e.h2,{id:"static",children:"Static"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-ts",children:"CoordinateSystem = {\n  CARTESIAN: 0,\n  POLAR: 1,\n}\n\nclass Point {\n  constructor(x, y) {\n    this.x = x\n    this.y = y\n  }\n\n  static get factory() {\n    return new PointFactory()\n  }\n}\n\nclass PointFactory {\n  static newCartesianPoint(x, y) {\n    return new Point(x, y)\n  }\n\n  static newPolarPoint(rho, theta) {\n    return new Point(rho * Math.cos(theta), rho * Math.sin(theta))\n  }\n}\n\nconst point = PointFactory.newPolarPoint(5, Math.PI / 2)\nconst point2 = PointFactory.newCartesianPoint(5, 6)\n"})}),"\n",(0,a.jsx)(e.h2,{id:"dynamic",children:"Dynamic"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-ts",children:"class Vehicle {\n  constructor({\n    type = 'vehicle',\n    state = 'brand new',\n    color = 'white',\n    speed = 0,\n  } = {}) {\n    this.type = type\n    this.state = state\n    this.color = color\n    this.speed = speed\n  }\n\n  run(...args) {\n    if (args.length === 0)\n      console.log(`${this.type} - run with: ${this.speed}km/s`)\n    else if (toString.apply(args[0]) === '[object Number]')\n      this.speed = args[0]\n  }\n\n  withColor(...args) {\n    if (args.length === 0)\n      console.log(`The color of this ${this.type} product is : ${this.color}`)\n    else if (toString.apply(args[0]) === '[object String]')\n      this.color = args[0]\n  }\n\n  reform(funcName, newFunc) {\n    if (\n      typeof this[funcName] === 'function'\n      || typeof this.prototype[funcName] === 'function'\n    ) {\n      delete this[funcName]\n      this.prototype[funcName] = newFunc\n    }\n  }\n\n  addFeature(funcName, newFunc) {\n    if (typeof this[funcName] === 'undefined') {\n      this[funcName] = newFunc\n      this.prototype[funcName] = newFunc\n    }\n  }\n}\n\nclass Car extends Vehicle {\n  constructor({\n    type = 'car',\n    state = 'brand new',\n    color = 'silver',\n    speed = 10,\n    doors = 4,\n  } = {}) {\n    super({ type, state, color, speed })\n    this.doors = doors\n  }\n}\n\nclass Truck extends Vehicle {\n  constructor({\n    type = 'truck',\n    state = 'used',\n    color = 'blue',\n    speed = 8,\n    wheelSize = 'large',\n  } = {}) {\n    super({ type, state, color, speed })\n    this.wheelSize = 'large'\n  }\n}\n\nclass VehicleFactory {\n  constructor() {\n    this.VehicleClass = Car\n  }\n\n  createVehicle(options) {\n    switch (options.vehicleType) {\n      case 'car':\n        this.VehicleClass = Car\n        break\n      case 'truck':\n        this.VehicleClass = Truck\n        break\n      default:\n        break\n    }\n\n    return new this.VehicleClass(options)\n  }\n}\n\nclass CarFactory extends VehicleFactory {\n  constructor() {\n    super()\n    this.VehicleClass = Car\n  }\n}\n\nclass TruckFactory extends VehicleFactory {\n  constructor() {\n    super()\n    this.VehicleClass = Truck\n  }\n}\n\nconst vehicleFactory = new VehicleFactory()\nconst car = vehicleFactory.createVehicle({\n  vehicleType: 'car',\n  color: 'yellow',\n  doors: 6,\n})\nconst movingTruck = vehicleFactory.createVehicle({\n  vehicleType: 'truck',\n  state: 'like new',\n  color: 'red',\n  wheelSize: 'small',\n})\n\nconst truckFactory = new TruckFactory()\nconst bigTruck = truckFactory.createVehicle({\n  state: 'bad.',\n  color: 'pink',\n  wheelSize: 'so big',\n})\n"})}),"\n",(0,a.jsx)(e.h2,{id:"asynchronous",children:"Asynchronous"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-ts",children:"class DataContainer {\n  #data\n  #active = false\n\n  #init(data) {\n    this.#active = true\n    this.#data = data\n    return this\n  }\n\n  #check() {\n    if (!this.#active)\n      throw new TypeError('Not created by factory')\n  }\n\n  getData() {\n    this.#check()\n    return `DATA: ${this.#data}`\n  }\n\n  static async create() {\n    const data = await Promise.resolve('downloaded')\n    return new this().#init(data)\n  }\n}\n\nDataContainer.create().then(dc =>\n  assert.equal(dc.getData(), 'DATA: downloaded')\n)\n"})})]})}function d(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(h,{...n})}):h(n)}},86145:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>i});var r=t(57140);const a={},s=r.createContext(a);function o(n){const e=r.useContext(s);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:o(n.components),r.createElement(s.Provider,{value:e},n.children)}}}]);