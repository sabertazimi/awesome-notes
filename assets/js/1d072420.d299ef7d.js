"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[34499],{65192:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"web/react/hooks/memo","title":"Memo","description":"- Returns a memoized value.","source":"@site/content/web/react/hooks/memo.md","sourceDirName":"web/react/hooks","slug":"/web/react/hooks/memo","permalink":"/notes/web/react/hooks/memo","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/react/hooks/memo.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"React","permalink":"/notes/tags/react"},{"inline":true,"label":"Hook","permalink":"/notes/tags/hook"},{"inline":true,"label":"Memo","permalink":"/notes/tags/memo"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3,"tags":["Web","React","Hook","Memo"]},"sidebar":"tutorialSidebar","previous":{"title":"Reducer","permalink":"/notes/web/react/hooks/reducer"},"next":{"title":"Callback","permalink":"/notes/web/react/hooks/callback"}}');var r=t(35656),s=t(86145);const l={sidebar_position:3,tags:["Web","React","Hook","Memo"]},a="Memo",i={},c=[{value:"Dispatcher",id:"dispatcher",level:2},{value:"useMemo",id:"usememo",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"memo",children:"Memo"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Returns a memoized value."}),"\n",(0,r.jsx)(n.li,{children:"Only recompute the memoized value when one of the dependencies has changed."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Shallow compare"})," diff."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Optimization"})," helps to\navoid expensive calculations on every render\n(avoid re-render problem):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Good use"})," for complex objects or expensive calculations."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Donn't use"})," for primitive values or simple calculations."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"dispatcher",children:"Dispatcher"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function mountMemo<T>(\n  nextCreate: () => T,\n  deps: Array<mixed> | void | null\n): T {\n  const hook = mountWorkInProgressHook()\n  const nextDeps = deps === undefined ? null : deps\n  const nextValue = nextCreate()\n  hook.memoizedState = [nextValue, nextDeps]\n  return nextValue\n}\n\nfunction updateMemo<T>(\n  nextCreate: () => T,\n  deps: Array<mixed> | void | null\n): T {\n  const hook = updateWorkInProgressHook()\n  const nextDeps = deps === undefined ? null : deps\n  const prevState = hook.memoizedState\n\n  if (prevState !== null) {\n    if (nextDeps !== null) {\n      const prevDeps: Array<mixed> | null = prevState[1]\n\n      if (areHookInputsEqual(nextDeps, prevDeps))\n        return prevState[0]\n    }\n  }\n\n  const nextValue = nextCreate()\n  hook.memoizedState = [nextValue, nextDeps]\n  return nextValue\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"usememo",children:"useMemo"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'export default function Button({\n  color,\n  children,\n}: {\n  color: string\n  children: ReactElement\n}) {\n  const textColor = useMemo(\n    () => slowlyCalculateTextColor(color),\n    [color] // \u2705 Don\u2019t recalculate until `color` changes\n  )\n\n  return (\n    <button type="button" className={`Button-${color} Button-text-${textColor}`}>\n      {children}\n    </button>\n  )\n}\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},86145:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>a});var o=t(57140);const r={},s=o.createContext(r);function l(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);