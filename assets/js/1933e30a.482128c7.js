"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[88330],{97749:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"language/rust/macros","title":"Macros","description":"Unsafe Code","source":"@site/content/language/rust/macros.md","sourceDirName":"language/rust","slug":"/language/rust/macros","permalink":"/notes/language/rust/macros","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/language/rust/macros.md","tags":[{"inline":true,"label":"Language","permalink":"/notes/tags/language"},{"inline":true,"label":"Rust","permalink":"/notes/tags/rust"},{"inline":true,"label":"Macro","permalink":"/notes/tags/macro"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":26,"frontMatter":{"sidebar_position":26,"tags":["Language","Rust","Macro"]},"sidebar":"tutorialSidebar","previous":{"title":"Testing","permalink":"/notes/language/rust/testing"},"next":{"title":"Standard ML","permalink":"/notes/language/standard-ml/"}}');var r=t(35656),a=t(86145);const i={sidebar_position:26,tags:["Language","Rust","Macro"]},l="Macros",o={},c=[{value:"Unsafe Code",id:"unsafe-code",level:2},{value:"Attributes",id:"attributes",level:2},{value:"Crate Attributes",id:"crate-attributes",level:3},{value:"Linter Attributes",id:"linter-attributes",level:3},{value:"Compile Attributes",id:"compile-attributes",level:3},{value:"Comments",id:"comments",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"macros",children:"Macros"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"#[macro_export]\nmacro_rules! vec {\n    ( $( $x:expr ),* ) => {\n        {\n            let mut temp_vec = Vec::new();\n            $(\n                temp_vec.push($x);\n            )*\n            temp_vec\n        }\n    };\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"unsafe-code",children:"Unsafe Code"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"unsafe {}"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5bf9\u539f\u59cb\u6307\u9488\u8fdb\u884c\u89e3\u5f15\u7528."}),"\n",(0,r.jsxs)(n.li,{children:["\u8c03\u7528",(0,r.jsx)(n.code,{children:"\u4e0d\u5b89\u5168"}),"\u7684\u51fd\u6570 (\u5305\u62ec C \u51fd\u6570, \u7f16\u8bd1\u5668\u5185\u5efa\u6307\u4ee4, \u539f\u59cb\u5206\u914d\u5668)."]}),"\n",(0,r.jsxs)(n.li,{children:["\u5b9e\u73b0",(0,r.jsx)(n.code,{children:"\u4e0d\u5b89\u5168"}),"\u7684\u7279\u6027."]}),"\n",(0,r.jsxs)(n.li,{children:["\u8bbf\u95ee",(0,r.jsx)(n.code,{children:"union"}),"\u5b57\u6bb5."]}),"\n",(0,r.jsx)(n.li,{children:"\u6539\u53d8\u9759\u6001\u6570\u636e."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"attributes",children:"Attributes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Crate scope:",(0,r.jsx)(n.code,{children:"#![crate_attribute]"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Module/Function scope: ",(0,r.jsx)(n.code,{children:"#[item_attribute]"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'#[attribute = "value"]\n#[attribute(key = "value")]\n#[attribute(value)]\n'})}),"\n",(0,r.jsx)(n.h3,{id:"crate-attributes",children:"Crate Attributes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'#![crate_type = "lib"]\n#![crate_name = "rand"]\n'})}),"\n",(0,r.jsx)(n.h3,{id:"linter-attributes",children:"Linter Attributes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"#[allow(dead_code)]\n#[allow(unused)]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"compile-attributes",children:"Compile Attributes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'#[cfg(target_os = "linux")]\nfn are_you_on_linux() {\n    println!("You are running linux!")\n}\n\n#[cfg(not(target_os = "linux"))]\nfn are_you_on_linux() {\n    println!("You are *not* running linux!")\n}\n\nfn main() {\n    are_you_on_linux();\n\n    if cfg!(target_os = "linux") {\n        println!("Yes. It\'s definitely linux!");\n    } else {\n        println!("Yes. It\'s definitely *not* linux!");\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"comments",children:"Comments"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'// Line Comments\n/* Block Comments */\n/// Document Line Comments\n/** Document Block Comments */\n//! Crate Line Comments\n/*! Crate Block Comments */\n\n/// [`Option`]\n/// [`Type`](struct@Type)\n/// [`Type`](fn@Type)\n\n#[doc(alias = "alias" )]\n'})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},86145:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var s=t(57140);const r={},a=s.createContext(r);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);