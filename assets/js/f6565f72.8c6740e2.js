"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[42064],{94693:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>o,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"language/verilog/systemverilog","title":"SystemVerilog","description":"Enum","source":"@site/content/language/verilog/systemverilog.md","sourceDirName":"language/verilog","slug":"/language/verilog/systemverilog","permalink":"/notes/language/verilog/systemverilog","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/language/verilog/systemverilog.md","tags":[{"inline":true,"label":"Language","permalink":"/notes/tags/language"},{"inline":true,"label":"Verilog","permalink":"/notes/tags/verilog"},{"inline":true,"label":"SystemVerilog","permalink":"/notes/tags/system-verilog"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":21,"frontMatter":{"sidebar_position":21,"tags":["Language","Verilog","SystemVerilog"]},"sidebar":"tutorialSidebar","previous":{"title":"State Machine","permalink":"/notes/language/verilog/state-machine"},"next":{"title":"Xilinx U280","permalink":"/notes/language/verilog/xilinx"}}');var i=t(35656),l=t(86145);const r={sidebar_position:21,tags:["Language","Verilog","SystemVerilog"]},s="SystemVerilog",o={},c=[{value:"Enum",id:"enum",level:2},{value:"Struct and Union",id:"struct-and-union",level:2},{value:"Procedural Block",id:"procedural-block",level:2},{value:"Interface",id:"interface",level:2},{value:"Testing",id:"testing",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"systemverilog",children:"SystemVerilog"})}),"\n",(0,i.jsx)(e.h2,{id:"enum",children:"Enum"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-verilog",children:'typedef enum logic [2:0] {\n  RED, GREEN, BLUE, CYAN, MAGENTA, YELLOW\n} color_t;\n\ncolor_t my_color = GREEN;\ninitial $display("The color is %s", my_color.name());\n'})}),"\n",(0,i.jsx)(e.h2,{id:"struct-and-union",children:"Struct and Union"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-verilog",children:"typedef struct packed {\n  bit [10:0]  expo;\n  bit         sign;\n  bit [51:0]  man;\n} FP;\n\nFP zero = 64'b0;\n"})}),"\n",(0,i.jsx)(e.h2,{id:"procedural-block",children:"Procedural Block"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"always_comb: \u7528\u4e8e\u7ec4\u5408\u903b\u8f91\u7535\u8def\uff08\u76f8\u5f53\u4e8e Verilog \u4e2d\u5bf9\u6240\u6709\u8f93\u5165\u53d8\u91cf\u7535\u5e73\u654f\u611f\u7684 always\uff0c\u4f46 always_comb \u65e0\u9700\u624b\u52a8\u5217\u51fa\u6240\u6709\u8f93\u5165\u53d8\u91cf\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u8bc6\u522b\uff09"}),"\n",(0,i.jsx)(e.li,{children:"always_ff: \u7528\u4e8e\u89e6\u53d1\u5668\u53ca\u76f8\u5173\u7684\u65f6\u5e8f\u903b\u8f91\u7535\u8def\uff08\u76f8\u5f53\u4e8e Verilog \u4e2d\u5bf9\u67d0\u4e2a\u6216\u67d0\u51e0\u4e2a\u4fe1\u53f7\u6709\u6548\u8df3\u53d8\u6cbf\u654f\u611f\u3001\u5e76\u5e26\u6709\u4fe1\u53f7\u50a8\u5b58\u7279\u6027\u7684 always\uff09"}),"\n",(0,i.jsx)(e.li,{children:"always_latch: \u7528\u4e8e\u9501\u5b58\u5668\u7ea7\u76f8\u5173\u7684\u65f6\u5e8f\u903b\u8f91\u7535\u8def\uff08\u76f8\u5f53\u4e8e Verilog \u4e2d\u5bf9\u67d0\u4e2a\u6216\u67d0\u51e0\u4e2a\u4fe1\u53f7\u7535\u5e73\u654f\u611f\u3001\u5e76\u5e26\u6709\u4fe1\u53f7\u50a8\u5b58\u7279\u6027\u7684\u7684 always\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-verilog",children:"always_comb begin\n  tmp = b * b - 4 * a * c;\n  no_root = (tmp < 0);\nend\n\nalways_ff @(posedge clk)\n  count <= count + 1;\n\nalways_latch\n  if (en) q <= d;\n"})}),"\n",(0,i.jsx)(e.h2,{id:"interface",children:"Interface"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-verilog",children:"interface interfaceName;\n  logic a;\n  logic b;\n  modport in (input a, output b);\n  modport out (input b, output a);\nendinterface\n\nmodule top;\n  interfaceName i ();\n  u_a m1 (.i1(i));\n  u_b m2 (.i2(i));\nendmodule\n\nmodule u_a (interfaceName.in i1);\nendmodule\n\nmodule u_b (interfaceName.out i2);\nendmodule\n"})}),"\n",(0,i.jsx)(e.h2,{id:"testing",children:"Testing"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-verilog",children:"module top;\n  integer num_packets = $random;\n  reg A, B, C, clk, reset_n;\n  wire D;\n  register_logic dut(A, B, C, clk, reset_n, D);\n\n  // generate clock\n  // ...\n\n  initial begin\n    run();\n  end\n\n  task run();\n    reset_n  = 1;\n    #20 reset_n = 0;\n    @(posedge clk) reset_n <= #1 1;\n    repeat (num_packets) begin\n      A = $random; B = $random; C = $random;\n      @(posedge clk);\n      $display(A, B, C, D);\n    end\n    $finish;\n  endtask\nendmodule\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-verilog",children:"class Packet;\n  string name;\n  rand bit[3:0] sa, da;\n  rand reg A, B, C;\n\n  function void display(result);\n    $display(A, B, C, result);\n  endfunction\nendclass: Packet\n\n// inheritance\nclass Packet_da_3 extends Packet;\n  constraint da_3 {\n    da == 3;\n  }\n\n  function void display(result);\n    super.display(result);\n    $display(sa, da);\n  endfunction\nendclass: Packet_da_3\n\nclass Generator;\n  Packet pkt;\n  Channel out_chan;\n  int num_packets;\n\n  function void gen();\n    pkt = new();\n    pkt.randomize();\n    out_chan.put(pkt);\n  endfunction\n\n  task run();\n    while (num_packets-- != 0)\n      gen();\n  endtask\nendclass\n\nclass Driver;\n  Channel in_chan;\n\n  task send();\n    in_chan.get(pkt);\n    top.A = pkt.A;\n    top.B = pkt.B;\n    top.C = pkt.C;\n    @(posedge top.clk);\n  endtask\n\n  task run();\n    forever send();\n  endtask\nendclass\n\nmodule top;\n  initial begin\n    build();\n    run();\n  end\n\n  task build();\n    Config cfg = new();\n    Channel chan = new();\n    Generator gen = new();\n    Driver drv = new();\n    gen.out_chan = chan;\n    drv.in_chan = chan;\n\n    cfg.randomize() with { num_packets > 1500; }\n    gen.num_packets = cfg.num_packets;\n  endtask\n\n  task run();\n    fork\n      gen.run();\n      drv.run();\n    join\n    $finish;\n  endtask\nendmodule\n"})})]})}function u(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},86145:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>s});var a=t(57140);const i={},l=a.createContext(i);function r(n){const e=a.useContext(l);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),a.createElement(l.Provider,{value:e},n.children)}}}]);