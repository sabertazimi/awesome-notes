"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[12147],{80680:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"web/react/types","title":"Types","description":"Props","source":"@site/content/web/react/types.md","sourceDirName":"web/react","slug":"/web/react/types","permalink":"/notes/web/react/types","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/react/types.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"React","permalink":"/notes/tags/react"},{"inline":true,"label":"TypeScript","permalink":"/notes/tags/type-script"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4,"tags":["Web","React","TypeScript"]},"sidebar":"tutorialSidebar","previous":{"title":"Synthetic Events","permalink":"/notes/web/react/event"},"next":{"title":"Patterns","permalink":"/notes/web/react/patterns"}}');var r=t(35656),a=t(86145);const i={sidebar_position:4,tags:["Web","React","TypeScript"]},c="Types",o={},l=[{value:"Props",id:"props",level:2},{value:"Class",id:"class",level:2},{value:"Generics",id:"generics",level:2},{value:"Function",id:"function",level:2},{value:"DOM",id:"dom",level:2},{value:"Event",id:"event",level:2},{value:"Form",id:"form",level:2},{value:"Input",id:"input",level:2},{value:"Portal",id:"portal",level:2},{value:"Redux",id:"redux",level:2},{value:"Hooks",id:"hooks",level:2},{value:"State",id:"state",level:2},{value:"Reducer",id:"reducer",level:2},{value:"Ref",id:"ref",level:2},{value:"DOM Element",id:"dom-element",level:3},{value:"Mutable Value",id:"mutable-value",level:3},{value:"Fetch",id:"fetch",level:2},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"types",children:"Types"})}),"\n",(0,r.jsx)(n.h2,{id:"props",children:"Props"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export declare interface AppProps {\n  children: React.ReactNode // best\n  style?: React.CSSProperties // for style\n  onChange?: (e: React.FormEvent<HTMLInputElement>) => void // form events!\n  props: Props & React.HTMLProps<HTMLButtonElement>\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ComponentProps"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"React.ComponentProps"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"React.ComponentPropsWithRef"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"React.ComponentPropsWithoutRef"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { Button } from 'library'\n\ntype ButtonProps = React.ComponentProps<typeof Button>\ntype AlertButtonProps = Omit<ButtonProps, 'onClick'>\n\nconst AlertButton: React.FC<AlertButtonProps> = props => (\n  <Button onClick={() => alert('hello')} {...props} />\n)\n\nexport default function App() {\n  return <AlertButton />\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Typing existing untyped React components:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"declare module 'react-router-dom' {\n  import * as React from 'react'\n\n  interface NavigateProps<T> {\n    to: string | number\n    replace?: boolean\n    state?: T\n  }\n\n  export class Navigate<T = any> extends React.Component<NavigateProps<T>> {}\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"class",children:"Class"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"React.Component<P, S>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"readonly state: State"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"static defaultProps"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"static getDerivedStateFromProps"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"class MyComponent extends React.Component<{\n  message?: string\n}> {\n  render() {\n    const { message = 'default' } = this.props\n    return <div>{message}</div>\n  }\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import Button from './Button'\n\ntype Props = typeof ButtonCounter.defaultProps & {\n  name: string\n}\n\nconst initialState = { clicksCount: 0 }\ntype State = Readonly<typeof initialState>\n\nclass ButtonCounter extends React.Component<Props, State> {\n  readonly state: State = initialState\n\n  static defaultProps = {\n    name: 'count',\n  }\n\n  static getDerivedStateFromProps(\n    props: Props,\n    state: State,\n  ): Partial<State> | null {\n    // ...\n  }\n\n  render() {\n    return <span>{this.props.foo}</span>\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"generics",children:"Generics"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u4e00\u4e2a\u6cdb\u578b\u7ec4\u4ef6\ninterface SelectProps<T> {\n  items: T[]\n}\n\nclass Select<T> extends React.Component<SelectProps<T>, any> {}\n\n// \u4f7f\u7528\nconst Form = () => <Select<string> items={['a', 'b']} />\n\nexport default function App() {\n  return <Form />\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["In ",(0,r.jsx)(n.code,{children:".tsx"})," file, ",(0,r.jsx)(n.code,{children:"<T>"})," maybe considered ",(0,r.jsx)(n.code,{children:"JSX.Element"}),",\nuse ",(0,r.jsx)(n.code,{children:"extends {}"})," to avoid it:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const foo = <T extends object>(arg: T) => arg\n"})}),"\n",(0,r.jsx)(n.h2,{id:"function",children:"Function"}),"\n",(0,r.jsxs)(n.p,{children:["Don't use ",(0,r.jsx)(n.code,{children:"React.FC"}),"/",(0,r.jsx)(n.code,{children:"React.FunctionComponent"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["React 17:\nUnnecessary addition of ",(0,r.jsx)(n.code,{children:"children"})," (hide some run-time error)."]}),"\n",(0,r.jsxs)(n.li,{children:["React 18:\n",(0,r.jsx)(n.code,{children:"@types/react"})," v18 ",(0,r.jsxs)(n.a,{href:"https://github.com/ant-design/ant-design/pull/34937",children:["remove implicit ",(0,r.jsx)(n.code,{children:"children"})," in ",(0,r.jsx)(n.code,{children:"React.FunctionComponent"})]}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.FC"})," doesn't support generic components."]}),"\n",(0,r.jsxs)(n.li,{children:["Barrier for ",(0,r.jsx)(n.code,{children:"<Comp>"})," with ",(0,r.jsx)(n.code,{children:"<Comp.Sub>"})," types (",(0,r.jsx)(n.strong,{children:"component as namespace pattern"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.FC"})," doesn't work correctly with ",(0,r.jsx)(n.code,{children:"defaultProps"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'// Declaring type of props\ninterface Props {\n  message: string\n}\n\n// Inferred return type\nconst Message = ({ message }: Props) => <div>{message}</div>\n\n// Explicit return type annotation\nconst Message = ({ message }: Props): JSX.Element => <div>{message}</div>\n\n// Inline types annotation\nconst Message = ({ message }: { message: string }) => <div>{message}</div>\n\nexport default function App() {\n  return <Message message="message" />\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"JSX.Element"}),": return value of ",(0,r.jsx)(n.code,{children:"React.createElement"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.ReactNode"}),": return value of a component."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function foo(bar: string) {\n  return { baz: 1 }\n}\n\ntype FooReturn = ReturnType<typeof foo> // { baz: number }\n"})}),"\n",(0,r.jsx)(n.h2,{id:"dom",children:"DOM"}),"\n",(0,r.jsx)(n.p,{children:"HTML and CSS:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"React.DOMAttributes<HTMLElement>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"React.AriaAttributes<HTMLElement>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"React.SVGAttributes<HTMLElement>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"React.HTMLAttributes<HTMLElement>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"React.ButtonHTMLAttributes<HTMLButtonElement>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"React.HTMLProps<HTMLElement>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"React.CSSProperties"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"event",children:"Event"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.SyntheticEvent"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.AnimationEvent"}),":\nCSS animations."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.ChangeEvent"}),":\n",(0,r.jsx)(n.code,{children:"<input>"}),"/",(0,r.jsx)(n.code,{children:"<select>"}),"/",(0,r.jsx)(n.code,{children:"<textarea>"})," change events."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.ClipboardEvent"}),":\ncopy/paste/cut events."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.CompositionEvent"}),":\nuser indirectly entering text events."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.DragEvent"}),":\ndrag/drop interaction events."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.FocusEvent"}),":\nelements gets/loses focus events."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.FormEvent<HTMLElement>"}),":\nform focus/change/submit events."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.InvalidEvent"}),":\nvalidity restrictions of inputs fails."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.KeyboardEvent"}),":\nkeyboard interaction events."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.MouseEvent"}),":\npointing device interaction events (e.g. mouse)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.TouchEvent"}),":\ntouch device interaction events.\nExtends UIEvent."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.PointerEvent"}),":\nadvanced pointing device interaction events\n(includes mouse, pen/stylus, touchscreen),\nrecommended for modern browser.\nExtends ",(0,r.jsx)(n.code,{children:"UIEvent"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.TransitionEvent"}),":\nCSS transition.\nExtends UIEvent."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.UIEvent"}),":\nbase event for Mouse/Touch/Pointer events."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.WheelEvent"}),":\nmouse wheel scrolling events."]}),"\n",(0,r.jsxs)(n.li,{children:["Missing ",(0,r.jsx)(n.code,{children:"InputEvent"})," (extends ",(0,r.jsx)(n.code,{children:"UIEvent"}),"):\n",(0,r.jsx)(n.code,{children:"InputEvent"})," is still an experimental interface\nand not fully supported by all browsers.\nUse ",(0,r.jsx)(n.code,{children:"SyntheticEvent"})," instead."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.ChangeEventHandler<HTMLElement>"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import type { RefObject } from 'react'\nimport { useEffect, useRef } from 'react'\n\nfunction useEventListener<T extends HTMLElement = HTMLDivElement>(\n  eventName: keyof WindowEventMap,\n  handler: (event: Event) => void,\n  element?: RefObject<T>,\n) {\n  // Create a ref that stores handler\n  const savedHandler = useRef<(event: Event) => void>()\n\n  useEffect(() => {\n    // Define the listening target\n    const targetElement: T | Window = element?.current || window\n    if (!(targetElement && targetElement.addEventListener))\n      return\n\n    // Update saved handler if necessary\n    if (savedHandler.current !== handler)\n      savedHandler.current = handler\n\n    // Create event listener that calls handler function stored in ref\n    const eventListener = (event: Event) => {\n      savedHandler?.current(event)\n    }\n\n    targetElement.addEventListener(eventName, eventListener)\n\n    // Remove event listener on cleanup\n    return () => {\n      targetElement.removeEventListener(eventName, eventListener)\n    }\n  }, [eventName, element, handler])\n}\n\nexport default useEventListener\n"})}),"\n",(0,r.jsx)(n.h2,{id:"form",children:"Form"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"interface State {\n  text: string\n}\n\nclass App extends React.Component<Props, State> {\n  state = {\n    text: '',\n  }\n\n  // typing on RIGHT hand side of =\n  onChangeEvent = (e: React.FormEvent<HTMLInputElement>): void => {\n    this.setState({ text: e.currentTarget.value })\n  }\n\n  // typing on LEFT hand side of =\n  onChangeHandler: React.ChangeEventHandler<HTMLInputElement> = (e) => {\n    this.setState({ text: e.currentTarget.value })\n  }\n\n  render() {\n    return (\n      <div>\n        <input type=\"text\" value={this.state.text} onChange={this.onChange} />\n      </div>\n    )\n  }\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'export default function Form() {\n  return (\n    <form\n      ref={formRef}\n      onSubmit={(e: React.SyntheticEvent) => {\n        e.preventDefault()\n\n        const target = e.target as typeof e.target & {\n          email: { value: string }\n          password: { value: string }\n        }\n\n        const email = target.email.value // Type Checks\n        const password = target.password.value // Type Checks\n      }}\n    >\n      <div>\n        <label>\n          Email:\n          <input type="email" name="email" />\n        </label>\n      </div>\n      <div>\n        <label>\n          Password:\n          <input type="password" name="password" />\n        </label>\n      </div>\n      <div>\n        <input type="submit" value="Log in" />\n      </div>\n    </form>\n  )\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"input",children:"Input"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type StringChangeHandler = (newValue: string) => void\ntype NumberChangeHandler = (newValue: number) => void\ntype BooleanChangeHandler = (newValue: boolean) => void\n\ninterface BaseInputDefinition {\n  id: string\n  label: string\n}\n\ninterface TextInputDefinition extends BaseInputDefinition {\n  type: 'text'\n  value: string\n  onChange: StringChangeHandler\n}\n\ninterface NumberInputDefinition extends BaseInputDefinition {\n  type: 'number'\n  value: number\n  onChange: NumberChangeHandler\n}\n\ninterface CheckboxInputDefinition extends BaseInputDefinition {\n  type: 'checkbox'\n  value: boolean\n  onChange: BooleanChangeHandler\n}\n\ntype Input\n  = | TextInputDefinition\n    | NumberInputDefinition\n    | CheckboxInputDefinition\n"})}),"\n",(0,r.jsx)(n.h2,{id:"portal",children:"Portal"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const modalRoot = document.getElementById('modal-root') as HTMLElement\n\nexport class Modal extends React.Component<{ children: ReactElement }> {\n  el: HTMLElement = document.createElement('div')\n\n  componentDidMount() {\n    modalRoot.appendChild(this.el)\n  }\n\n  componentWillUnmount() {\n    modalRoot.removeChild(this.el)\n  }\n\n  render() {\n    return ReactDOM.createPortal(this.props.children, this.el)\n  }\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import type React from 'react'\nimport { useEffect, useRef } from 'react'\nimport { createPortal } from 'react-dom'\n\nconst modalRoot = document.querySelector('#modal-root') as HTMLElement\n\nconst Modal: React.FC<object> = ({ children }) => {\n  const el = useRef(document.createElement('div'))\n\n  useEffect(() => {\n    const current = el.current\n    modalRoot!.appendChild(current)\n    return () => modalRoot!.removeChild(current)\n  }, [])\n\n  return createPortal(children, el.current)\n}\n\nexport default Modal\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'import { Modal } from \'@components\'\n\nexport default function App() {\n  const [showModal, setShowModal] = React.useState(false)\n\n  return (\n    <div>\n      <div id="modal-root"></div>\n      {showModal && (\n        <Modal>\n          <div>\n            I&apos;m a modal!\n            {\' \'}\n            <button type="button" onClick={() => setShowModal(false)}>\n              close\n            </button>\n          </div>\n        </Modal>\n      )}\n      <button type="button" onClick={() => setShowModal(true)}>\n        show Modal\n      </button>\n    </div>\n  )\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"redux",children:"Redux"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const initialState = {\n  name: '',\n  points: 0,\n  likesGames: true,\n}\n\ntype State = typeof initialState\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export function updateName(name: string) {\n  return {\n    type: 'UPDATE_NAME',\n    name,\n  } as const\n}\n\nexport function addPoints(points: number) {\n  return {\n    type: 'ADD_POINTS',\n    points,\n  } as const\n}\n\nexport function setLikesGames(value: boolean) {\n  return {\n    type: 'SET_LIKES_GAMES',\n    value,\n  } as const\n}\n\ntype Action = ReturnType<\n  typeof updateName | typeof addPoints | typeof setLikesGames\n>\n\n// =>\n// type Action = {\n//   readonly type: 'UPDATE_NAME';\n//   readonly name: string;\n// } | {\n//   readonly type: 'ADD_POINTS';\n//   readonly points: number;\n// } | {\n//   readonly type: 'SET_LIKES_GAMES';\n//   readonly value: boolean;\n// }\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import type { Reducer } from 'redux'\n\nfunction reducer(state: State, action: Action): Reducer<State, Action> {\n  switch (action.type) {\n    case 'UPDATE_NAME':\n      return { ...state, name: action.name }\n    case 'ADD_POINTS':\n      return { ...state, points: action.points }\n    case 'SET_LIKES_GAMES':\n      return { ...state, likesGames: action.value }\n    default:\n      return state\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"hooks",children:"Hooks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"useState<T>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Dispatch<T>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"SetStateAction<T>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"RefObject<T>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"MutableRefObject<T>"})}),"\n",(0,r.jsxs)(n.li,{children:["More ",(0,r.jsx)(n.a,{href:"https://github.com/juliencrn/useHooks.ts",children:"TypeScript Hooks"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"as const"})," type assertion to avoid type inference\n(especially for ",(0,r.jsx)(n.code,{children:"[first, second]"})," type)."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export function useLoading() {\n  const [isLoading, setState] = React.useState(false)\n  const load = () => {\n    setState(true)\n  }\n\n  // return `[boolean, () => void]` as want\n  // instead of `(boolean | () => void)[]`\n  return [isLoading, load] as const\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import type { Dispatch, SetStateAction } from 'react'\nimport { useState } from 'react'\n\ninterface ReturnType {\n  value: boolean\n  setValue: Dispatch<SetStateAction<boolean>>\n  setTrue: () => void\n  setFalse: () => void\n  toggle: () => void\n}\n\nfunction useBoolean(defaultValue?: boolean): ReturnType {\n  const [value, setValue] = useState(!!defaultValue)\n\n  const setTrue = () => setValue(true)\n  const setFalse = () => setValue(false)\n  const toggle = () => setValue(x => !x)\n\n  return { value, setValue, setTrue, setFalse, toggle }\n}\n\nexport default useBoolean\n"})}),"\n",(0,r.jsx)(n.h2,{id:"state",children:"State"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"export default function App() {\n  const [user, setUser] = React.useState<IUser>({} as IUser)\n  const handleClick = () => setUser(newUser)\n\n  return <div>App</div>\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"reducer",children:"Reducer"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.a,{href:"https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes-func.html#discriminated-unions",children:"Discriminated Unions"}),"\nfor reducer actions."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const initialState = { count: 0 }\ntype State = typeof initialState\n\ntype Action\n  = | { type: 'increment', payload: number }\n    | { type: 'decrement', payload: string }\n\nfunction reducer(state: State, action: Action) {\n  switch (action.type) {\n    case 'increment':\n      return { count: state.count + action.payload }\n    case 'decrement':\n      return { count: state.count - Number(action.payload) }\n    default:\n      throw new Error('Error')\n  }\n}\n\nexport default function Counter() {\n  const [state, dispatch] = React.useReducer(reducer, initialState)\n\n  return (\n    <>\n      Count:\n      {' '}\n      {state.count}\n      <button\n        type=\"button\"\n        onClick={() => dispatch({ type: 'decrement', payload: '5' })}\n      >\n        -\n      </button>\n      <button\n        type=\"button\"\n        onClick={() => dispatch({ type: 'increment', payload: 5 })}\n      >\n        +\n      </button>\n    </>\n  )\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ref",children:"Ref"}),"\n",(0,r.jsx)(n.h3,{id:"dom-element",children:"DOM Element"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"If possible, prefer as specific as possible."}),"\n",(0,r.jsxs)(n.li,{children:["Return type is ",(0,r.jsx)(n.code,{children:"RefObject<T>"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"export default function Foo() {\n  const divRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!divRef.current)\n      throw new Error('divRef is not assigned')\n\n    doSomethingWith(divRef.current)\n  })\n\n  return <div ref={divRef}>etc</div>\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"mutable-value",children:"Mutable Value"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Return type is ",(0,r.jsx)(n.code,{children:"MutableRefObject<T>"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'export default function Foo() {\n  const intervalRef = useRef<number | null>(null)\n\n  // You manage the ref yourself (that\'s why it\'s called MutableRefObject!)\n  useEffect(() => {\n    intervalRef.current = setInterval()\n    return () => clearInterval(intervalRef.current)\n  }, [])\n\n  // The ref is not passed to any element\'s "ref" prop\n  return (\n    <button type="button" onClick={() => clearInterval(intervalRef.current)}>\n      Cancel timer\n    </button>\n  )\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"fetch",children:"Fetch"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import type { AxiosRequestConfig } from 'axios'\n\nimport axios from 'axios'\nimport { useEffect, useReducer, useRef } from 'react'\n\n// State & hook output\ninterface State<T> {\n  status: 'init' | 'fetching' | 'error' | 'fetched'\n  data?: T\n  error?: string\n}\n\ntype Cache<T> = Record<string, T>\n\n// discriminated union type\ntype Action<T>\n  = | { type: 'request' }\n    | { type: 'success', payload: T }\n    | { type: 'failure', payload: string }\n\nfunction useFetch<T = unknown>(\n  url?: string,\n  options?: AxiosRequestConfig,\n): State<T> {\n  const cache = useRef<Cache<T>>({})\n  const cancelRequest = useRef<boolean>(false)\n\n  const initialState: State<T> = {\n    status: 'init',\n    error: undefined,\n    data: undefined,\n  }\n\n  // Keep state logic separated\n  const fetchReducer = (state: State<T>, action: Action<T>): State<T> => {\n    switch (action.type) {\n      case 'request':\n        return { ...initialState, status: 'fetching' }\n      case 'success':\n        return { ...initialState, status: 'fetched', data: action.payload }\n      case 'failure':\n        return { ...initialState, status: 'error', error: action.payload }\n      default:\n        return state\n    }\n  }\n\n  const [state, dispatch] = useReducer(fetchReducer, initialState)\n\n  useEffect(() => {\n    if (!url)\n      return\n\n    const fetchData = async () => {\n      dispatch({ type: 'request' })\n\n      if (cache.current[url]) {\n        dispatch({ type: 'success', payload: cache.current[url] })\n      } else {\n        try {\n          const response = await axios(url, options)\n          cache.current[url] = response.data\n\n          if (cancelRequest.current)\n            return\n\n          dispatch({ type: 'success', payload: response.data })\n        } catch (error) {\n          if (cancelRequest.current)\n            return\n\n          dispatch({ type: 'failure', payload: error.message })\n        }\n      }\n    }\n\n    fetchData()\n\n    return () => {\n      cancelRequest.current = true\n    }\n  }, [url])\n\n  return state\n}\n\nexport default useFetch\n"})}),"\n",(0,r.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["React TypeScript ",(0,r.jsx)(n.a,{href:"https://github.com/typescript-cheatsheets/react",children:"cheat sheets"}),"."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},86145:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>c});var s=t(57140);const r={},a=s.createContext(r);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);