"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[68059],{26992:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"programming/design/patterns/strategy","title":"Strategy","description":"- \u6539\u53d8\u5bf9\u8c61\u7684\u5185\u6838/\u7b97\u6cd5, \u4e00\u4e2a Strategy \u5bf9\u8c61\u5c01\u88c5\u4e00\u4e2a\u7b97\u6cd5, \u76f8\u4e92\u53ef\u4ee5\u66ff\u6362.","source":"@site/content/programming/design/patterns/strategy.md","sourceDirName":"programming/design/patterns","slug":"/programming/design/patterns/strategy","permalink":"/notes/programming/design/patterns/strategy","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/programming/design/patterns/strategy.md","tags":[{"inline":true,"label":"Programming","permalink":"/notes/tags/programming"},{"inline":true,"label":"Design","permalink":"/notes/tags/design"},{"inline":true,"label":"Design Pattern","permalink":"/notes/tags/design-pattern"},{"inline":true,"label":"Behavioral Pattern","permalink":"/notes/tags/behavioral-pattern"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":20,"frontMatter":{"sidebar_position":20,"tags":["Programming","Design","Design Pattern","Behavioral Pattern"]},"sidebar":"tutorialSidebar","previous":{"title":"State","permalink":"/notes/programming/design/patterns/state"},"next":{"title":"Template Method","permalink":"/notes/programming/design/patterns/template-method"}}');var i=e(35656),s=e(86145);const a={sidebar_position:20,tags:["Programming","Design","Design Pattern","Behavioral Pattern"]},o="Strategy",l={},c=[];function p(n){const t={admonition:"admonition",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"strategy",children:"Strategy"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"\u6539\u53d8\u5bf9\u8c61\u7684\u5185\u6838/\u7b97\u6cd5, \u4e00\u4e2a Strategy \u5bf9\u8c61\u5c01\u88c5\u4e00\u4e2a\u7b97\u6cd5, \u76f8\u4e92\u53ef\u4ee5\u66ff\u6362."}),"\n",(0,i.jsx)(t.li,{children:"\u5229\u7528\u7ec4\u5408 + \u59d4\u6258 + \u591a\u6001, \u907f\u514d\u590d\u6742\u7684\u5206\u652f\u8bed\u53e5."}),"\n",(0,i.jsxs)(t.li,{children:["\u5c06\u5355\u4e2a\u7b56\u7565\u8fdb\u884c\u62bd\u8c61\u5c01\u88c5:","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"\u89e3\u8026."}),"\n",(0,i.jsx)(t.li,{children:"\u590d\u7528."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.li,{children:"JS \u4e2d, \u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u4e0e\u8fd4\u56de\u503c\u65f6, \u53ef\u4ee5\u5b9e\u73b0\u9690\u5f0f\u7684\u7b56\u7565\u6a21\u5f0f:\n\u51fd\u6570\u4f5c\u4e3a\u7b2c\u4e00\u516c\u6c11, \u65e0\u9700\u5c06 Strategy \u5c01\u88c5\u6210\u7b56\u7565\u5bf9\u8c61, \u53ef\u4ee5\u76f4\u63a5\u4f20\u9012\u6216\u8fd4\u56de\u7b56\u7565\u51fd\u6570."}),"\n"]}),"\n",(0,i.jsx)(t.admonition,{title:"Strategy Use Case",type:"tip",children:(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\u5e03\u5c40\u7ba1\u7406\u5668:","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"\u73af\u5883\u5bf9\u8c61\uff1a\u9762\u677f."}),"\n",(0,i.jsx)(t.li,{children:"\u62bd\u8c61\u7b56\u7565\uff1a\u62bd\u8c61\u5e03\u5c40\u7ba1\u7406\u63a5\u53e3."}),"\n",(0,i.jsx)(t.li,{children:"\u5177\u4f53\u7b56\u7565\uff1a\u5177\u4f53\u5e03\u5c40\u7ba1\u7406\u7c7b."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.li,{children:"\u8868\u5355\u9a8c\u8bc1 (Validator)."}),"\n",(0,i.jsx)(t.li,{children:"\u52a8\u753b\u7b56\u7565."}),"\n",(0,i.jsx)(t.li,{children:"\u5b58\u5728\u5927\u91cf if-else \u573a\u666f."}),"\n",(0,i.jsx)(t.li,{children:"\u91cd\u6784\u4ee3\u7801."}),"\n",(0,i.jsx)(t.li,{children:"Algorithm selection."}),"\n",(0,i.jsx)(t.li,{children:"Testing and mocking."}),"\n"]})}),"\n",(0,i.jsx)(t.p,{children:"Change strategy:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"const OutputFormat = Object.freeze({\n  markdown: 0,\n  html: 1,\n})\n\nclass ListStrategy {\n  start(buffer) {}\n  end(buffer) {}\n  addListItem(buffer, item) {}\n}\n\nclass MarkdownListStrategy extends ListStrategy {\n  addListItem(buffer, item) {\n    buffer.push(` * ${item}`)\n  }\n}\n\nclass HtmlListStrategy extends ListStrategy {\n  start(buffer) {\n    buffer.push('<ul>')\n  }\n\n  end(buffer) {\n    buffer.push('</ul>')\n  }\n\n  addListItem(buffer, item) {\n    buffer.push(`  <li>${item}</li>`)\n  }\n}\n\nclass TextProcessor {\n  constructor(outputFormat) {\n    this.buffer = []\n    this.setOutputFormat(outputFormat)\n  }\n\n  setOutputFormat(format) {\n    switch (format) {\n      case OutputFormat.markdown:\n        this.listStrategy = new MarkdownListStrategy()\n        break\n      case OutputFormat.html:\n        this.listStrategy = new HtmlListStrategy()\n        break\n      default:\n        throw new Error('Unsupported output format!')\n    }\n  }\n\n  appendList(items) {\n    this.listStrategy.start(this.buffer)\n    for (const item of items) this.listStrategy.addListItem(this.buffer, item)\n    this.listStrategy.end(this.buffer)\n  }\n\n  clear() {\n    this.buffer = []\n  }\n\n  toString() {\n    return this.buffer.join('\\n')\n  }\n}\n\nconst tp = new TextProcessor()\ntp.setOutputFormat(OutputFormat.markdown)\ntp.appendList(['one', 'two', 'three'])\nconsole.log(tp.toString())\n\ntp.clear()\ntp.setOutputFormat(OutputFormat.html)\ntp.appendList(['one', 'two', 'three'])\nconsole.log(tp.toString())\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Remove ",(0,i.jsx)(t.code,{children:"if-else"})," statements:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"// \u8fdd\u53cd\u5f00\u653e\u5c01\u95ed\u539f\u5219\nfunction activity(type, price) {\n  if (type === 'pre')\n    return price * 0.95\n  else if (type === 'onSale')\n    return price * 0.9\n  else if (type === 'back')\n    return price * 0.85\n  else if (type === 'limit')\n    return price * 0.8\n}\n\n// \u5229\u7528 Strategy \u8fdb\u884c\u91cd\u6784\nconst activity = new Map([\n  ['pre', price => price * 0.95],\n  ['onSale', price => price * 0.9],\n  ['back', price => price * 0.85],\n  ['limit', price => price * 0.8],\n])\n\nconst getActivityPrice = (type, price) => activity.get(type)(price)\n\n// \u65b0\u589e\u65b0\u624b\u6d3b\u52a8\nactivity.set('newcomer', price => price * 0.7)\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"module.exports = (function () {\n  const manager = {}\n\n  // command to be encapsulated\n  manager.isNull = function (nu) {\n    return toString.apply(nu) === '[object Null]'\n  }\n  manager.isArray = function (arr) {\n    return toString.apply(arr) === '[object Array]'\n  }\n  manager.isString = function (str) {\n    return toString.apply(str) === '[object String]'\n  }\n\n  // public api\n  function execute(command, ...args) {\n    return manager[command] && manager[command](...args)\n  }\n\n  function run(command) {\n    return manager[command] && manager[command]()\n  }\n\n  return {\n    execute,\n    run,\n  }\n})()\n"})}),"\n",(0,i.jsx)(t.p,{children:"Form validator:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"const errorMsg = rules[rule](element, limits)\n"})})]})}function m(n={}){const{wrapper:t}={...(0,s.R)(),...n.components};return t?(0,i.jsx)(t,{...n,children:(0,i.jsx)(p,{...n})}):p(n)}},86145:(n,t,e)=>{e.d(t,{R:()=>a,x:()=>o});var r=e(57140);const i={},s=r.createContext(i);function a(n){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function o(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),r.createElement(s.Provider,{value:t},n.children)}}}]);