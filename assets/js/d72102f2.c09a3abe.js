"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[50197],{63371:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"web/javascript/dom","title":"DOM","description":"- DOM Level 0.","source":"@site/content/web/javascript/dom.md","sourceDirName":"web/javascript","slug":"/web/javascript/dom","permalink":"/notes/web/javascript/dom","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/javascript/dom.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"JavaScript","permalink":"/notes/tags/java-script"},{"inline":true,"label":"ECMAScript","permalink":"/notes/tags/ecma-script"},{"inline":true,"label":"DOM","permalink":"/notes/tags/dom"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":32,"frontMatter":{"sidebar_position":32,"tags":["Web","JavaScript","ECMAScript","DOM"]},"sidebar":"tutorialSidebar","previous":{"title":"BOM","permalink":"/notes/web/javascript/bom"},"next":{"title":"CSSOM","permalink":"/notes/web/javascript/cssom"}}');var s=t(35656),d=t(86145);const i={sidebar_position:32,tags:["Web","JavaScript","ECMAScript","DOM"]},r="DOM",c={},o=[{value:"Nodes",id:"nodes",level:2},{value:"Node Type",id:"node-type",level:3},{value:"Attribute",id:"attribute",level:3},{value:"Text",id:"text",level:3},{value:"Document",id:"document",level:3},{value:"Document Type",id:"document-type",level:3},{value:"Document Fragment",id:"document-fragment",level:3},{value:"Manipulation",id:"manipulation",level:2},{value:"Append",id:"append",level:3},{value:"Insert",id:"insert",level:3},{value:"Replace",id:"replace",level:3},{value:"Remove",id:"remove",level:3},{value:"Traverse",id:"traverse",level:3},{value:"Attributes",id:"attributes",level:3},{value:"Select",id:"select",level:3},{value:"Geometry",id:"geometry",level:2},{value:"Dimensions",id:"dimensions",level:3},{value:"Position",id:"position",level:3},{value:"Scrolling",id:"scrolling",level:3},{value:"Loading",id:"loading",level:2},{value:"Dynamic Scripts",id:"dynamic-scripts",level:3},{value:"Dynamic Styles",id:"dynamic-styles",level:3},{value:"XML Namespace",id:"xml-namespace",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"dom",children:"DOM"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"DOM Level 0."}),"\n",(0,s.jsxs)(n.li,{children:["DOM Level 1:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"DOM Core."}),"\n",(0,s.jsx)(n.li,{children:"DOM XML."}),"\n",(0,s.jsx)(n.li,{children:"DOM HTML."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["DOM Level 2:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"DOM2 Core."}),"\n",(0,s.jsx)(n.li,{children:"DOM2 XML."}),"\n",(0,s.jsx)(n.li,{children:"DOM2 HTML."}),"\n",(0,s.jsx)(n.li,{children:"DOM2 Views."}),"\n",(0,s.jsx)(n.li,{children:"DOM2 StyleSheets."}),"\n",(0,s.jsx)(n.li,{children:"DOM2 CSS."}),"\n",(0,s.jsx)(n.li,{children:"DOM2 CSS 2."}),"\n",(0,s.jsx)(n.li,{children:"DOM2 Events."}),"\n",(0,s.jsx)(n.li,{children:"DOM2 UIEvents."}),"\n",(0,s.jsx)(n.li,{children:"DOM2 MouseEvents."}),"\n",(0,s.jsx)(n.li,{children:"DOM2 MutationEvents (Deprecated)."}),"\n",(0,s.jsx)(n.li,{children:"DOM2 HTMLEvents."}),"\n",(0,s.jsx)(n.li,{children:"DOM2 Range."}),"\n",(0,s.jsx)(n.li,{children:"DOM2 Traversal."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["DOM Level 3:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"DOM3 Core."}),"\n",(0,s.jsx)(n.li,{children:"DOM3 XML."}),"\n",(0,s.jsx)(n.li,{children:"DOM3 Events."}),"\n",(0,s.jsx)(n.li,{children:"DOM3 UIEvents."}),"\n",(0,s.jsx)(n.li,{children:"DOM3 MouseEvents."}),"\n",(0,s.jsx)(n.li,{children:"DOM3 MutationEvents (Deprecated)."}),"\n",(0,s.jsx)(n.li,{children:"DOM3 MutationNameEvents."}),"\n",(0,s.jsx)(n.li,{children:"DOM3 TextEvents."}),"\n",(0,s.jsx)(n.li,{children:"DOM3 Load and Save."}),"\n",(0,s.jsx)(n.li,{children:"DOM3 Load and Save Async."}),"\n",(0,s.jsx)(n.li,{children:"DOM3 Validation."}),"\n",(0,s.jsx)(n.li,{children:"DOM3 XPath."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const hasXmlDom = document.implementation.hasFeature('XML', '1.0')\nconst hasHtmlDom = document.implementation.hasFeature('HTML', '1.0')\n"})}),"\n",(0,s.jsx)(n.h2,{id:"nodes",children:"Nodes"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"document.createElement('nodeName')\ndocument.createTextNode('String')\n\ndocument.getElementById(id)\ndocument.getElementsByName(elementName)\ndocument.getElementsByTagName(tagName)\ndocument.getElementsByClassName(className) // HTML5\ndocument.querySelector(cssSelector) // Selectors API\ndocument.querySelectorAll(cssSelector) // Selectors API\n\nelement.getAttribute(attrName) // get default HTML attribute\nelement.setAttribute(attrName, attrValue)\nelement.removeAttribute(attrName)\n\nelement.compareDocumentPosition(element)\nelement.contains(element)\nelement.isSameNode(element) // Same node reference\nelement.isEqualNode(element) // Same nodeName/nodeValue/attributes/childNodes\nelement.matches(cssSelector)\nelement.closest(cssSelector) // Returns closest ancestor matching selector\nelement.cloneNode()\nelement.normalize()\nelement.before(...elements)\nelement.after(...elements)\nelement.replaceWith(...elements)\nelement.remove()\n\nparentElement.hasChildNodes()\nparentElement.appendChild(childElement)\nparentElement.append(childElements)\nparentElement.insertBefore(newChild, targetChild)\nparentElement.replaceChild(newChild, targetChild)\nparentElement.replaceChildren(children)\nparentElement.removeChild(child)\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function showAlert(type, message, duration = 3) {\n  const div = document.createElement('div')\n  div.className = type\n  div.appendChild(document.createTextNode(message))\n  container.insertBefore(div, form)\n  setTimeout(() => div.remove(), duration * 1000)\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"node-type",children:"Node Type"}),"\n",(0,s.jsxs)(n.p,{children:["Node \u9664\u5305\u62ec\u5143\u7d20\u7ed3\u70b9 (tag) \u5916,\n\u5305\u62ec\u8bb8\u591a\u5176\u5b83\u7ed3\u70b9 (\u751a\u81f3\u7a7a\u683c\u7b26\u89c6\u4f5c\u4e00\u4e2a\u7ed3\u70b9),\n\u9700\u501f\u52a9 ",(0,s.jsx)(n.code,{children:"nodeType"})," \u627e\u51fa\u76ee\u6807\u7ed3\u70b9."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Node Type"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Node Representation"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Node Name"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Node Value"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"1"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"ELEMENT_NODE"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Tag Name"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"null"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"2"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"ATTRIBUTE_NODE"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Attr Name"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Attr Value"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"3"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"TEXT_NODE"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"#text"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Text"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"4"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"CDATA_SECTION_NODE"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"#cdata-section"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"CDATA Section"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"5"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"ENTITY_REFERENCE_NODE"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"}}),(0,s.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"6"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"ENTITY_NODE"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"}}),(0,s.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"8"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"COMMENT_NODE"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"#comment"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Comment"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"9"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"DOCUMENT_NODE"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"#document"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"null"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"10"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"DOCUMENT_TYPE_NODE"})}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,s.jsx)(n.code,{children:"html"}),"/",(0,s.jsx)(n.code,{children:"xml"})]}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"null"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"11"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"DOCUMENT_FRAGMENT_NODE"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"#document-fragment"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"null"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"12"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"NOTATION_NODE"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"}}),(0,s.jsx)(n.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const type = node.nodeType\nconst name = node.nodeName\nconst value = node.nodeValue\n\nif (someNode.nodeType === Node.ELEMENT_NODE)\n  alert('Node is an element.')\n"})}),"\n",(0,s.jsx)(n.h3,{id:"attribute",children:"Attribute"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const id = element.attributes.getNamedItem('id').nodeValue\nconst id = element.attributes.id.nodeValue\nelement.attributes.id.nodeValue = 'someOtherId'\nconst oldAttr = element.attributes.removeNamedItem('id')\nelement.attributes.setNamedItem(newAttr)\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const attr = document.createAttribute('align')\nattr.value = 'left'\nelement.setAttributeNode(attr)\n\nalert(element.attributes.align.value) // \"left\"\nalert(element.getAttributeNode('align').value) // \"left\"\nalert(element.getAttribute('align')) // \"left\"\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Further reading:\n",(0,s.jsx)(n.a,{href:"/notes/web/html/attributes#reflection",children:"DOM properties reflection on HTML attributes"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"text",children:"Text"}),"\n",(0,s.jsx)(n.p,{children:"Text node methods:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"appendData(text): \u5411\u8282\u70b9\u672b\u5c3e\u6dfb\u52a0\u6587\u672c text."}),"\n",(0,s.jsx)(n.li,{children:"deleteData(offset, count): \u4ece\u4f4d\u7f6e offset \u5f00\u59cb\u5220\u9664 count \u4e2a\u5b57\u7b26."}),"\n",(0,s.jsx)(n.li,{children:"insertData(offset, text): \u5728\u4f4d\u7f6e offset \u63d2\u5165 text."}),"\n",(0,s.jsx)(n.li,{children:"replaceData(offset, count, text): \u7528 text \u66ff\u6362\u4ece\u4f4d\u7f6e offset \u5230 offset + count \u7684\u6587\u672c."}),"\n",(0,s.jsx)(n.li,{children:"splitText(offset): \u5728\u4f4d\u7f6e offset \u5c06\u5f53\u524d\u6587\u672c\u8282\u70b9\u62c6\u5206\u4e3a\u4e24\u4e2a\u6587\u672c\u8282\u70b9."}),"\n",(0,s.jsx)(n.li,{children:"substringData(offset, count): \u63d0\u53d6\u4ece\u4f4d\u7f6e offset \u5230 offset + count \u7684\u6587\u672c."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Normalize text nodes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const element = document.createElement('div')\nelement.className = 'message'\n\nconst textNode = document.createTextNode('Hello world!')\nconst anotherTextNode = document.createTextNode('Yippee!')\n\nelement.appendChild(textNode)\nelement.appendChild(anotherTextNode)\ndocument.body.appendChild(element)\nalert(element.childNodes.length) // 2\n\nelement.normalize()\nalert(element.childNodes.length) // 1\nalert(element.firstChild.nodeValue) // \"Hello world!Yippee!\"\n"})}),"\n",(0,s.jsx)(n.p,{children:"Split text nodes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const element = document.createElement('div')\nelement.className = 'message'\n\nconst textNode = document.createTextNode('Hello world!')\nelement.appendChild(textNode)\ndocument.body.appendChild(element)\n\nconst newNode = element.firstChild.splitText(5)\nalert(element.firstChild.nodeValue) // \"Hello\"\nalert(newNode.nodeValue) // \" world!\"\nalert(element.childNodes.length) // 2\n"})}),"\n",(0,s.jsxs)(n.admonition,{title:"TextContent vs InnerText vs InnerHTML",type:"tip",children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"textContent"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Security"}),": Doesn\u2019t parse HTML."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Performance"}),": Including ",(0,s.jsx)(n.code,{children:"<script>"})," and ",(0,s.jsx)(n.code,{children:"<style>"})," text content."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"innerText"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Doesn't parse HTML."}),"\n",(0,s.jsxs)(n.li,{children:["Only show ",(0,s.jsx)(n.strong,{children:"human-readable"})," text content"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"innerText"})," care CSS styles, read ",(0,s.jsx)(n.code,{children:"innerText"})," value will trigger ",(0,s.jsx)(n.code,{children:"reflow"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"innerHTML"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Do parse HTML."}),"\n"]}),"\n"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const textContent = element.textContent\nconst innerHTML = element.innerHTML\n// eslint-disable-next-line unicorn/prefer-dom-node-text-content -- API example\nconst innerText = element.innerText\n"})})]}),"\n",(0,s.jsx)(n.h3,{id:"document",children:"Document"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"document"})," node (",(0,s.jsx)(n.code,{children:"#document"}),"):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'alert(document.nodeType) // 9\nalert(document.nodeName) // "#document"\nalert(document.nodeValue) // null\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const html = document.documentElement\nconst doctype = document.doctype\nconst head = document.head // HTML5 head.\nconst body = document.body\n\nconst title = document.title // \u53ef\u4fee\u6539.\nconst domain = document.domain // \u53ef\u8bbe\u7f6e\u540c\u6e90\u57df\u540d.\nconst url = document.URL\nconst referer = document.referer\nconst charSet = document.characterSet // HTML5 characterSet.\n\nconst anchors = documents.anchors\nconst images = documents.images\nconst links = documents.links\nconst forms = documents.forms\nconst formElements = documents.forms[0].elements // \u7b2c\u4e00\u4e2a\u8868\u5355\u5185\u7684\u6240\u6709\u5b57\u6bb5\n\n// HTML5 compatMode:\nif (document.compatMode === 'CSS1Compat')\n  console.log('Standards mode')\nelse if (document.compatMode === 'BackCompat')\n  console.log('Quirks mode')\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"document.getElementById(id)\n\ndocument.getElementsByName(name)\ndocument.getElementsByTagName(tagName)\ndocument.getElementsByClassName(className) // HTML5\ndocument.querySelector(cssSelector) // Selectors API\ndocument.querySelectorAll(cssSelector) // Selectors API\ndocument.write()\ndocument.writeln()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"document-type",children:"Document Type"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html PUBLIC "-// W3C// DTD HTML 4.01// EN" "http:// www.w3.org/TR/html4/strict.dtd">\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"console.log(document.doctype.name) // \"html\"\nconsole.log(document.nodeType) // 10\nconsole.log(document.doctype.nodeName) // \"html\"\nconsole.log(document.doctype.nodeValue) // null\nconsole.log(document.doctype.publicId) // \"-// W3C// DTD HTML 4.01// EN\"\nconsole.log(document.doctype.systemId) // \"http://www.w3.org/TR/html4/strict.dtd\"\n\nconst doctype = document.implementation.createDocumentType(\n  'html',\n  '-// W3C// DTD HTML 4.01// EN',\n  'http://www.w3.org/TR/html4/strict.dtd'\n)\nconst doc = document.implementation.createDocument(\n  'http://www.w3.org/1999/xhtml',\n  'html',\n  doctype\n)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"document-fragment",children:"Document Fragment"}),"\n",(0,s.jsx)(n.p,{children:"\u51cf\u5c11 DOM \u64cd\u4f5c\u6b21\u6570, \u51cf\u5c11\u9875\u9762\u6e32\u67d3\u6b21\u6570:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const frag = document.createDocumentFragment()\n\nlet p\nlet t\n\np = document.createElement('p')\nt = document.createTextNode('first paragraph')\np.appendChild(t)\nfrag.appendChild(p)\n\np = document.createElement('p')\nt = document.createTextNode('second paragraph')\np.appendChild(t)\nfrag.appendChild(p)\n\n// \u53ea\u6e32\u67d3\u4e00\u6b21HTML\u9875\u9762\ndocument.body.appendChild(frag)\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u514b\u9686\u8282\u70b9\u8fdb\u884c\u5904\u7406, \u5904\u7406\u5b8c\u6bd5\u540e\u518d\u66ff\u6362\u539f\u8282\u70b9:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const oldNode = document.getElementById('result')\nconst clone = oldNode.cloneNode(true)\n// work with the clone\n\n// when you're done:\noldNode.parentNode.replaceChild(clone, oldNode)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Parse HTML:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const range = document.createRange()\nconst parse = range.createContextualFragment.bind(range)\n\nparse(`<ol>\n  <li>a</li>\n  <li>b</li>\n</ol>\n<ol>\n  <li>c</li>\n  <li>d</li>\n</ol>`)\n\nfunction parseHTML(string) {\n  const context = document.implementation.createHTMLDocument()\n\n  // Set the base href for the created document so any parsed elements with URLs\n  // are based on the document's URL\n  const base = context.createElement('base')\n  base.href = document.location.href\n  context.head.appendChild(base)\n\n  context.body.innerHTML = string\n  return context.body.children\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"manipulation",children:"Manipulation"}),"\n",(0,s.jsx)(n.h3,{id:"append",children:"Append"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Method"}),(0,s.jsx)(n.th,{children:"Node"}),(0,s.jsx)(n.th,{children:"HTML"}),(0,s.jsx)(n.th,{children:"Text"}),(0,s.jsx)(n.th,{children:"IE"}),(0,s.jsx)(n.th,{children:"Event Listeners"}),(0,s.jsx)(n.th,{children:"Secure"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"append"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Preserves"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"appendChild"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Preserves"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"innerHTML"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Loses"}),(0,s.jsx)(n.td,{children:"Careful"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"insertAdjacentHTML"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Preserves"}),(0,s.jsx)(n.td,{children:"Careful"})]})]})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const testDiv = document.getElementById('testDiv')\n\nconst para = document.createElement('p')\ntestDiv.appendChild(para)\n\nconst txt = document.createTextNode('Hello World')\npara.appendChild(txt)\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"innerHTML"}),": non-concrete, including all types of childNodes:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"div.innerHTML = '<p>Test<em>test</em>Test.</p>'\n// <div>\n//   <p>Test<em>test</em>Test.</p>\n// </div>\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"innerHTML"})," performance:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// BAD\nfor (const value of values)\n  ul.innerHTML += `<li>${value}</li>` // \u522b\u8fd9\u6837\u505a\uff01\n\n// GOOD\nlet itemsHtml = ''\nfor (const value of values)\n  itemsHtml += `<li>${value}</li>`\n\nul.innerHTML = itemsHtml\n\n// BEST\nul.innerHTML = values.map(value => `<li>${value}</li>`).join('')\n"})}),"\n",(0,s.jsx)(n.h3,{id:"insert",children:"Insert"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Append\nel.appendChild(newEl)\n\n// Prepend\nel.insertBefore(newEl, el.firstChild)\n\n// InsertBefore\nel.parentNode.insertBefore(newEl, el)\n\n// InsertAfter\nfunction insertAfter(newElement, targetElement) {\n  const parent = targetElement.parentNode\n\n  if (parent.lastChild === targetElement)\n    parent.appendChild(newElement)\n  else\n    parent.insertBefore(newElement, targetElement.nextSibling)\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"insertAdjacentHTML"}),"/",(0,s.jsx)(n.code,{children:"insertAdjacentText"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"beforebegin: \u63d2\u5165\u524d\u4e00\u4e2a\u5144\u5f1f\u8282\u70b9."}),"\n",(0,s.jsx)(n.li,{children:"afterbegin: \u63d2\u5165\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9."}),"\n",(0,s.jsx)(n.li,{children:"beforeend: \u63d2\u5165\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9."}),"\n",(0,s.jsx)(n.li,{children:"afterend: \u63d2\u5165\u4e0b\u4e00\u4e2a\u5144\u5f1f\u8282\u70b9."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// 4 positions:\n//\n// \x3c!-- beforebegin --\x3e\n// <p>\n// \x3c!-- afterbegin --\x3e\n// foo\n// \x3c!-- beforeend --\x3e\n// </p>\n// \x3c!-- afterend --\x3e\nconst p = document.querySelector('p')\n\np.insertAdjacentHTML('beforebegin', '<a></a>')\np.insertAdjacentText('afterbegin', 'foo')\n\n// simply be moved element, not copied element\np.insertAdjacentElement('beforebegin', link)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"replace",children:"Replace"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"node.replaceChild(document.createTextNode(text), node.firstChild)\nnode.replaceChildren(...nodeList)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"remove",children:"Remove"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// \u5220\u9664\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9\nconst formerFirstChild = someNode.removeChild(someNode.firstChild)\n\n// \u5220\u9664\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9\nconst formerLastChild = someNode.removeChild(someNode.lastChild)\n\nwhile (div.firstChild)\n  div.removeChild(div.firstChild)\n\n// Remove self\nel.parentNode.removeChild(el)\nel.remove()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"traverse",children:"Traverse"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const parent = node.parentNode\nconst children = node.childNodes\nconst first = node.firstChild\nconst last = node.lastChild\nconst previous = node.previousSibling\nconst next = node.nextSibling\n\nnode.matches(selector)\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://www.w3.org/TR/ElementTraversal",children:"Element Traversal API"}),":\nnavigation properties listed above refer to all nodes.\nFor instance,\nin ",(0,s.jsx)(n.code,{children:"childNodes"})," can see both text nodes, element nodes, and even comment nodes."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const count = el.childElementCount\nconst parent = el.parentElement\nconst children = el.children\nconst first = el.firstElementChild\nconst last = el.lastElementChild\nconst previous = el.previousElementSibling\nconst next = el.nextElementSibling\n\nel.matches(selector)\n"})}),"\n",(0,s.jsx)(n.p,{children:"NodeList is iterable:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const elements = document.querySelectorAll('div')\n\nfor (const element of elements)\n  console.log(element)\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/NodeIterator",children:"Node Iterator"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const div = document.getElementById('div1')\nfunction filter(node) {\n  return node.tagName.toLowerCase() === 'li'\n    ? NodeFilter.FILTER_ACCEPT\n    : NodeFilter.FILTER_SKIP\n}\nconst iterator = document.createNodeIterator(\n  div,\n  NodeFilter.SHOW_ELEMENT,\n  filter,\n  false\n)\n\nfor (\n  let node = iterator.nextNode();\n  node !== null;\n  node = iterator.nextNode()\n)\n  console.log(node.tagName) // \u8f93\u51fa\u6807\u7b7e\u540d\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/TreeWalker",children:"Tree Walker"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const div = document.getElementById('div1')\nconst walker = document.createTreeWalker(\n  div,\n  NodeFilter.SHOW_ELEMENT,\n  null,\n  false\n)\n\nwalker.firstChild() // \u524d\u5f80<p>\nwalker.nextSibling() // \u524d\u5f80<ul>\n\nfor (\n  let node = walker.firstChild();\n  node !== null;\n  node = walker.nextSibling()\n)\n  console.log(node.tagName) // \u904d\u5386 <li>\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"NodeIterator vs TreeWalker",type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"NodeFilter.acceptNode()"})," ",(0,s.jsx)(n.code,{children:"FILTER_REJECT"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["For ",(0,s.jsx)(n.code,{children:"NodeIterator"}),", this flag is synonymous with ",(0,s.jsx)(n.code,{children:"FILTER_SKIP"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["For ",(0,s.jsx)(n.code,{children:"TreeWalker"}),", child nodes are also rejected."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TreeWalker"})," has more methods:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"firstChild"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"lastChild"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"previousSibling"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"nextSibling"}),"."]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsx)(n.h3,{id:"attributes",children:"Attributes"}),"\n",(0,s.jsx)(n.p,{children:"HTML attributes \u8bbe\u7f6e\u5bf9\u5e94\u7684 DOM properties \u521d\u59cb\u503c:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"alert(div.getAttribute('id')) // \"myDiv\" default div.id\nalert(div.getAttribute('class')) // \"bd\" default div.class\ndiv.setAttribute('id', 'someOtherId')\ndiv.setAttribute('class', 'ft')\ndiv.removeAttribute('id')\ndiv.removeAttribute('class')\n\n// `data-src`\nconsole.log(el.dataset.src)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"select",children:"Select"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Range",children:"Range API"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"startContainer"}),": \u8303\u56f4\u8d77\u70b9\u6240\u5728\u7684\u8282\u70b9 (\u9009\u533a\u4e2d\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9\u7684\u7236\u8282\u70b9)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"startOffset"}),": \u8303\u56f4\u8d77\u70b9\u5728 startContainer \u4e2d\u7684\u504f\u79fb\u91cf."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"endContainer"}),": \u8303\u56f4\u7ec8\u70b9\u6240\u5728\u7684\u8282\u70b9 (\u9009\u533a\u4e2d\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9\u7684\u7236\u8282\u70b9)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"endOffset"}),": \u8303\u56f4\u8d77\u70b9\u5728 startContainer \u4e2d\u7684\u504f\u79fb\u91cf."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"commonAncestorContainer"}),":\n\u6587\u6863\u4e2d\u4ee5 ",(0,s.jsx)(n.code,{children:"startContainer"})," \u548c ",(0,s.jsx)(n.code,{children:"endContainer"})," \u4e3a\u540e\u4ee3\u7684\u6700\u6df1\u7684\u8282\u70b9."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"setStartBefore(refNode)"}),":\n\u628a\u8303\u56f4\u7684\u8d77\u70b9\u8bbe\u7f6e\u5230 refNode \u4e4b\u524d,\n\u4ece\u800c\u8ba9 refNode \u6210\u4e3a\u9009\u533a\u7684\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"setStartAfter(refNode)"}),":\n\u628a\u8303\u56f4\u7684\u8d77\u70b9\u8bbe\u7f6e\u5230 refNode \u4e4b\u540e,\n\u4ece\u800c\u5c06 refNode \u6392\u9664\u5728\u9009\u533a\u4e4b\u5916,\n\u8ba9\u5176\u4e0b\u4e00\u4e2a\u540c\u80de\u8282\u70b9\u6210\u4e3a\u9009\u533a\u7684\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"setEndBefore(refNode)"}),":\n\u628a\u8303\u56f4\u7684\u7ec8\u70b9\u8bbe\u7f6e\u5230 refNode \u4e4b\u524d,\n\u4ece\u800c\u5c06 refNode \u6392\u9664\u5728\u9009\u533a\u4e4b\u5916,\n\u8ba9\u5176\u4e0a\u4e00\u4e2a\u540c\u80de\u8282\u70b9\u6210\u4e3a\u9009\u533a\u7684\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"setEndAfter(refNode)"}),":\n\u628a\u8303\u56f4\u7684\u7ec8\u70b9\u8bbe\u7f6e\u5230 refNode \u4e4b\u540e,\n\u4ece\u800c\u8ba9 refNode \u6210\u4e3a\u9009\u533a\u7684\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"setStart(refNode, offset)"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"setEnd(refNode, offset)"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"deleteContents()"}),": remove."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"extractContents()"}),": remove and return."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"cloneContents()"}),": clone."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"insertNode(node)"}),": \u5728\u8303\u56f4\u9009\u533a\u7684\u5f00\u59cb\u4f4d\u7f6e\u63d2\u5165\u4e00\u4e2a\u8282\u70b9."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"surroundContents(node)"}),": \u63d2\u5165\u5305\u542b\u8303\u56f4\u7684\u5185\u5bb9."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"collapse(boolean)"}),": \u8303\u56f4\u6298\u53e0."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"compareBoundaryPoints(Range.HOW, sourceRange)"}),": \u786e\u5b9a\u8303\u56f4\u4e4b\u95f4\u662f\u5426\u5b58\u5728\u516c\u5171\u7684\u8fb9\u754c (\u8d77\u70b9\u6216\u7ec8\u70b9)."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<!doctype html>\n<html>\n  <body>\n    <p id="p1"><b>Hello</b> world!</p>\n  </body>\n</html>\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const p1 = document.getElementById('p1')\nconst helloNode = p1.firstChild.firstChild\nconst worldNode = p1.lastChild\nconst range = document.createRange()\n\nrange.setStart(helloNode, 2)\nrange.setEnd(worldNode, 3)\nconst fragment1 = range.cloneContents() // clone\nconst fragment2 = range.extractContents() // remove and return\n\np1.parentNode.appendChild(fragment1)\np1.parentNode.appendChild(fragment2)\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const p1 = document.getElementById('p1')\nconst helloNode = p1.firstChild.firstChild\nconst worldNode = p1.lastChild\nconst range = document.createRange()\n\nconst span = document.createElement('span')\nspan.style.color = 'red'\nspan.appendChild(document.createTextNode('Inserted text'))\n\nrange.setStart(helloNode, 2)\nrange.setEnd(worldNode, 3)\nrange.insertNode(span)\n// <p id=\"p1\"><b>He<span style=\"color: red\">Inserted text</span>llo</b> world</p>\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const p1 = document.getElementById('p1')\nconst helloNode = p1.firstChild.firstChild\nconst worldNode = p1.lastChild\nconst range = document.createRange()\n\nconst span = document.createElement('span')\nspan.style.backgroundColor = 'yellow'\n\nrange.selectNode(helloNode)\nrange.surroundContents(span)\n// <p><b><span style=\"background-color:yellow\">Hello</span></b> world!</p>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"geometry",children:"Geometry"}),"\n",(0,s.jsx)(n.h3,{id:"dimensions",children:"Dimensions"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"outerHeight: \u6574\u4e2a\u6d4f\u89c8\u5668\u7a97\u53e3\u7684\u5927\u5c0f, \u5305\u62ec\u7a97\u53e3\u6807\u9898/\u5de5\u5177\u680f/\u72b6\u6001\u680f\u7b49."}),"\n",(0,s.jsx)(n.li,{children:"innerHeight: DOM \u89c6\u53e3\u7684\u5927\u5c0f, \u5305\u62ec\u6eda\u52a8\u6761."}),"\n",(0,s.jsx)(n.li,{children:"offsetHeight: \u6574\u4e2a\u53ef\u89c6\u533a\u57df\u5927\u5c0f, \u5305\u62ec border \u548c scrollbar \u5728\u5185 (content + padding + border)."}),"\n",(0,s.jsx)(n.li,{children:"clientHeight: \u5185\u90e8\u53ef\u89c6\u533a\u57df\u5927\u5c0f (content + padding)."}),"\n",(0,s.jsx)(n.li,{children:"scrollHeight: \u5143\u7d20\u5185\u5bb9\u7684\u9ad8\u5ea6, \u5305\u62ec\u6ea2\u51fa\u90e8\u5206."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Client Size",src:t(47436).A+"",title:"Client Size",width:"683",height:"617"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// const supportInnerWidth = window.innerWidth !== undefined;\n// const supportInnerHeight = window.innerHeight !== undefined;\n// const isCSS1Compat = (document.compatMode || '') === 'CSS1Compat';\nconst width\n  = window.innerWidth\n    || document.documentElement.clientWidth\n    || document.body.clientWidth\nconst height\n  = window.innerHeight\n    || document.documentElement.clientHeight\n    || document.body.clientHeight\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// \u7f29\u653e\u5230 100\xd7100\nwindow.resizeTo(100, 100)\n// \u7f29\u653e\u5230 200\xd7150\nwindow.resizeBy(100, 50)\n// \u7f29\u653e\u5230 300\xd7300\nwindow.resizeTo(300, 300)\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"DOM Rect API",type:"tip",children:(0,s.jsx)(n.p,{children:"In case of transforms,\nthe offsetWidth and offsetHeight returns the layout width and height (all the same),\nwhile getBoundingClientRect() returns the rendering width and height."})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"getBoundingClientRect"}),":"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Element/getBoundingClientRect",children:(0,s.jsx)(n.img,{src:"https://developer.mozilla.org/docs/Web/API/Element/getBoundingClientRect/element-box-diagram.png",alt:"Client Rect"})})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function isElementInViewport(el) {\n  const { top, height, left, width } = el.getBoundingClientRect()\n  const w\n    = window.innerWidth\n      || document.documentElement.clientWidth\n      || document.body.clientWidth\n  const h\n    = window.innerHeight\n      || document.documentElement.clientHeight\n      || document.body.clientHeight\n\n  return top <= h && top + height >= 0 && left <= w && left + width >= 0\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"position",children:"Position"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"offsetLeft/offsetTop:\n\u8868\u793a\u8be5\u5143\u7d20\u7684\u5de6\u4e0a\u89d2 (\u8fb9\u6846\u5916\u8fb9\u7f18) \u4e0e\u5df2\u5b9a\u4f4d\u7684\u7236\u5bb9\u5668 (offsetParent \u5bf9\u8c61) \u5de6\u4e0a\u89d2\u7684\u8ddd\u79bb."}),"\n",(0,s.jsxs)(n.li,{children:["clientLeft/clientTop:\n\u8868\u793a\u8be5\u5143\u7d20 padding \u81f3 margin \u7684\u8ddd\u79bb,\n\u59cb\u7ec8\u7b49\u4e8e ",(0,s.jsx)(n.code,{children:".getComputedStyle()"})," \u8fd4\u56de\u7684 ",(0,s.jsx)(n.code,{children:"border-left-width"}),"/",(0,s.jsx)(n.code,{children:"border-top-width"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"scrollLeft/scrollTop:\n\u5143\u7d20\u6eda\u52a8\u6761\u4f4d\u7f6e, \u88ab\u9690\u85cf\u7684\u5185\u5bb9\u533a\u57df\u5de6\u4fa7/\u4e0a\u65b9\u7684\u50cf\u7d20\u4f4d\u7f6e."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Offset Size",src:t(50800).A+"",title:"Offset Size",width:"965",height:"614"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function getElementLeft(element) {\n  let actualLeft = element.offsetLeft\n  let current = element.offsetParent\n\n  while (current !== null) {\n    actualLeft += current.offsetLeft\n    current = current.offsetParent\n  }\n\n  return actualLeft\n}\n\nfunction getElementTop(element) {\n  let actualTop = element.offsetTop\n  let current = element.offsetParent\n\n  while (current !== null) {\n    actualTop += current.offsetTop\n    current = current.offsetParent\n  }\n\n  return actualTop\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// \u628a\u7a97\u53e3\u79fb\u52a8\u5230\u5de6\u4e0a\u89d2\nwindow.moveTo(0, 0)\n// \u628a\u7a97\u53e3\u5411\u4e0b\u79fb\u52a8 100 \u50cf\u7d20\nwindow.moveBy(0, 100)\n// \u628a\u7a97\u53e3\u79fb\u52a8\u5230\u5750\u6807\u4f4d\u7f6e (200, 300)\nwindow.moveTo(200, 300)\n// \u628a\u7a97\u53e3\u5411\u5de6\u79fb\u52a8 50 \u50cf\u7d20\nwindow.moveBy(-50, 0)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"scrolling",children:"Scrolling"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"scrollLeft/scrollX/PageXOffset: \u5143\u7d20\u5185\u5bb9\u5411\u53f3\u6eda\u52a8\u4e86\u591a\u5c11\u50cf\u7d20, \u5982\u679c\u6ca1\u6709\u6eda\u52a8\u5219\u4e3a 0."}),"\n",(0,s.jsx)(n.li,{children:"scrollTop/scrollY/pageYOffset: \u5143\u7d20\u5185\u5bb9\u5411\u4e0a\u6eda\u52a8\u4e86\u591a\u5c11\u50cf\u7d20, \u5982\u679c\u6ca1\u6709\u6eda\u52a8\u5219\u4e3a 0."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Scroll Size",src:t(9162).A+"",title:"Scroll Size",width:"1162",height:"710"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// const supportPageOffset = window.pageXOffset !== undefined;\n// const isCSS1Compat = (document.compatMode || '') === 'CSS1Compat';\nconst x\n  = window.pageXOffset\n    || document.documentElement.scrollLeft\n    || document.body.scrollLeft\nconst y\n  = window.pageYOffset\n    || document.documentElement.scrollTop\n    || document.body.scrollTop\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"if (window.innerHeight + window.pageYOffset === document.body.scrollHeight)\n  console.log('Scrolled to Bottom!')\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// \u76f8\u5bf9\u4e8e\u5f53\u524d\u89c6\u53e3\u5411\u4e0b\u6eda\u52a8 100 \u50cf\u7d20\nwindow.scrollBy(0, 100)\n// \u76f8\u5bf9\u4e8e\u5f53\u524d\u89c6\u53e3\u5411\u53f3\u6eda\u52a8 40 \u50cf\u7d20\nwindow.scrollBy(40, 0)\n\n// \u6eda\u52a8\u5230\u9875\u9762\u5de6\u4e0a\u89d2\nwindow.scrollTo(0, 0)\n// \u6eda\u52a8\u5230\u8ddd\u79bb\u5c4f\u5e55\u5de6\u8fb9\u53ca\u9876\u8fb9\u5404 100 \u50cf\u7d20\u7684\u4f4d\u7f6e\nwindow.scrollTo(100, 100)\n// \u6b63\u5e38\u6eda\u52a8\nwindow.scrollTo({\n  left: 100,\n  top: 100,\n  behavior: 'auto',\n})\n// \u5e73\u6ed1\u6eda\u52a8\nwindow.scrollTo({\n  left: 100,\n  top: 100,\n  behavior: 'smooth',\n})\n\ndocument.forms[0].scrollIntoView() // \u7a97\u53e3\u6eda\u52a8\u540e, \u5143\u7d20\u5e95\u90e8\u4e0e\u89c6\u53e3\u5e95\u90e8\u5bf9\u9f50.\ndocument.forms[0].scrollIntoView(true) // \u7a97\u53e3\u6eda\u52a8\u540e, \u5143\u7d20\u9876\u90e8\u4e0e\u89c6\u53e3\u9876\u90e8\u5bf9\u9f50.\ndocument.forms[0].scrollIntoView({ block: 'start' })\ndocument.forms[0].scrollIntoView({ behavior: 'smooth', block: 'start' })\n"})}),"\n",(0,s.jsx)(n.h2,{id:"loading",children:"Loading"}),"\n",(0,s.jsx)(n.h3,{id:"dynamic-scripts",children:"Dynamic Scripts"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function loadScript(url) {\n  const script = document.createElement('script')\n  script.src = url\n  script.async = true\n  document.body.appendChild(script)\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function loadScriptString(code) {\n  const script = document.createElement('script')\n  script.async = true\n  script.type = 'text/javascript'\n\n  try {\n    script.appendChild(document.createTextNode(code))\n  } catch (ex) {\n    script.text = code\n  }\n\n  document.body.appendChild(script)\n}\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"InnerHTML Script",type:"caution",children:(0,s.jsxs)(n.p,{children:["\u6240\u6709\u73b0\u4ee3\u6d4f\u89c8\u5668\u4e2d, \u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"innerHTML"})," \u5c5e\u6027\u521b\u5efa\u7684 ",(0,s.jsx)(n.code,{children:"<script>"})," \u5143\u7d20\u6c38\u8fdc\u4e0d\u4f1a\u6267\u884c."]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Next.js route ",(0,s.jsx)(n.a,{href:"https://github.com/vercel/next.js/blob/canary/packages/next/client/route-loader.ts",children:"loader"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Next.js ",(0,s.jsx)(n.code,{children:"<Script>"})," ",(0,s.jsx)(n.a,{href:"https://github.com/vercel/next.js/blob/canary/packages/next/client/script.tsx",children:"component"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"dynamic-styles",children:"Dynamic Styles"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function loadStyles(url) {\n  const link = document.createElement('link')\n  link.rel = 'stylesheet'\n  link.type = 'text/css'\n  link.href = url\n\n  const head = document.getElementsByTagName('head')[0]\n  head.appendChild(link)\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function loadStyleString(css) {\n  const style = document.createElement('style')\n  style.type = 'text/css'\n\n  try {\n    style.appendChild(document.createTextNode(css))\n  } catch (ex) {\n    style.styleSheet.cssText = css\n  }\n\n  const head = document.getElementsByTagName('head')[0]\n  head.appendChild(style)\n}\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"StyleSheet CSSText",type:"danger",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u82e5\u91cd\u7528\u540c\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"<style>"})," \u5143\u7d20\u5e76\u8bbe\u7f6e\u8be5\u5c5e\u6027\u8d85\u8fc7\u4e00\u6b21, \u5219\u53ef\u80fd\u5bfc\u81f4\u6d4f\u89c8\u5668\u5d29\u6e83."]}),"\n",(0,s.jsxs)(n.li,{children:["\u5c06 ",(0,s.jsx)(n.code,{children:"cssText"})," \u8bbe\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32\u4e5f\u53ef\u80fd\u5bfc\u81f4\u6d4f\u89c8\u5668\u5d29\u6e83."]}),"\n"]})}),"\n",(0,s.jsx)(n.h2,{id:"xml-namespace",children:"XML Namespace"}),"\n",(0,s.jsxs)(n.p,{children:["XML \u547d\u540d\u7a7a\u95f4\u53ef\u4ee5\u5b9e\u73b0\u5728\u4e00\u4e2a\u683c\u5f0f\u89c4\u8303\u7684\u6587\u6863\u4e2d\u6df7\u7528\u4e0d\u540c\u7684 XML \u8bed\u8a00,\n\u907f\u514d\u5143\u7d20\u547d\u540d\u51b2\u7a81 (",(0,s.jsx)(n.code,{children:"tagName"}),"/",(0,s.jsx)(n.code,{children:"localName"}),"/",(0,s.jsx)(n.code,{children:"namespaceURI"}),"):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<html xmlns="http://www.w3.org/1999/xhtml">\n  <head>\n    <title>Example XHTML page</title>\n  </head>\n  <body>\n    <s:svg xmlns:s="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" style="width: 100%; height: 100%">\n      <s:rect x="0" y="0" width="100" height="100" style="fill: red" />\n    </s:svg>\n  </body>\n</html>\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"console.log(document.body.isDefaultNamespace('http://www.w3.org/1999/xhtml'))\nconsole.log(svg.lookupPrefix('http://www.w3.org/2000/svg')) // \"s\"\nconsole.log(svg.lookupNamespaceURI('s')) // \"http://www.w3.org/2000/svg\"\n\nconst newSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\nconst newAttr = document.createAttributeNS('http://www.somewhere.com', 'random')\nconst elems = document.getElementsByTagNameNS(\n  'http://www.w3.org/1999/xhtml',\n  '*'\n)\n"})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},47436:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/client-size-188639869aa83d77661cdd7924b149a1.png"},50800:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/offset-size-aae54cfc6d6752f66a0d8587797f0820.png"},9162:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/scroll-size-0fbec70f8a0fcc83776fd80e9ff17f01.png"},86145:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>r});var l=t(57140);const s={},d=l.createContext(s);function i(e){const n=l.useContext(d);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),l.createElement(d.Provider,{value:n},e.children)}}}]);