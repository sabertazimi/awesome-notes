"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[58699],{65092:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"web/vue/router","title":"Router","description":"Routes","source":"@site/content/web/vue/router.md","sourceDirName":"web/vue","slug":"/web/vue/router","permalink":"/notes/web/vue/router","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/vue/router.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"Vue","permalink":"/notes/tags/vue"},{"inline":true,"label":"Router","permalink":"/notes/tags/router"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":16,"frontMatter":{"tags":["Web","Vue","Router"],"sidebar_position":16},"sidebar":"tutorialSidebar","previous":{"title":"Keep Alive and Teleport","permalink":"/notes/web/vue/keep-alive-teleport"},"next":{"title":"Vuex","permalink":"/notes/web/vue/vuex"}}');var s=r(35656),o=r(86145);const a={tags:["Web","Vue","Router"],sidebar_position:16},i="Router",l={},c=[{value:"Routes",id:"routes",level:2},{value:"Dynamic",id:"dynamic",level:2},{value:"APIs",id:"apis",level:2},{value:"Passing Props",id:"passing-props",level:2},{value:"Named",id:"named",level:2},{value:"Nested",id:"nested",level:2},{value:"Programmatic Navigation",id:"programmatic-navigation",level:2},{value:"Navigate",id:"navigate",level:3},{value:"Replace",id:"replace",level:3},{value:"Traverse",id:"traverse",level:3},{value:"Navigation Guard",id:"navigation-guard",level:2},{value:"Configuration",id:"configuration",level:3},{value:"Global",id:"global",level:3},{value:"Navigation Resolution",id:"navigation-resolution",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"router",children:"Router"})}),"\n",(0,s.jsx)(n.h2,{id:"routes",children:"Routes"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import type { RouteRecordRaw } from 'vue-router'\nimport { createRouter, createWebHistory } from 'vue-router'\nimport Home from '../views/Home.vue'\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: '/',\n    name: 'Home',\n    component: Home,\n  },\n  {\n    path: '/about',\n    name: 'About',\n    component: () =>\n      import(/* webpackChunkName: \"about\" */ '../views/About.vue'),\n  },\n]\n\nconst router = createRouter({\n  history: createWebHistory(import.meta.env.BASE_URL),\n  routes,\n})\n\nexport default router\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\n\ncreateApp(App).use(store).use(router).mount('#app')\n"})}),"\n",(0,s.jsx)(n.h2,{id:"dynamic",children:"Dynamic"}),"\n",(0,s.jsxs)(n.p,{children:["Two methods to access route ",(0,s.jsx)(n.code,{children:"params"})," in components:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Composition route API: ",(0,s.jsx)(n.code,{children:"const { params } = useRoute()"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Passing route props to component: ",(0,s.jsx)(n.code,{children:"const props = defineProps<{ id: string }>()"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"props"})," better testing friendly."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"props"})," better TypeScript types inference."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<template>\n  <router-link class="event-link" :to="{ name: \'EventDetails\', params: { id: event.id } }">\n    <div class="event-card">\n      <span>@{{ event.time }} on {{ event.date }}</span>\n      <h4>{{ event.title }}</h4>\n    </div>\n  </router-link>\n</template>\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Can't access to ",(0,s.jsx)(n.code,{children:"this"})," inside of ",(0,s.jsx)(n.code,{children:"setup"}),",\nwe cannot directly access ",(0,s.jsx)(n.code,{children:"this.$router"})," or ",(0,s.jsx)(n.code,{children:"this.$route"})," anymore."]})}),"\n",(0,s.jsx)(n.h2,{id:"apis",children:"APIs"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://next.router.vuejs.org/guide/advanced/composition-api.html",children:"Composition API"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import type { RouteRecordRaw } from 'vue-router'\nimport { createRouter, createWebHistory } from 'vue-router'\nimport EventDetails from '../views/EventDetails.vue'\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: '/event/:id',\n    name: 'EventDetails',\n    component: EventDetails,\n  },\n]\n\nconst router = createRouter({\n  history: createWebHistory(import.meta.env.BASE_URL),\n  routes,\n})\n\nexport default router\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"<script setup lang=\"ts\">\n  import { useRoute } from 'vue-router'\n  import { getEvent } from '@/services'\n  import type { Event } from '@/services'\n\n  const { params } = useRoute()\n  const event: Event = await getEvent(Number.parseInt(params.id))\n<\/script>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"passing-props",children:"Passing Props"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import type { RouteRecordRaw } from 'vue-router'\nimport { createRouter, createWebHistory } from 'vue-router'\nimport EventDetails from '../views/EventDetails.vue'\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: '/event/:id',\n    name: 'EventDetails',\n    component: EventDetails,\n    props: true /* Passing route props to component */,\n  },\n]\n\nconst router = createRouter({\n  history: createWebHistory(import.meta.env.BASE_URL),\n  routes,\n})\n\nexport default router\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"<script setup lang=\"ts\">\n  import { getEvent } from '@/services'\n  import type { Event } from '@/services'\n\n  const props = defineProps<{ id: string }>()\n  const event: Event = await getEvent(Number.parseInt(props.id))\n<\/script>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"named",children:"Named"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const routes = [\n  {\n    path: '/user/:username',\n    name: 'User',\n    component: User,\n  },\n]\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"<router-link :to=\"{ name: 'User', params: { username: 'sabertaz' }\"> User </router-link>\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"router.push({ name: 'User', params: { username: 'sabertaz' } })\n"})}),"\n",(0,s.jsx)(n.h2,{id:"nested",children:"Nested"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const routes: Array<RouteRecordRaw> = [\n  {\n    path: '/',\n    name: 'board',\n    component: Board,\n    children: [\n      {\n        path: 'task/:id',\n        name: 'task',\n        component: Task,\n        props: true,\n      },\n    ],\n  },\n]\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"\x3c!-- App.vue --\x3e\n\x3c!-- Root router view --\x3e\n<template><router-view /></template>\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"\x3c!-- Board.vue --\x3e\n\x3c!-- Nested router view --\x3e\n<template>\n  <div>Board View</div>\n  <router-view />\n</template>\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'\x3c!-- Task.vue --\x3e\n<script setup lang="ts">\n  defineProps<{ id: string }>()\n<\/script>\n\n<template>\n  <div>Task View {{ id }}</div>\n</template>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"programmatic-navigation",children:"Programmatic Navigation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { useRouter } from 'vue-router'\n\nfunction App() {\n  const router = useRouter()\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"navigate",children:"Navigate"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const username = 'eduardo'\n// we can manually build the url but we will have to handle encoding ourselves\nrouter.push(`/user/${username}`) // -> /user/eduardo\n// same as\nrouter.push({ path: `/user/${username}` }) // -> /user/eduardo\n// if possible use `name` and `params` to benefit from automatic URL encoding\nrouter.push({ name: 'user', params: { username } }) // -> /user/eduardo\n// `params` cannot be used alongside `path`\nrouter.push({ path: '/user', params: { username } }) // -> /user\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// literal string path\nrouter.push('/users/eduardo')\n\n// object with path\nrouter.push({ path: '/users/eduardo' })\n\n// named route with params to let the router build the url\nrouter.push({ name: 'user', params: { username: 'eduardo' } })\n\n// with query, resulting in /register?plan=private\nrouter.push({ path: '/register', query: { plan: 'private' } })\n\n// with hash, resulting in /about#team\nrouter.push({ path: '/about', hash: '#team' })\n"})}),"\n",(0,s.jsx)(n.h3,{id:"replace",children:"Replace"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// replace current location\nrouter.push({ path: '/home', replace: true })\n// equivalent to\nrouter.replace({ path: '/home' })\n"})}),"\n",(0,s.jsx)(n.h3,{id:"traverse",children:"Traverse"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// go forward by one record, same as router.forward()\nrouter.go(1)\n\n// go back by one record, same as router.back()\nrouter.go(-1)\n\n// go forward by 3 records\nrouter.go(3)\n\n// fails silently if there aren't that many records\nrouter.go(-100)\nrouter.go(100)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"navigation-guard",children:"Navigation Guard"}),"\n",(0,s.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const routes = [\n  {\n    path: '/users/:id',\n    component: UserDetails,\n    beforeEnter: (to, from) => {\n      // reject the navigation\n      return false\n    },\n  },\n]\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"caution",children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"beforeEnter"})," guards only trigger when entering a route,\ndon't trigger when params, query or hash change."]}),(0,s.jsxs)(n.p,{children:["Going from ",(0,s.jsx)(n.code,{children:"/users/2"})," to ",(0,s.jsx)(n.code,{children:"/users/3"})," or going from ",(0,s.jsx)(n.code,{children:"/users/2#info"})," to ",(0,s.jsx)(n.code,{children:"/users/2#projects"}),"\ndon't trigger ",(0,s.jsx)(n.code,{children:"beforeEnter"})," guards."]})]}),"\n",(0,s.jsx)(n.h3,{id:"global",children:"Global"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"router.beforeEach((to, from, next) => {\n  if (to.name !== 'Login' && !isAuthenticated)\n    next({ name: 'Login' })\n  else next()\n})\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"router.beforeResolve(async (to) => {\n  if (to.meta.requiresCamera) {\n    try {\n      await askForCameraPermission()\n    } catch (error) {\n      if (error instanceof NotAllowedError) {\n        // Handle the error and then cancel the navigation.\n        return false\n      } else {\n        // Unexpected error: cancel the navigation and pass error to global handler.\n        throw error\n      }\n    }\n  }\n})\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"router.afterEach((to, from, failure) => {\n  if (!failure)\n    sendToAnalytics(to.fullPath)\n})\n"})}),"\n",(0,s.jsx)(n.h2,{id:"navigation-resolution",children:"Navigation Resolution"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Navigation triggered."}),"\n",(0,s.jsxs)(n.li,{children:["Call ",(0,s.jsx)(n.code,{children:"beforeRouteLeave"})," guards in deactivated components."]}),"\n",(0,s.jsxs)(n.li,{children:["Call global ",(0,s.jsx)(n.code,{children:"beforeEach"})," guards."]}),"\n",(0,s.jsxs)(n.li,{children:["Call ",(0,s.jsx)(n.code,{children:"beforeRouteUpdate"})," guards in reused components."]}),"\n",(0,s.jsxs)(n.li,{children:["Call ",(0,s.jsx)(n.code,{children:"beforeEnter"})," in route configs."]}),"\n",(0,s.jsx)(n.li,{children:"Resolve async route components."}),"\n",(0,s.jsxs)(n.li,{children:["Call ",(0,s.jsx)(n.code,{children:"beforeRouteEnter"})," in activated components."]}),"\n",(0,s.jsxs)(n.li,{children:["Call global ",(0,s.jsx)(n.code,{children:"beforeResolve"})," guards."]}),"\n",(0,s.jsx)(n.li,{children:"Navigation is confirmed."}),"\n",(0,s.jsxs)(n.li,{children:["Call global ",(0,s.jsx)(n.code,{children:"afterEach"})," hooks."]}),"\n",(0,s.jsx)(n.li,{children:"DOM updates triggered."}),"\n",(0,s.jsxs)(n.li,{children:["Call ",(0,s.jsx)(n.code,{children:"next"})," callbacks in ",(0,s.jsx)(n.code,{children:"beforeRouteEnter"})," guards with instantiated instances."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},86145:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>i});var t=r(57140);const s={},o=t.createContext(s);function a(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);