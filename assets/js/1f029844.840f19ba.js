"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[71571],{30741:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>a,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"web/network/http","title":"HTTP","description":"Application layer protocol defines:","source":"@site/content/web/network/http.md","sourceDirName":"web/network","slug":"/web/network/http","permalink":"/notes/web/network/http","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/network/http.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"Network","permalink":"/notes/tags/network"},{"inline":true,"label":"HTTP","permalink":"/notes/tags/http"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2,"tags":["Web","Network","HTTP"]},"sidebar":"tutorialSidebar","previous":{"title":"Internet","permalink":"/notes/web/network/internet"},"next":{"title":"HTTP 2","permalink":"/notes/web/network/http-2"}}');var t=s(35656),r=s(86145);const l={sidebar_position:2,tags:["Web","Network","HTTP"]},d="HTTP",c={},o=[{value:"Protocol",id:"protocol",level:2},{value:"Connections",id:"connections",level:2},{value:"Message Format",id:"message-format",level:2},{value:"Process",id:"process",level:2},{value:"Port to Transport Layer",id:"port-to-transport-layer",level:3},{value:"Address",id:"address",level:3},{value:"Status Codes",id:"status-codes",level:2},{value:"Performance",id:"performance",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",mermaid:"mermaid",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"http",children:"HTTP"})}),"\n",(0,t.jsx)(n.p,{children:"Application layer protocol defines:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Types of messages exchanged."}),"\n",(0,t.jsx)(n.li,{children:"Syntax of various message types(fields definition)."}),"\n",(0,t.jsx)(n.li,{children:"Semantics of fields."}),"\n",(0,t.jsx)(n.li,{children:"Rules for when/how to send/respond to messages."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"protocol",children:"Protocol"}),"\n",(0,t.jsx)(n.p,{children:"Hypertext Transfer Protocol (RFC 2068):"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"HTTP -> Socket Interface -> TCP."}),"\n",(0,t.jsx)(n.li,{children:"Stateless protocol."}),"\n",(0,t.jsxs)(n.li,{children:["HTTP/1.0 \u9ed8\u8ba4\u4e0d\u5f00\u542f\u957f\u8fde\u63a5: \u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u5fc5\u987b\u540c\u65f6\u53d1\u9001 ",(0,t.jsx)(n.code,{children:"Connection: Keep-Alive"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["HTTP/1.1 \u9ed8\u8ba4\u5f00\u542f\u957f\u8fde\u63a5:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Keep-Alive: timeout=5, max=100"}),":\n\u8868\u793a TCP \u901a\u9053\u4fdd\u6301 5 \u79d2, \u6700\u591a\u63a5\u6536 100 \u6b21\u8bf7\u6c42."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Keep-Alive"})," \u65e0\u6cd5\u4fdd\u8bc1\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u8fde\u63a5\u4e00\u5b9a\u6d3b\u8dc3."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"HTTP \u4e3a\u65e0\u72b6\u6001\u534f\u8bae: \u6bcf\u4e2a\u8bf7\u6c42\u76f8\u4e92\u72ec\u7acb."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"connections",children:"Connections"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Non-persistent connections: 1 http request with 1 tcp connection."}),"\n",(0,t.jsx)(n.li,{children:"Persistent connections: multiple http request with 1 tcp connection."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"message-format",children:"Message Format"}),"\n",(0,t.jsx)(n.p,{children:"HTTP request format:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"request line -> (method field, object url field, protocol version)\nheader lines -> Host/Connections(close -> non-persistent connection)/User-agent/Accept-language\n\\r\\n\nentity body\n"})}),"\n",(0,t.jsx)(n.p,{children:"HTTP response format:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"status line -> (protocol version, status code, corresponding status message)\nheader lines -> Connections/Date/Server/Last-Modified/Content-Length(bytes)/Content-Type\n\\r\\n\nentity body\n"})}),"\n",(0,t.jsx)(n.admonition,{title:"Headers",type:"tip",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://github.com/hyfather/httpcolon",children:"HTTP;Colon"}),"\nhelp to learn and master HTTP headers."]})}),"\n",(0,t.jsx)(n.h2,{id:"process",children:"Process"}),"\n",(0,t.jsx)(n.h3,{id:"port-to-transport-layer",children:"Port to Transport Layer"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Bandwidth-sensitive application: UDP."}),"\n",(0,t.jsx)(n.li,{children:"Reliable-sensitive application: TCP."}),"\n"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Application"}),(0,t.jsx)(n.th,{children:"Application Layer"}),(0,t.jsx)(n.th,{children:"Transport Layer"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Email"}),(0,t.jsx)(n.td,{children:"SMTP"}),(0,t.jsx)(n.td,{children:"TCP"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Remote terminal access"}),(0,t.jsx)(n.td,{children:"Telnet"}),(0,t.jsx)(n.td,{children:"TCP"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Web"}),(0,t.jsx)(n.td,{children:"HTTP/HTTPS"}),(0,t.jsx)(n.td,{children:"TCP"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"File transfer"}),(0,t.jsx)(n.td,{children:"FTP"}),(0,t.jsx)(n.td,{children:"TCP"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Streaming multimedia"}),(0,t.jsx)(n.td,{children:"HTTP/HTTPS/RTP"}),(0,t.jsx)(n.td,{children:"TCP/UDP"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Internet telephony"}),(0,t.jsx)(n.td,{children:"SIP/RTP"}),(0,t.jsx)(n.td,{children:"UDP"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"address",children:"Address"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"IP (32 bits network layer): find specific host/end-system."}),"\n",(0,t.jsx)(n.li,{children:"Port (16 bits transport layer): find specific process."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"status-codes",children:"Status Codes"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/HTTP/Status",children:"RFC 2616"}),"\ndefines the following\n",(0,t.jsx)(n.a,{href:"https://evertpot.com/http",children:"status codes"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Informational responses: 100\u2013199."}),"\n",(0,t.jsxs)(n.li,{children:["Successful responses: 200\u2013299.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"200 OK."}),"\n",(0,t.jsx)(n.li,{children:"201 Created."}),"\n",(0,t.jsx)(n.li,{children:"202 Accepted."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Redirects: 300\u2013399.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"301 Moved Permanently."}),"\n",(0,t.jsx)(n.li,{children:"302 Found."}),"\n",(0,t.jsx)(n.li,{children:"304 Not Modified."}),"\n",(0,t.jsx)(n.li,{children:"307 Temporary Redirect."}),"\n",(0,t.jsx)(n.li,{children:"308 Permanent Redirect."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Client errors: 400\u2013499.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"400 Bad Request."}),"\n",(0,t.jsx)(n.li,{children:"401 Unauthorized."}),"\n",(0,t.jsx)(n.li,{children:"403 Forbidden."}),"\n",(0,t.jsx)(n.li,{children:"404 Not Found."}),"\n",(0,t.jsx)(n.li,{children:"405 Method Not Allowed."}),"\n",(0,t.jsx)(n.li,{children:"406 Not Acceptable."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Server errors: 500\u2013599.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"500 Internal Server Error."}),"\n",(0,t.jsx)(n.li,{children:"501 Not Implemented."}),"\n",(0,t.jsx)(n.li,{children:"502 Bad Gateway."}),"\n",(0,t.jsx)(n.li,{children:"503 Service Unavailable."}),"\n",(0,t.jsx)(n.li,{children:"504 Gateway Timeout."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Use reasonable HTTP status codes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"200: general success."}),"\n",(0,t.jsx)(n.li,{children:"201: successful creation."}),"\n",(0,t.jsx)(n.li,{children:"301: moved permanently (SEO friendly)."}),"\n",(0,t.jsx)(n.li,{children:"302: moved temporarily."}),"\n",(0,t.jsx)(n.li,{children:"304: not modified (HTTP cache)."}),"\n",(0,t.jsx)(n.li,{children:"400: bad requests from client."}),"\n",(0,t.jsx)(n.li,{children:"401: unauthorized requests."}),"\n",(0,t.jsx)(n.li,{children:"403: missing permissions."}),"\n",(0,t.jsx)(n.li,{children:"404: missing resources."}),"\n",(0,t.jsx)(n.li,{children:"429: too many requests."}),"\n",(0,t.jsx)(n.li,{children:"5xx: internal errors (these should be avoided at all costs)."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"HTTP Redirect",src:s(85711).A+"",title:"HTTP Redirect",width:"943",height:"999"})}),"\n",(0,t.jsxs)(n.admonition,{title:"HTTP 402",type:"tip",children:[(0,t.jsxs)(n.p,{children:["HTTP 402 ",(0,t.jsx)(n.code,{children:"Payment Required"}),"\nembeds payments directly into HTTP.\nBased on ",(0,t.jsx)(n.a,{href:"https://github.com/coinbase/x402",children:"x402"}),",\nagent payments protocol (AP2) designed to ",(0,t.jsx)(n.a,{href:"https://www.msuiche.com/posts/when-machines-pay-machines-the-economics-of-agentic-ai",children:"agentic commerce"}),"."]}),(0,t.jsx)(n.mermaid,{value:'graph TD\n  subgraph Agentic Web\n    AI[AI Agent]\n    DP[Data Provider]\n    EU[End User/System]\n\n    AI -- Micropayment --\x3e DP\n    DP -- "API + 402" --\x3e AI\n    AI -- Results --\x3e EU\n  end'})]}),"\n",(0,t.jsx)(n.h2,{id:"performance",children:"Performance"}),"\n",(0,t.jsx)(n.p,{children:"\u9650\u5236 Web \u6027\u80fd\u7684\u4e3b\u8981\u56e0\u7d20\u662f\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u7f51\u7edc\u5f80\u8fd4\u5ef6\u8fdf (RTT):"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u6301\u4e45\u5316\u8fde\u63a5\u4ee5\u652f\u6301\u8fde\u63a5\u91cd\u7528: ",(0,t.jsx)(n.code,{children:"N"})," \u6b21 HTTP \u8bf7\u6c42\u8282\u7701\u7684\u603b\u5ef6\u8fdf\u65f6\u95f4\u4e3a ",(0,t.jsx)(n.code,{children:"(N-1) * RTT"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"\u5206\u5757\u4f20\u8f93\u7f16\u7801\u4ee5\u652f\u6301\u6d41\u5f0f\u54cd\u5e94."}),"\n",(0,t.jsxs)(n.li,{children:["\u8bf7\u6c42\u7ba1\u9053\u4ee5\u652f\u6301\u5e76\u884c\u8bf7\u6c42\u5904\u7406 (\u5c40\u9650\u6027\u8f83\u5927):","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"FIFO \u7ba1\u9053, \u961f\u5934\u8bf7\u6c42\u4f1a\u963b\u585e\u540e\u7eed\u8bf7\u6c42."}),"\n",(0,t.jsx)(n.li,{children:"\u5e94\u7528\u5fc5\u987b\u5904\u7406\u4e2d\u65ad\u7684\u8fde\u63a5\u5e76\u6062\u590d."}),"\n",(0,t.jsx)(n.li,{children:"\u5e94\u7528\u5fc5\u987b\u5904\u7406\u4e2d\u65ad\u8bf7\u6c42\u7684\u5e42\u7b49\u95ee\u9898."}),"\n",(0,t.jsx)(n.li,{children:"\u5e94\u7528\u5fc5\u987b\u4fdd\u62a4\u81ea\u8eab\u4e0d\u53d7\u51fa\u95ee\u9898\u7684\u4ee3\u7406\u7684\u5f71\u54cd."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"\u6a21\u62df\u591a\u8def\u590d\u7528: \u5e76\u884c\u4f7f\u7528\u591a\u4e2a TCP \u8fde\u63a5 (\u5927\u591a\u6570\u73b0\u4ee3\u6d4f\u89c8\u5668\u652f\u6301\u6bcf\u4e2a\u4e3b\u673a\u6253\u5f00 6 \u4e2a\u8fde\u63a5)."}),"\n",(0,t.jsx)(n.li,{children:"\u5229\u7528\u591a\u4e2a TCP \u8fde\u63a5\u8fdb\u884c\u57df\u540d\u5206\u533a."}),"\n",(0,t.jsx)(n.li,{children:"Resources bundling and inlining (\u4f46\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u653e\u5f03\u7f13\u5b58\u7c92\u5ea6)."}),"\n",(0,t.jsx)(n.li,{children:"\u6539\u8fdb\u7684\u66f4\u597d\u7684\u7f13\u5b58\u673a\u5236."}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},85711:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/http-redirect-cfbd567f81667dda5c07dc038777f4aa.png"},86145:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var i=s(57140);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);